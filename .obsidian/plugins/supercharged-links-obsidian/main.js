/*
THIS IS A GENERATED/BUNDLED FILE BY ROLLUP
if you want to view the source visit the plugins github repository
*/

'use strict';

var obsidian = require('obsidian');
var state = require('@codemirror/state');
var view = require('@codemirror/view');
var language = require('@codemirror/language');

/******************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

typeof SuppressedError === "function" ? SuppressedError : function (error, suppressed, message) {
    var e = new Error(message);
    return e.name = "SuppressedError", e.error = error, e.suppressed = suppressed, e;
};

const matchTypes = {
    'exact': "Exact match",
    'contains': "Contains value",
    'whiteSpace': "Value within whitespace separated words",
    'startswith': "Starts with this value",
    'endswith': "Ends with this value"
};
const matchSign = {
    'exact': "",
    'contains': "*",
    'startswith': "^",
    'endswith': "$",
    'whiteSpace': "~"
};
const matchPreview = {
    'exact': "with value",
    'contains': "containing",
    'whiteSpace': "containing",
    'startswith': "starting with",
    'endswith': "ending with"
};
const matchPreviewPath = {
    'exact': "is",
    'contains': "contains",
    'whiteSpace': "contains",
    'startswith': "starts with",
    'endswith': "ends with"
};
const selectorType = {
    'attribute': 'Attribute value',
    'tag': 'Tag',
    'path': 'Note path'
};
class CSSLink {
    constructor() {
        this.type = 'attribute';
        this.name = "";
        this.value = "";
        this.matchCaseSensitive = false;
        this.match = "exact";
        let s4 = () => {
            return Math.floor((1 + Math.random()) * 0x10000)
                .toString(16)
                .substring(1);
        };
        //return id of format 'aaaaaaaa'-'aaaa'-'aaaa'-'aaaa'-'aaaaaaaaaaaa'
        this.uid = s4() + "-" + s4();
        this.selectText = true;
        this.selectAppend = true;
        this.selectPrepend = true;
        this.selectBackground = true;
    }
}

function clearExtraAttributes(link) {
    Object.values(link.attributes).forEach(attr => {
        if (attr.name.includes("data-link")) {
            link.removeAttribute(attr.name);
        }
    });
}
function fetchTargetAttributesSync(app, settings, dest, addDataHref) {
    var _a;
    let new_props = { tags: "" };
    const cache = app.metadataCache.getFileCache(dest);
    if (!cache)
        return new_props;
    const frontmatter = cache.frontmatter;
    if (frontmatter) {
        settings.targetAttributes.forEach(attribute => {
            if (Object.keys(frontmatter).includes(attribute)) {
                if (attribute === 'tag' || attribute === 'tags') {
                    new_props['tags'] += frontmatter[attribute];
                }
                else {
                    new_props[attribute] = frontmatter[attribute];
                }
            }
        });
    }
    if (settings.targetTags) {
        new_props["tags"] += obsidian.getAllTags(cache).join(' ');
    }
    if (addDataHref) {
        new_props['data-href'] = dest.basename;
    }
    new_props['path'] = dest.path;
    //@ts-ignore
    const getResults = (api) => {
        const page = api.page(dest.path);
        if (!page) {
            return;
        }
        settings.targetAttributes.forEach((field) => {
            const value = page[field];
            if (value)
                new_props[field] = value;
        });
    };
    if (settings.getFromInlineField && app.plugins.enabledPlugins.has("dataview")) {
        const api = (_a = app.plugins.plugins.dataview) === null || _a === void 0 ? void 0 : _a.api;
        if (api) {
            getResults(api);
        }
        // This is crashing for some people. I think ignoring it will be ok. 
        // else
        //     this.plugin.registerEvent(
        //         app.metadataCache.on("dataview:api-ready", (api: any) =>
        //             getResults(api)
        //         )
        //     );
    }
    // Replace spaces with hyphens in the keys of new_props
    const hyphenated_props = {};
    for (const key in new_props) {
        const hyphenatedKey = key.replace(/ /g, '-');
        hyphenated_props[hyphenatedKey] = new_props[key];
    }
    new_props = hyphenated_props;
    return new_props;
}
function processKey(key) {
    // Replace spaces with hyphens (v0.13.4+)
    return key.replace(/ /g, '-');
}
function processValue(key, value) {
    // TODO: This is a hack specifically for Emile's setup. Should be commented in releases.
    if (key.contains("publishedIn") && (value === null || value === void 0 ? void 0 : value.length) && value.length === 1 && value[0].startsWith && value[0].startsWith("[[") && value[0].endsWith("]]")) {
        return value[0].slice(2, -2);
    }
    return value;
}
function setLinkNewProps(link, new_props) {
    // @ts-ignore
    for (const a of link.attributes) {
        if (a.name.includes("data-link") && !(a.name in new_props)) {
            link.removeAttribute(a.name);
        }
    }
    Object.keys(new_props).forEach(key => {
        const dom_key = processKey(key);
        const name = "data-link-" + dom_key;
        const curValue = link.getAttribute(name);
        const newValue = processValue(key, new_props[key]);
        // Only update if value is different
        if (!newValue || curValue != newValue) {
            link.setAttribute(name, newValue);
            if ((newValue === null || newValue === void 0 ? void 0 : newValue.startsWith) && (newValue.startsWith('http') || newValue.startsWith('data:'))) {
                link.style.setProperty(`--data-link-${dom_key}`, `url(${newValue})`);
            }
            else {
                link.style.setProperty(`--data-link-${dom_key}`, newValue);
            }
        }
    });
    if (!link.hasClass("data-link-icon")) {
        link.addClass("data-link-icon");
    }
    if (!link.hasClass("data-link-icon-after")) {
        link.addClass("data-link-icon-after");
    }
    if (!link.hasClass("data-link-text")) {
        link.addClass("data-link-text");
    }
}
function updateLinkExtraAttributes(app, settings, link, destName) {
    var _a, _b;
    const linkHref = (_b = (_a = link.getAttribute('href')) === null || _a === void 0 ? void 0 : _a.split('#')) === null || _b === void 0 ? void 0 : _b[0];
    if (linkHref) {
        const dest = app.metadataCache.getFirstLinkpathDest(linkHref, destName);
        if (dest) {
            const new_props = fetchTargetAttributesSync(app, settings, dest, false);
            setLinkNewProps(link, new_props);
        }
    }
}
function updateDivExtraAttributes(app, settings, link, destName, linkName, filter_collapsible = false) {
    if (filter_collapsible && link.parentElement.getAttribute("class").contains('mod-collapsible'))
        return; // Bookmarks Folder
    if (!linkName) {
        linkName = link.textContent;
    }
    if (!!link.parentElement.getAttribute('data-path')) {
        // File Browser
        linkName = link.parentElement.getAttribute('data-path');
    }
    else if (link.parentElement.getAttribute("class") == "suggestion-content" && !!link.nextElementSibling) {
        // Auto complete
        linkName = link.nextElementSibling.textContent + linkName;
    }
    const dest = app.metadataCache.getFirstLinkpathDest(obsidian.getLinkpath(linkName), destName);
    if (dest) {
        const new_props = fetchTargetAttributesSync(app, settings, dest, true);
        setLinkNewProps(link, new_props);
    }
}
function updateElLinks(app, plugin, el, ctx) {
    const settings = plugin.settings;
    const links = el.querySelectorAll('a.internal-link');
    const destName = ctx.sourcePath.replace(/(.*).md/, "$1");
    links.forEach((link) => {
        updateLinkExtraAttributes(app, settings, link, destName);
    });
}
function updatePropertiesPane(propertiesEl, file, app, plugin) {
    var _a;
    const frontmatter = (_a = app.metadataCache.getCache(file.path)) === null || _a === void 0 ? void 0 : _a.frontmatter;
    if (!!frontmatter) {
        const nodes = propertiesEl.querySelectorAll("div.internal-link > .multi-select-pill-content");
        for (let i = 0; i < nodes.length; ++i) {
            const el = nodes[i];
            const linkText = el.textContent;
            const keyEl = el.parentElement.parentElement.parentElement.parentElement.children[0].children[1];
            // @ts-ignore
            const key = keyEl.value;
            const listOfLinks = frontmatter[key];
            let foundS = null;
            if (!listOfLinks) {
                continue;
            }
            for (const s of listOfLinks) {
                if (s.length > 4 && s.startsWith("[[") && s.endsWith("]]")) {
                    const slicedS = s.slice(2, -2);
                    const split = slicedS.split("|");
                    if (split.length == 1 && split[0] == linkText) {
                        foundS = split[0];
                        break;
                    }
                    else if (split.length == 2 && split[1] == linkText) {
                        foundS = split[0];
                        break;
                    }
                }
            }
            if (!!foundS) {
                updateDivExtraAttributes(plugin.app, plugin.settings, el, "", foundS);
            }
        }
        const singleNodes = propertiesEl.querySelectorAll("div.metadata-link-inner");
        for (let i = 0; i < singleNodes.length; ++i) {
            const el = singleNodes[i];
            const linkText = el.textContent;
            const keyEl = el.parentElement.parentElement.parentElement.children[0].children[1];
            // @ts-ignore
            const key = keyEl.value;
            const link = frontmatter[key];
            if (!link) {
                continue;
            }
            let foundS = null;
            if ((link === null || link === void 0 ? void 0 : link.length) > 4 && link.startsWith("[[") && link.endsWith("]]")) {
                const slicedS = link.slice(2, -2);
                const split = slicedS.split("|");
                if (split.length == 1 && split[0] == linkText) {
                    foundS = split[0];
                }
                else if (split.length == 2 && split[1] == linkText) {
                    foundS = split[0];
                }
            }
            if (!!foundS) {
                updateDivExtraAttributes(plugin.app, plugin.settings, el, "", foundS);
            }
        }
    }
}
function updateVisibleLinks(app, plugin) {
    const settings = plugin.settings;
    app.workspace.iterateRootLeaves((leaf) => {
        var _a, _b;
        if (leaf.view instanceof obsidian.MarkdownView && leaf.view.file) {
            const file = leaf.view.file;
            const cachedFile = app.metadataCache.getFileCache(file);
            // @ts-ignore
            const metadata = (_b = (_a = leaf.view) === null || _a === void 0 ? void 0 : _a.metadataEditor) === null || _b === void 0 ? void 0 : _b.contentEl;
            if (!!metadata) {
                updatePropertiesPane(metadata, file, app, plugin);
            }
            //@ts-ignore
            const tabHeader = leaf.tabHeaderInnerTitleEl;
            if (settings.enableTabHeader) {
                // Supercharge tab headers
                updateDivExtraAttributes(app, settings, tabHeader, "", file.path);
            }
            else {
                clearExtraAttributes(tabHeader);
            }
            if (cachedFile === null || cachedFile === void 0 ? void 0 : cachedFile.links) {
                cachedFile.links.forEach((link) => {
                    const fileName = file.path.replace(/(.*).md/, "$1");
                    const dest = app.metadataCache.getFirstLinkpathDest(link.link, fileName);
                    if (dest) {
                        const new_props = fetchTargetAttributesSync(app, settings, dest, false);
                        const internalLinks = leaf.view.containerEl.querySelectorAll(`a.internal-link[href="${link.link}"]`);
                        internalLinks.forEach((internalLink) => setLinkNewProps(internalLink, new_props));
                    }
                });
            }
        }
    });
}

function displayText(link, settings) {
    if (link.type === 'tag') {
        if (!link.value) {
            return "<b>Please choose a tag</b>";
        }
        return `<span class="data-link-icon data-link-text data-link-icon-after" data-link-tags="${link.value}">Note</span> has tag <a class="tag">#${link.value}</a>`;
    }
    else if (link.type === 'attribute') {
        if (settings.targetAttributes.length === 0) {
            return `<b>No attributes added to "Target attributes". Go to plugin settings to add them.</b>`;
        }
        if (!link.name) {
            return "<b>Please choose an attribute name.</b>";
        }
        if (!link.value) {
            return "<b>Please choose an attribute value.</b>";
        }
        return `<span class="data-link-icon data-link-text data-link-icon-after" data-link-${link.name}="${link.value}">Note</span> has attribute <b>${link.name.replace(/-/g, ' ')}</b> ${matchPreview[link.match]} <b>${link.value}</b>.`;
    }
    if (!link.value) {
        return "<b>Please choose a path.</b>";
    }
    return `The path of the <span class="data-link-icon data-link-text data-link-icon-after" data-link-path="${link.value}">note</span> ${matchPreviewPath[link.match]} <b>${link.value}</b>`;
}
function updateDisplay(textArea, link, settings) {
    let toDisplay = displayText(link, settings);
    let disabled = false;
    if (link.type === 'tag') {
        if (!link.value) {
            disabled = true;
        }
    }
    else if (link.type === 'attribute') {
        if (settings.targetAttributes.length === 0) {
            disabled = true;
        }
        else if (!link.name) {
            disabled = true;
        }
        else if (!link.value) {
            disabled = true;
        }
    }
    else {
        if (!link.value) {
            disabled = true;
        }
    }
    textArea.innerHTML = toDisplay;
    return disabled;
}
class CSSBuilderModal extends obsidian.Modal {
    constructor(plugin, saveCallback, cssLink = null) {
        super(plugin.app);
        this.cssLink = cssLink;
        if (!cssLink) {
            this.cssLink = new CSSLink();
        }
        this.plugin = plugin;
        this.saveCallback = saveCallback;
    }
    onOpen() {
        this.titleEl.setText(`Select what links to style!`);
        // is tag
        const matchAttrPlaceholder = "Attribute value to match.";
        const matchTagPlaceholder = "Note tag to match (without #).";
        const matchPathPlaceholder = "File path to match.";
        const matchAttrTxt = "Attribute value";
        const matchTagTxt = "Tag";
        const matchPathTxt = "Path";
        const cssLink = this.cssLink;
        const plugin = this.plugin;
        this.contentEl.addClass("supercharged-modal");
        // Type
        new obsidian.Setting(this.contentEl)
            .setName("Type of selector")
            .setDesc("Attributes selects YAML and DataView attributes" +
            ", tags chooses the tags of a note, and path considers the name of the note including in what folder it is.")
            .addDropdown(dc => {
            Object.keys(selectorType).forEach((type) => {
                dc.addOption(type, selectorType[type]);
                if (type === this.cssLink.type) {
                    dc.setValue(type);
                }
            });
            dc.onChange((type) => {
                cssLink.type = type;
                updateContainer(cssLink.type);
                saveButton.setDisabled(updateDisplay(preview, this.cssLink, this.plugin.settings));
            });
        });
        // attribute name
        const attrName = new obsidian.Setting(this.contentEl)
            .setName("Attribute name")
            .setDesc("What attribute to target? Make sure to first add target attributes to the settings at the top!")
            .addDropdown(dc => {
            plugin.settings.targetAttributes.forEach((attribute) => {
                const dom_attribute = processKey(attribute);
                dc.addOption(dom_attribute, attribute);
                if (dom_attribute === cssLink.name) {
                    dc.setValue(dom_attribute);
                }
            });
            dc.onChange(name => {
                cssLink.name = name;
                saveButton.setDisabled(updateDisplay(preview, cssLink, plugin.settings));
            });
        });
        // attribute value
        const attrValue = new obsidian.Setting(this.contentEl)
            .setName("Value to match")
            .setDesc("TODO")
            .addText(t => {
            t.setValue(cssLink.value);
            t.onChange(value => {
                cssLink.value = value;
                saveButton.setDisabled(updateDisplay(preview, cssLink, plugin.settings));
            });
        });
        this.contentEl.createEl('h4', { text: 'Advanced' });
        // matching type
        const matchingType = new obsidian.Setting(this.contentEl)
            .setName("Matching type")
            .setDesc("How to compare the attribute or path with the given value.")
            .addDropdown(dc => {
            Object.keys(matchTypes).forEach((key) => {
                dc.addOption(key, matchTypes[key]);
                if (key == cssLink.match) {
                    dc.setValue(key);
                }
            });
            dc.onChange((value) => {
                cssLink.match = value;
                saveButton.setDisabled(updateDisplay(preview, cssLink, plugin.settings));
            });
        });
        // case sensitive
        const caseSensitiveTogglerContainer = new obsidian.Setting(this.contentEl)
            .setName("Case sensitive matching")
            .setDesc("Should the matching of the value be case sensitive?")
            .addToggle(b => {
            b.setValue(cssLink.matchCaseSensitive);
            b.onChange(value => {
                cssLink.matchCaseSensitive = value;
                b.setDisabled(updateDisplay(preview, cssLink, plugin.settings));
            });
        });
        if (!this.cssLink.name && this.plugin.settings.targetAttributes.length > 0) {
            this.cssLink.name = this.plugin.settings.targetAttributes[0];
        }
        const updateContainer = function (type) {
            if (type === 'attribute') {
                attrName.settingEl.show();
                attrValue.nameEl.setText(matchAttrTxt);
                attrValue.descEl.setText(matchAttrPlaceholder);
                matchingType.settingEl.show();
                caseSensitiveTogglerContainer.settingEl.show();
            }
            else if (type === 'tag') {
                attrName.settingEl.hide();
                attrValue.nameEl.setText(matchTagTxt);
                attrValue.descEl.setText(matchTagPlaceholder);
                matchingType.settingEl.hide();
                caseSensitiveTogglerContainer.settingEl.hide();
            }
            else {
                attrName.settingEl.hide();
                attrValue.nameEl.setText(matchPathTxt);
                attrValue.descEl.setText(matchPathPlaceholder);
                matchingType.settingEl.show();
                caseSensitiveTogglerContainer.settingEl.show();
            }
        };
        new obsidian.Setting(this.contentEl)
            .setName("Style options")
            .setDesc("What styling options are active? " +
            "Disabling options you won't use can improve performance slightly.")
            .addToggle(t => {
            t.onChange(value => {
                cssLink.selectText = value;
            });
            t.setValue(cssLink.selectText);
            t.setTooltip("Style link text");
        })
            .addToggle(t => {
            t.onChange(value => {
                cssLink.selectPrepend = value;
            });
            t.setValue(cssLink.selectPrepend);
            t.setTooltip("Add content before link");
        })
            .addToggle(t => {
            t.onChange(value => {
                cssLink.selectAppend = value;
            });
            t.setValue(cssLink.selectAppend);
            t.setTooltip("Add content after link");
        })
            .addToggle(t => {
            t.onChange(value => {
                cssLink.selectBackground = value;
            });
            t.setValue(cssLink.selectBackground);
            t.setTooltip("Add optional background or underline to link");
        });
        this.contentEl.createEl('h4', { text: 'Result' });
        const modal = this;
        const saveButton = new obsidian.Setting(this.contentEl)
            .setName("Preview")
            .setDesc("")
            .addButton(b => {
            b.setButtonText("Save");
            b.onClick(() => {
                modal.saveCallback(cssLink);
                modal.close();
            });
        });
        // generate button
        const preview = saveButton.nameEl;
        updateContainer(cssLink.type);
        saveButton.setDisabled(updateDisplay(preview, this.cssLink, this.plugin.settings));
    }
}

const colorSet = [[
        '#0089BA',
        '#2C73D2',
        '#008E9B',
        '#0081CF',
        '#008F7A',
        '#008E9B',
    ], [
        '#D65DB1',
        '#0082C1',
        '#9270D3',
        '#007F93',
        '#007ED9',
        '#007660',
    ], [
        '#FF9671',
        '#A36AAA',
        '#F27D88',
        '#6967A9',
        '#D26F9D',
        '#1b6299',
    ], [
        '#FFC75F',
        '#4C9A52',
        '#C3BB4E',
        '#00855B',
        '#88AC4B',
        '#006F61',
    ], [
        '#FF6F91',
        '#6F7F22',
        '#E07250',
        '#257A3E',
        '#AC7C26',
        '#006F5F',
    ], [
        '#d9d867',
        '#2FAB63',
        '#B8E067',
        '#008E63',
        '#78C664',
        '#007160',
    ]];
const colors = [];
for (const i of Array(6).keys()) {
    for (const j of Array(6).keys()) {
        colors.push(colorSet[j][i]);
    }
}
function hash(uid) {
    let hash = 0;
    for (let i = 0; i < uid.length; i++) {
        const char = uid.charCodeAt(i);
        hash = ((hash << 5) - hash) + char;
        hash = hash & hash; // Convert to 32bit integer
    }
    hash = Math.abs(hash);
    return hash;
}
function buildCSS(selectors, plugin) {
    return __awaiter(this, void 0, void 0, function* () {
        var _a;
        const instructions = [
            "/* WARNING: This file will be overwritten by the plugin.",
            "Do not edit this file directly! First copy this file and rename it if you want to edit things. */",
            "",
            ":root {"
        ];
        selectors.forEach((selector, i) => {
            if (selector.selectText) {
                instructions.push(`    --${selector.uid}-color: ${colors[hash(selector.uid) % 36]};`);
                instructions.push(`    --${selector.uid}-weight: initial;`);
            }
            if (selector.selectPrepend) {
                instructions.push(`    --${selector.uid}-before: '';`);
            }
            if (selector.selectAppend) {
                instructions.push(`    --${selector.uid}-after: '';`);
            }
            if (selector.selectBackground) {
                instructions.push(`    --${selector.uid}-background-color: #ffffff;`);
                instructions.push(`    --${selector.uid}-decoration: initial;`);
            }
        });
        instructions.push("}");
        selectors.forEach(selector => {
            let cssSelector;
            if (selector.type === 'attribute') {
                cssSelector = `[data-link-${selector.name}${matchSign[selector.match]}="${selector.value}" ${selector.matchCaseSensitive ? "" : " i"}]`;
            }
            else if (selector.type === 'tag') {
                cssSelector = `[data-link-tags*="${selector.value}" i]`;
            }
            else {
                cssSelector = `[data-link-path${matchSign[selector.match]}="${selector.value}" ${selector.matchCaseSensitive ? "" : "i"}]`;
            }
            if (selector.selectText) {
                instructions.push(...[
                    "",
                    `div[data-id="${selector.uid}"] div.setting-item-description,`,
                    cssSelector + " {",
                    `    color: var(--${selector.uid}-color) !important;`,
                    `    font-weight: var(--${selector.uid}-weight);`,
                    "}"
                ]);
            }
            if (selector.selectBackground) {
                instructions.push(...["",
                    `.c-${selector.uid}-use-background div[data-id="${selector.uid}"] div.setting-item-description,`,
                    `.c-${selector.uid}-use-background .data-link-text${cssSelector} {`,
                    `    background-color: var(--${selector.uid}-background-color) !important;`,
                    `    border-radius: 5px;`,
                    `    padding-left: 2px;`,
                    `    padding-right: 2px;`,
                    `    text-decoration: var(--${selector.uid}-decoration) !important;`,
                    "}"]);
            }
            if (selector.selectPrepend) {
                instructions.push(...["",
                    `div[data-id="${selector.uid}"] div.setting-item-description::before,`,
                    `.data-link-icon${cssSelector}::before {`,
                    `    content: var(--${selector.uid}-before);`,
                    "}"]);
            }
            if (selector.selectAppend) {
                instructions.push(...["",
                    `div[data-id="${selector.uid}"] div.setting-item-description::after,`,
                    `.data-link-icon-after${cssSelector}::after {`,
                    `    content: var(--${selector.uid}-after);`,
                    "}"]);
            }
        });
        instructions.push(...[
            "/* @settings",
            "name: Supercharged Links",
            "id: supercharged-links",
            "settings:",
        ]);
        selectors.forEach((selector, i) => {
            let name = selector.name;
            let value = selector.value;
            if (selector.type === 'tag') {
                name = 'tag';
                // value = "\#" + value;
            }
            else if (selector.type === 'path') {
                name = 'path';
            }
            instructions.push(...[
                "    - ",
                `        id: ${selector.uid}`,
                `        title: ${name} is ${value}`,
                `        description: Example note`,
                "        type: heading",
                "        collapsed: true",
                "        level: 3"
            ]);
            if (selector.selectText) {
                instructions.push(...[
                    "    - ",
                    `        id: ${selector.uid}-color`,
                    `        title: Link color`,
                    "        type: variable-color",
                    "        format: hex",
                    `        default: '${colors[hash(selector.uid) % 36]}'`,
                    "    - ",
                    `        id: ${selector.uid}-weight`,
                    `        title: Font weight`,
                    "        type: variable-select",
                    `        default: initial`,
                    `        options:`,
                    `            - initial`,
                    `            - lighter`,
                    `            - normal`,
                    `            - bold`,
                    `            - bolder`,
                    "    - ",
                    `        id: ${selector.uid}-decoration`,
                    `        title: Font decoration`,
                    "        type: variable-select",
                    `        default: initial`,
                    `        options:`,
                    `            - initial`,
                    `            - underline`,
                    `            - overline`,
                    `            - line-through`
                ]);
            }
            if (selector.selectPrepend) {
                instructions.push(...["    - ",
                    `        id: ${selector.uid}-before`,
                    `        title: Prepend text`,
                    `        description: Add some text, such as an emoji, before the links.`,
                    "        type: variable-text",
                    `        default: ''`,
                    `        quotes: true`]);
            }
            if (selector.selectAppend) {
                instructions.push(...["    - ",
                    `        id: ${selector.uid}-after`,
                    `        title: Append text`,
                    `        description: Add some text, such as an emoji, after the links.`,
                    "        type: variable-text",
                    `        default: ''`,
                    `        quotes: true`]);
            }
            if (selector.selectBackground) {
                instructions.push(...["    - ",
                    `        id: c-${selector.uid}-use-background`,
                    `        title: Use background color`,
                    `        description: Adds a background color to the link. This can look buggy in live preview.`,
                    "        type: class-toggle",
                    "    - ",
                    `        id: ${selector.uid}-background-color`,
                    `        title: Background color`,
                    "        type: variable-color",
                    "        format: hex",
                    `        default: '#ffffff'`]);
            }
        });
        instructions.push("*/");
        const vault = plugin.app.vault;
        const configDir = (_a = vault.configDir) !== null && _a !== void 0 ? _a : ".obsidian";
        const pathDir = configDir + "/snippets";
        yield vault.adapter.mkdir(pathDir);
        const path = pathDir + "/supercharged-links-gen.css";
        if (yield vault.adapter.exists(path)) {
            yield vault.adapter.remove(path);
        }
        yield plugin.app.vault.create(path, instructions.join('\n'));
        // Activate snippet
        if (plugin.settings.activateSnippet) {
            // @ts-ignore
            const customCss = plugin.app.customCss;
            customCss.enabledSnippets.add('supercharged-links-gen');
            customCss.requestLoadSnippets();
        }
        // Ensure Style Settings reads changes
        plugin.app.workspace.trigger("parse-style-settings");
    });
}

class SuperchargedLinksSettingTab extends obsidian.PluginSettingTab {
    constructor(app, plugin) {
        super(app, plugin);
        this.plugin = plugin;
        this.debouncedGenerate = obsidian.debounce(this._generateSnippet, 1000, true);
        // Generate CSS immediately rather than 1 second - feels laggy
        this._generateSnippet();
    }
    display() {
        let { containerEl } = this;
        containerEl.empty();
        /* Managing extra attirbutes for a.internal-link */
        new obsidian.Setting(containerEl)
            .setName('Target Attributes for styling')
            .setDesc('Frontmatter attributes to target, comma separated')
            .addTextArea((text) => {
            text
                .setPlaceholder('Enter attributes as string, comma separated')
                .setValue(this.plugin.settings.targetAttributes.join(', '))
                .onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.targetAttributes = value.split(',').map(attr => attr.trim());
                if (this.plugin.settings.targetAttributes.length === 1 && !this.plugin.settings.targetAttributes[0]) {
                    this.plugin.settings.targetAttributes = [];
                }
                yield this.plugin.saveSettings();
            }));
            text.inputEl.rows = 6;
            text.inputEl.cols = 25;
        });
        containerEl.createEl('h4', { text: 'Styling' });
        const styleSettingDescription = containerEl.createDiv();
        styleSettingDescription.innerHTML = `
Styling can be done using the Style Settings plugin. 
 <ol>
 <li>Create selectors down below.</li>
 <li>Go to the Style Settings tab and style your links!</li>
</ol>`;
        const selectorDiv = containerEl.createDiv();
        this.drawSelectors(selectorDiv);
        containerEl.createEl('h4', { text: 'Settings' });
        new obsidian.Setting(containerEl)
            .setName('Enable in Editor')
            .setDesc('If true, this will also supercharge internal links in the editor view of a note.')
            .addToggle(toggle => {
            toggle.setValue(this.plugin.settings.enableEditor);
            toggle.onChange(value => {
                this.plugin.settings.enableEditor = value;
                this.plugin.saveSettings();
                updateVisibleLinks(this.app, this.plugin);
            });
        });
        new obsidian.Setting(containerEl)
            .setName('Enable in tab headers')
            .setDesc('If true, this will also supercharge the headers of a tab.')
            .addToggle(toggle => {
            toggle.setValue(this.plugin.settings.enableTabHeader);
            toggle.onChange(value => {
                this.plugin.settings.enableTabHeader = value;
                this.plugin.saveSettings();
                updateVisibleLinks(this.app, this.plugin);
            });
        });
        new obsidian.Setting(containerEl)
            .setName('Enable in File Browser')
            .setDesc('If true, this will also supercharge the file browser.')
            .addToggle(toggle => {
            toggle.setValue(this.plugin.settings.enableFileList);
            toggle.onChange(value => {
                this.plugin.settings.enableFileList = value;
                this.plugin.saveSettings();
            });
        });
        new obsidian.Setting(containerEl)
            .setName('Enable in Bases')
            .setDesc('If true, this will also supercharge Obsidian Bases.')
            .addToggle(toggle => {
            toggle.setValue(this.plugin.settings.enableBases);
            toggle.onChange(value => {
                this.plugin.settings.enableBases = value;
                this.plugin.saveSettings();
            });
        });
        new obsidian.Setting(containerEl)
            .setName('Enable in Plugins')
            .setDesc('If true, this will also supercharge plugins like the backlinks and forward links panels.')
            .addToggle(toggle => {
            toggle.setValue(this.plugin.settings.enableBacklinks);
            toggle.onChange(value => {
                this.plugin.settings.enableBacklinks = value;
                this.plugin.saveSettings();
            });
        });
        new obsidian.Setting(containerEl)
            .setName('Enable in Quick Switcher')
            .setDesc('If true, this will also supercharge the quick switcher.')
            .addToggle(toggle => {
            toggle.setValue(this.plugin.settings.enableQuickSwitcher);
            toggle.onChange(value => {
                this.plugin.settings.enableQuickSwitcher = value;
                this.plugin.saveSettings();
            });
        });
        new obsidian.Setting(containerEl)
            .setName('Enable in Link Autocompleter')
            .setDesc('If true, this will also supercharge the link autocompleter.')
            .addToggle(toggle => {
            toggle.setValue(this.plugin.settings.enableSuggestor);
            toggle.onChange(value => {
                this.plugin.settings.enableSuggestor = value;
                this.plugin.saveSettings();
            });
        });
        containerEl.createEl('h4', { text: 'Advanced' });
        // Managing choice wether you want to parse tags both from normal tags and in the frontmatter
        new obsidian.Setting(containerEl)
            .setName('Parse all tags in the file')
            .setDesc('Sets the `data-link-tags`-attribute to look for tags both in the frontmatter and in the file as #tag-name')
            .addToggle(toggle => {
            toggle.setValue(this.plugin.settings.targetTags);
            toggle.onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.targetTags = value;
                yield this.plugin.saveSettings();
            }));
        });
        // Managing choice wether you get attributes from inline fields and frontmatter or only frontmater
        new obsidian.Setting(containerEl)
            .setName('Search for attribute in Inline fields like <field::>')
            .setDesc('Sets the `data-link-<field>`-attribute to the value of inline fields')
            .addToggle(toggle => {
            toggle.setValue(this.plugin.settings.getFromInlineField);
            toggle.onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.getFromInlineField = value;
                yield this.plugin.saveSettings();
            }));
        });
        // Automatically activate snippet
        new obsidian.Setting(containerEl)
            .setName('Automatically activate snippet')
            .setDesc('If true, this will automatically activate the generated CSS snippet "supercharged-links-gen.css". ' +
            'Turn this off if you don\'t want this to happen.')
            .addToggle(toggle => {
            toggle.setValue(this.plugin.settings.activateSnippet);
            toggle.onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.activateSnippet = value;
                yield this.plugin.saveSettings();
            }));
        });
        /* Managing predefined values for properties */
        /* Manage menu options display*/
        new obsidian.Setting(containerEl)
            .setName("Display field options in context menu")
            .setDesc("This feature has been migrated to metadata-menu plugin https://github.com/mdelobelle/metadatamenu");
    }
    generateSnippet() {
        this.debouncedGenerate();
    }
    _generateSnippet() {
        return __awaiter(this, void 0, void 0, function* () {
            yield buildCSS(this.plugin.settings.selectors, this.plugin);
            // new Notice("Generated supercharged-links-gen.css");
        });
    }
    drawSelectors(div) {
        div.empty();
        this.generateSnippet();
        const selectors = this.plugin.settings.selectors;
        selectors.forEach((selector, i) => {
            const s = new obsidian.Setting(div)
                .addButton(button => {
                button.onClick(() => {
                    const oldSelector = selectors[i + 1];
                    selectors[i + 1] = selector;
                    selectors[i] = oldSelector;
                    this.drawSelectors(div);
                });
                button.setIcon("down-arrow-with-tail");
                button.setTooltip("Move selector down");
                if (i === selectors.length - 1) {
                    button.setDisabled(true);
                }
            })
                .addButton(button => {
                button.onClick(() => {
                    const oldSelector = selectors[i - 1];
                    selectors[i - 1] = selector;
                    selectors[i] = oldSelector;
                    this.drawSelectors(div);
                });
                button.setIcon("up-arrow-with-tail");
                button.setTooltip("Move selector up");
                if (i === 0) {
                    button.setDisabled(true);
                }
            })
                .addButton(button => {
                button.onClick(() => {
                    const formModal = new CSSBuilderModal(this.plugin, (newSelector) => {
                        this.plugin.settings.selectors[i] = newSelector;
                        this.plugin.saveSettings();
                        updateDisplay(s.nameEl, selector, this.plugin.settings);
                        this.generateSnippet();
                    }, selector);
                    formModal.open();
                });
                button.setIcon("pencil");
                button.setTooltip("Edit selector");
            })
                .addButton(button => {
                button.onClick(() => {
                    this.plugin.settings.selectors.remove(selector);
                    this.plugin.saveSettings();
                    this.drawSelectors(div);
                });
                button.setIcon("cross");
                button.setTooltip("Remove selector");
            });
            updateDisplay(s.nameEl, selector, this.plugin.settings);
        });
        new obsidian.Setting(div)
            .setName("New selector")
            .setDesc("Create a new selector to style with Style Settings.")
            .addButton(button => {
            button.onClick(() => {
                const formModal = new CSSBuilderModal(this.plugin, (newSelector) => {
                    this.plugin.settings.selectors.push(newSelector);
                    this.plugin.saveSettings();
                    this.drawSelectors(div);
                    // TODO: Force redraw somehow?
                });
                formModal.open();
            });
            button.setButtonText("New");
        });
    }
}

const DEFAULT_SETTINGS = {
    targetAttributes: [],
    targetTags: true,
    getFromInlineField: false,
    enableTabHeader: true,
    activateSnippet: true,
    enableEditor: true,
    enableFileList: true,
    enableBacklinks: true,
    enableQuickSwitcher: true,
    enableSuggestor: true,
    enableBases: true,
    selectors: []
};

function buildCMViewPlugin(app, _settings) {
    // Implements the live preview supercharging
    // Code structure based on https://github.com/nothingislost/obsidian-cm6-attributes/blob/743d71b0aa616407149a0b6ea5ffea28e2154158/src/main.ts
    // Code help credits to @NothingIsLost! They have been a great help getting this to work properly.
    class HeaderWidget extends view.WidgetType {
        constructor(attributes, after) {
            super();
            this.attributes = attributes;
            this.after = after;
        }
        toDOM() {
            var _a;
            let headerEl = document.createElement("span");
            headerEl.setAttrs(this.attributes);
            for (let key in this.attributes) {
                // CSS doesn't allow interpolation of variables for URLs, so do it beforehand to be nice.
                if (((_a = this.attributes[key]) === null || _a === void 0 ? void 0 : _a.startsWith) && (this.attributes[key].startsWith('http') || this.attributes[key].startsWith('data:'))) {
                    headerEl.style.setProperty(`--${key}`, `url(${this.attributes[key]})`);
                }
                else {
                    headerEl.style.setProperty(`--${key}`, processValue(key, this.attributes[key]));
                }
            }
            if (this.after) {
                headerEl.addClass('data-link-icon-after');
            }
            else {
                headerEl.addClass('data-link-icon');
            }
            // create a naive bread crumb
            return headerEl;
        }
        ignoreEvent() {
            return true;
        }
    }
    const settings = _settings;
    const viewPlugin = view.ViewPlugin.fromClass(class {
        constructor(view) {
            this.decorations = this.buildDecorations(view);
        }
        update(update) {
            if (update.docChanged) {
                this.decorations = this.decorations.map(update.changes);
                update.changes.iterChanges((fromA, toA, fromB, toB, t) => {
                    // Update all 'line blocks' between the range changed. Prevents weird graphical bugs
                    const minFrom = update.view.lineBlockAt(fromB).from;
                    const maxTo = update.view.lineBlockAt(toB).to;
                    // remove things within bounds
                    this.decorations = this.decorations.update({
                        filter: (from, to) => to < minFrom || from > maxTo
                    });
                    // Update decorations within bounds
                    this.decorations = state.RangeSet.join([this.decorations,
                        this.buildDecorations(update.view, minFrom, maxTo)]);
                });
            }
            else if (update.viewportChanged) {
                this.decorations = this.buildDecorations(update.view);
            }
        }
        destroy() {
        }
        buildDecorations(view$1, updateFrom = -1, updateTo = -1) {
            let builder = new state.RangeSetBuilder();
            if (!settings.enableEditor) {
                return builder.finish();
            }
            const mdView = view$1.state.field(obsidian.editorViewField);
            let lastAttributes = {};
            let iconDecoAfter = null;
            let iconDecoAfterWhere = null;
            let mdAliasFrom = null;
            let mdAliasTo = null;
            for (let { from, to } of view$1.visibleRanges) {
                // When updating, only changes the range given.
                if (updateFrom !== -1 && (to < updateFrom || from > updateTo))
                    continue;
                language.syntaxTree(view$1.state).iterate({
                    from,
                    to,
                    enter: (node) => {
                        if (updateFrom !== -1 && (node.to < updateFrom || node.from > updateTo))
                            return;
                        const tokenProps = node.type.prop(language.tokenClassNodeProp);
                        if (tokenProps) {
                            const props = new Set(tokenProps.split(" "));
                            // Square Brackets of links both internal (`[[`, `]]`) and md link (`[`, `]`)
                            const isMDFormatting = props.has('formatting-link') || props.has('formatting-link-string');
                            if (isMDFormatting)
                                return;
                            // Parts of internal links
                            const isLink = props.has("hmd-internal-link"); // [[`Note` or `|` or `Alias`]]
                            const isAlias = props.has("link-alias"); // [[Note| `Alias`]]
                            const isPipe = props.has("link-alias-pipe"); // [[Note `|` Alias]]
                            // The 'alias' of the md link (or its brackets)
                            const isMDLink = props.has('link'); // `[` or `Alias` or `]`(URL)
                            // The 'internal link' of the md link (or its brackets)
                            const isMDUrl = props.has('url'); // [Alias]`(` or `URL` or `)`
                            if (isMDLink) {
                                // This catches the alias of md links i.e. [ `Alias` ](URL)
                                // We'll apply the styling in the next iteration when we analyze the `URL`
                                mdAliasFrom = node.from;
                                mdAliasTo = node.to;
                            }
                            if (!isPipe && !isAlias) {
                                if (iconDecoAfter) {
                                    builder.add(iconDecoAfterWhere, iconDecoAfterWhere, iconDecoAfter);
                                    iconDecoAfter = null;
                                    iconDecoAfterWhere = null;
                                }
                            }
                            if (isLink && !isAlias && !isPipe || isMDUrl) {
                                let linkText = view$1.state.doc.sliceString(node.from, node.to);
                                linkText = linkText.split("#")[0];
                                let file = app.metadataCache.getFirstLinkpathDest(linkText, mdView.file.basename);
                                if (isMDUrl && !file) {
                                    try {
                                        file = app.vault.getAbstractFileByPath(decodeURIComponent(linkText));
                                    }
                                    catch (e) { }
                                }
                                if (file) {
                                    let _attributes = fetchTargetAttributesSync(app, settings, file, true);
                                    let attributes = {};
                                    for (let key in _attributes) {
                                        attributes["data-link-" + key] = _attributes[key];
                                    }
                                    let deco = view.Decoration.mark({
                                        attributes,
                                        class: "data-link-text"
                                    });
                                    let iconDecoBefore = view.Decoration.widget({
                                        widget: new HeaderWidget(attributes, false),
                                    });
                                    iconDecoAfter = view.Decoration.widget({
                                        widget: new HeaderWidget(attributes, true),
                                    });
                                    if (isMDUrl) {
                                        // Apply retroactively to the alias found before
                                        let deco = view.Decoration.mark({
                                            attributes: attributes,
                                            class: "data-link-text"
                                        });
                                        builder.add(mdAliasFrom, mdAliasFrom, iconDecoBefore);
                                        builder.add(mdAliasFrom, mdAliasTo, deco);
                                        if (iconDecoAfter) {
                                            builder.add(mdAliasTo, mdAliasTo, iconDecoAfter);
                                            iconDecoAfter = null;
                                            iconDecoAfterWhere = null;
                                            mdAliasFrom = null;
                                            mdAliasTo = null;
                                        }
                                    }
                                    else {
                                        builder.add(node.from, node.from, iconDecoBefore);
                                    }
                                    builder.add(node.from, node.to, deco);
                                    lastAttributes = attributes;
                                    iconDecoAfterWhere = node.to;
                                }
                            }
                            else if (isLink && isAlias) {
                                let deco = view.Decoration.mark({
                                    attributes: lastAttributes,
                                    class: "data-link-text"
                                });
                                builder.add(node.from, node.to, deco);
                                if (iconDecoAfter) {
                                    builder.add(node.to, node.to, iconDecoAfter);
                                    iconDecoAfter = null;
                                    iconDecoAfterWhere = null;
                                }
                            }
                        }
                    }
                });
            }
            return builder.finish();
        }
    }, {
        decorations: v => v.decorations
    });
    return viewPlugin;
}

class SuperchargedLinks extends obsidian.Plugin {
    constructor() {
        super(...arguments);
        this.modalObservers = [];
    }
    onload() {
        return __awaiter(this, void 0, void 0, function* () {
            console.log('Supercharged links loaded');
            yield this.loadSettings();
            this.addSettingTab(new SuperchargedLinksSettingTab(this.app, this));
            this.registerMarkdownPostProcessor((el, ctx) => {
                updateElLinks(this.app, this, el, ctx);
            });
            const plugin = this;
            const updateLinks = function (_file) {
                updateVisibleLinks(plugin.app, plugin);
                plugin.observers.forEach(([observer, type, own_class]) => {
                    const leaves = plugin.app.workspace.getLeavesOfType(type);
                    leaves.forEach(leaf => {
                        plugin.updateContainer(leaf.view.containerEl, plugin, own_class);
                    });
                });
            };
            // Live preview
            const ext = state.Prec.lowest(buildCMViewPlugin(this.app, this.settings));
            this.registerEditorExtension(ext);
            this.observers = [];
            this.app.workspace.onLayoutReady(() => {
                this.initViewObservers(this);
                this.initModalObservers(this, document);
                updateVisibleLinks(this.app, this);
            });
            // Initialization
            this.registerEvent(this.app.workspace.on("window-open", (window, win) => this.initModalObservers(this, window.getContainer().doc)));
            // Update when
            // Debounced to prevent lag when writing
            this.registerEvent(this.app.metadataCache.on('changed', obsidian.debounce(updateLinks, 500, true)));
            // Update when layout changes
            // @ts-ignore
            this.registerEvent(this.app.workspace.on("layout-change", obsidian.debounce(updateLinks, 10, true)));
            // Update plugin views when layout changes
            // TODO: This is an expensive operation that seems like it is called fairly frequently. Maybe we can do this more efficiently?
            this.registerEvent(this.app.workspace.on("layout-change", () => this.initViewObservers(this)));
            // DEBUG: When adding a new view, to get the proper id of that view, uncomment this and reload the plugin
            // this.app.workspace.iterateAllLeaves(leaf => {
            // 	console.log(leaf.view.getViewType());
            // });
        });
    }
    initViewObservers(plugin) {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y;
        // Reset observers
        plugin.observers.forEach(([observer, type]) => {
            observer.disconnect();
        });
        plugin.observers = [];
        // Register new observers for particular file panes
        plugin.registerViewType('backlink', plugin, ".tree-item-inner", true);
        plugin.registerViewType('outgoing-link', plugin, ".tree-item-inner", true);
        plugin.registerViewType('search', plugin, ".tree-item-inner");
        if ((_c = (_b = (_a = plugin.app) === null || _a === void 0 ? void 0 : _a.plugins) === null || _b === void 0 ? void 0 : _b.plugins) === null || _c === void 0 ? void 0 : _c.breadcrumbs) {
            // console.log('Supercharged links: Enabling breadcrumbs support');
            plugin.registerViewType('bc-matrix-view', plugin, 'span.internal-link');
            plugin.registerViewType('BC-ducks', plugin, '.internal-link');
            plugin.registerViewType('bc-tree-view', plugin, 'span.internal-link');
            // Breadcrumbs codeblock support as suggested by https://github.com/mdelobelle/obsidian_supercharged_links/issues/248#issuecomment-3231706063
            plugin.registerViewType('markdown', plugin, '.BC-page-views span.internal-link, .BC-codeblock-tree span.internal-link, .nodes a.internal-link');
        }
        plugin.registerViewType('graph-analysis', plugin, '.internal-link');
        plugin.registerViewType('starred', plugin, '.nav-file-title-content');
        plugin.registerViewType('file-explorer', plugin, '.nav-file-title-content');
        if ((_f = (_e = (_d = plugin.app) === null || _d === void 0 ? void 0 : _d.plugins) === null || _e === void 0 ? void 0 : _e.plugins) === null || _f === void 0 ? void 0 : _f['folder-notes']) {
            // console.log('Supercharged links: Enabling folder notes support');
            plugin.registerViewType('file-explorer', plugin, '.has-folder-note .tree-item-inner');
        }
        plugin.registerViewType('recent-files', plugin, '.nav-file-title-content');
        plugin.registerViewType('bookmarks', plugin, '.tree-item-inner', false, true);
        // @ts-ignore
        if (((_k = (_j = (_h = (_g = plugin.app) === null || _g === void 0 ? void 0 : _g.internalPlugins) === null || _h === void 0 ? void 0 : _h.plugins) === null || _j === void 0 ? void 0 : _j.bases) === null || _k === void 0 ? void 0 : _k.enabled) && plugin.settings.enableBases) {
            // console.log('Supercharged links: Enabling bases support');
            plugin.registerViewType('bases', plugin, '.internal-link');
            // For embedded bases
            plugin.registerViewType('markdown', plugin, 'div.bases-table-cell  .internal-link');
        }
        if ((_o = (_m = (_l = plugin.app) === null || _l === void 0 ? void 0 : _l.plugins) === null || _m === void 0 ? void 0 : _m.plugins) === null || _o === void 0 ? void 0 : _o['similar-notes']) {
            plugin.registerViewType('markdown', plugin, '.similar-notes-pane .tree-item-inner', true);
        }
        // If backlinks in editor is on
        // @ts-ignore
        if (((_s = (_r = (_q = (_p = plugin.app) === null || _p === void 0 ? void 0 : _p.internalPlugins) === null || _q === void 0 ? void 0 : _q.plugins) === null || _r === void 0 ? void 0 : _r.backlink) === null || _s === void 0 ? void 0 : _s.enabled) && ((_y = (_x = (_w = (_v = (_u = (_t = plugin.app) === null || _t === void 0 ? void 0 : _t.internalPlugins) === null || _u === void 0 ? void 0 : _u.plugins) === null || _v === void 0 ? void 0 : _v.backlink) === null || _w === void 0 ? void 0 : _w.instance) === null || _x === void 0 ? void 0 : _x.options) === null || _y === void 0 ? void 0 : _y.backlinkInDocument)) {
            // console.log("Supercharged links: Enabling backlinks in document support");
            plugin.registerViewType('markdown', plugin, '.embedded-backlinks .tree-item-inner', true);
        }
        const propertyLeaves = this.app.workspace.getLeavesOfType("file-properties");
        for (let i = 0; i < propertyLeaves.length; i++) {
            const container = propertyLeaves[i].view.containerEl;
            let observer = new MutationObserver((records, _) => {
                const file = this.app.workspace.getActiveFile();
                if (!!file) {
                    updatePropertiesPane(container, this.app.workspace.getActiveFile(), this.app, plugin);
                }
            });
            observer.observe(container, { subtree: true, childList: true, attributes: false });
            plugin.observers.push([observer, "file-properties" + i, ""]);
            // TODO: No proper unloading!
        }
        plugin.registerViewType('file-properties', plugin, 'div.internal-link > .multi-select-pill-content');
    }
    initModalObservers(plugin, doc) {
        const config = {
            subtree: false,
            childList: true,
            attributes: false
        };
        this.modalObservers.push(new MutationObserver(records => {
            records.forEach((mutation) => {
                if (mutation.type === 'childList') {
                    mutation.addedNodes.forEach(n => {
                        if ('className' in n &&
                            // @ts-ignore
                            (n.className.includes('modal-container') && plugin.settings.enableQuickSwitcher
                                // @ts-ignore
                                || n.className.includes('suggestion-container') && plugin.settings.enableSuggestor)) {
                            let selector = ".suggestion-title, .suggestion-note, .another-quick-switcher__item__title, .omnisearch-result__title > span";
                            // @ts-ignore
                            if (n.className.includes('suggestion-container')) {
                                selector = ".suggestion-title, .suggestion-note";
                            }
                            plugin.updateContainer(n, plugin, selector);
                            plugin._watchContainer(null, n, plugin, selector);
                        }
                    });
                }
            });
        }));
        this.modalObservers.last().observe(doc.body, config);
    }
    registerViewType(viewTypeName, plugin, selector, updateDynamic = false, filter_collapsible = false) {
        const leaves = this.app.workspace.getLeavesOfType(viewTypeName);
        // if (leaves.length > 1) {
        for (let i = 0; i < leaves.length; i++) {
            const container = leaves[i].view.containerEl;
            if (updateDynamic) {
                plugin._watchContainerDynamic(viewTypeName + i, container, plugin, selector);
            }
            else {
                plugin._watchContainer(viewTypeName + i, container, plugin, selector, filter_collapsible);
            }
        }
        // }
        // else if (leaves.length < 1) return;
        // else {
        // 	const container = leaves[0].view.containerEl;
        // 	this.updateContainer(container, plugin, selector);
        // 	if (updateDynamic) {
        // 		plugin._watchContainerDynamic(viewTypeName, container, plugin, selector)
        // 	}
        // 	else {
        // 		plugin._watchContainer(viewTypeName, container, plugin, selector);
        // 	}
        // }
    }
    updateContainer(container, plugin, selector, filter_collapsible = false) {
        if (!plugin.settings.enableBacklinks && container.getAttribute("data-type") !== "file-explorer")
            return;
        if (!plugin.settings.enableFileList && container.getAttribute("data-type") === "file-explorer")
            return;
        const nodes = container.findAll(selector);
        for (let i = 0; i < nodes.length; ++i) {
            const el = nodes[i];
            updateDivExtraAttributes(plugin.app, plugin.settings, el, "", undefined, filter_collapsible);
        }
    }
    removeFromContainer(container, selector) {
        const nodes = container.findAll(selector);
        for (let i = 0; i < nodes.length; ++i) {
            const el = nodes[i];
            clearExtraAttributes(el);
        }
    }
    _watchContainer(viewType, container, plugin, selector, filter_collapsible = false) {
        let observer = new MutationObserver((records, _) => {
            plugin.updateContainer(container, plugin, selector, filter_collapsible);
        });
        observer.observe(container, { subtree: true, childList: true, attributes: false });
        if (viewType) {
            plugin.observers.push([observer, viewType, selector]);
        }
    }
    _watchContainerDynamic(viewType, container, plugin, selector, parent_class = 'tree-item') {
        // Used for efficient updating of the backlinks panel
        // Only loops through newly added DOM nodes instead of changing all of them
        if (!plugin.settings.enableBacklinks)
            return;
        let observer = new MutationObserver((records, _) => {
            records.forEach((mutation) => {
                if (mutation.type === 'childList') {
                    mutation.addedNodes.forEach((n) => {
                        if ('className' in n) {
                            // @ts-ignore
                            if (n.className.includes && typeof n.className.includes === 'function' && n.className.includes(parent_class)) {
                                const fileDivs = n.findAll(selector);
                                for (let i = 0; i < fileDivs.length; ++i) {
                                    const link = fileDivs[i];
                                    updateDivExtraAttributes(plugin.app, plugin.settings, link, "");
                                }
                            }
                        }
                    });
                }
            });
        });
        observer.observe(container, { subtree: true, childList: true, attributes: false });
        plugin.observers.push([observer, viewType, selector]);
    }
    onunload() {
        this.observers.forEach(([observer, type, own_class]) => {
            observer.disconnect();
            const leaves = this.app.workspace.getLeavesOfType(type);
            leaves.forEach(leaf => {
                this.removeFromContainer(leaf.view.containerEl, own_class);
            });
        });
        for (const observer of this.modalObservers) {
            observer.disconnect();
        }
        console.log('Supercharged links unloaded');
    }
    loadSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
        });
    }
    saveSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.saveData(this.settings);
        });
    }
}

module.exports = SuperchargedLinks;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsibm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsInNyYy9jc3NCdWlsZGVyL2Nzc0xpbmsudHMiLCJzcmMvbGlua0F0dHJpYnV0ZXMvbGlua0F0dHJpYnV0ZXMudHMiLCJzcmMvY3NzQnVpbGRlci9jc3NCdWlsZGVyTW9kYWwudHMiLCJzcmMvY3NzQnVpbGRlci9jc3NCdWlsZGVyLnRzIiwic3JjL3NldHRpbmdzL1N1cGVyY2hhcmdlZExpbmtzU2V0dGluZ1RhYi50cyIsInNyYy9zZXR0aW5ncy9TdXBlcmNoYXJnZWRMaW5rc1NldHRpbmdzLnRzIiwic3JjL2xpbmtBdHRyaWJ1dGVzL2xpdmVQcmV2aWV3LnRzIiwibWFpbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UsIFN1cHByZXNzZWRFcnJvciwgU3ltYm9sLCBJdGVyYXRvciAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xyXG4gICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxyXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICAgICAgfVxyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19lc0RlY29yYXRlKGN0b3IsIGRlc2NyaXB0b3JJbiwgZGVjb3JhdG9ycywgY29udGV4dEluLCBpbml0aWFsaXplcnMsIGV4dHJhSW5pdGlhbGl6ZXJzKSB7XHJcbiAgICBmdW5jdGlvbiBhY2NlcHQoZikgeyBpZiAoZiAhPT0gdm9pZCAwICYmIHR5cGVvZiBmICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJGdW5jdGlvbiBleHBlY3RlZFwiKTsgcmV0dXJuIGY7IH1cclxuICAgIHZhciBraW5kID0gY29udGV4dEluLmtpbmQsIGtleSA9IGtpbmQgPT09IFwiZ2V0dGVyXCIgPyBcImdldFwiIDoga2luZCA9PT0gXCJzZXR0ZXJcIiA/IFwic2V0XCIgOiBcInZhbHVlXCI7XHJcbiAgICB2YXIgdGFyZ2V0ID0gIWRlc2NyaXB0b3JJbiAmJiBjdG9yID8gY29udGV4dEluW1wic3RhdGljXCJdID8gY3RvciA6IGN0b3IucHJvdG90eXBlIDogbnVsbDtcclxuICAgIHZhciBkZXNjcmlwdG9yID0gZGVzY3JpcHRvckluIHx8ICh0YXJnZXQgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwgY29udGV4dEluLm5hbWUpIDoge30pO1xyXG4gICAgdmFyIF8sIGRvbmUgPSBmYWxzZTtcclxuICAgIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgdmFyIGNvbnRleHQgPSB7fTtcclxuICAgICAgICBmb3IgKHZhciBwIGluIGNvbnRleHRJbikgY29udGV4dFtwXSA9IHAgPT09IFwiYWNjZXNzXCIgPyB7fSA6IGNvbnRleHRJbltwXTtcclxuICAgICAgICBmb3IgKHZhciBwIGluIGNvbnRleHRJbi5hY2Nlc3MpIGNvbnRleHQuYWNjZXNzW3BdID0gY29udGV4dEluLmFjY2Vzc1twXTtcclxuICAgICAgICBjb250ZXh0LmFkZEluaXRpYWxpemVyID0gZnVuY3Rpb24gKGYpIHsgaWYgKGRvbmUpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgYWRkIGluaXRpYWxpemVycyBhZnRlciBkZWNvcmF0aW9uIGhhcyBjb21wbGV0ZWRcIik7IGV4dHJhSW5pdGlhbGl6ZXJzLnB1c2goYWNjZXB0KGYgfHwgbnVsbCkpOyB9O1xyXG4gICAgICAgIHZhciByZXN1bHQgPSAoMCwgZGVjb3JhdG9yc1tpXSkoa2luZCA9PT0gXCJhY2Nlc3NvclwiID8geyBnZXQ6IGRlc2NyaXB0b3IuZ2V0LCBzZXQ6IGRlc2NyaXB0b3Iuc2V0IH0gOiBkZXNjcmlwdG9yW2tleV0sIGNvbnRleHQpO1xyXG4gICAgICAgIGlmIChraW5kID09PSBcImFjY2Vzc29yXCIpIHtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSBjb250aW51ZTtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gbnVsbCB8fCB0eXBlb2YgcmVzdWx0ICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiT2JqZWN0IGV4cGVjdGVkXCIpO1xyXG4gICAgICAgICAgICBpZiAoXyA9IGFjY2VwdChyZXN1bHQuZ2V0KSkgZGVzY3JpcHRvci5nZXQgPSBfO1xyXG4gICAgICAgICAgICBpZiAoXyA9IGFjY2VwdChyZXN1bHQuc2V0KSkgZGVzY3JpcHRvci5zZXQgPSBfO1xyXG4gICAgICAgICAgICBpZiAoXyA9IGFjY2VwdChyZXN1bHQuaW5pdCkpIGluaXRpYWxpemVycy51bnNoaWZ0KF8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChfID0gYWNjZXB0KHJlc3VsdCkpIHtcclxuICAgICAgICAgICAgaWYgKGtpbmQgPT09IFwiZmllbGRcIikgaW5pdGlhbGl6ZXJzLnVuc2hpZnQoXyk7XHJcbiAgICAgICAgICAgIGVsc2UgZGVzY3JpcHRvcltrZXldID0gXztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAodGFyZ2V0KSBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBjb250ZXh0SW4ubmFtZSwgZGVzY3JpcHRvcik7XHJcbiAgICBkb25lID0gdHJ1ZTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3J1bkluaXRpYWxpemVycyh0aGlzQXJnLCBpbml0aWFsaXplcnMsIHZhbHVlKSB7XHJcbiAgICB2YXIgdXNlVmFsdWUgPSBhcmd1bWVudHMubGVuZ3RoID4gMjtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5pdGlhbGl6ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFsdWUgPSB1c2VWYWx1ZSA/IGluaXRpYWxpemVyc1tpXS5jYWxsKHRoaXNBcmcsIHZhbHVlKSA6IGluaXRpYWxpemVyc1tpXS5jYWxsKHRoaXNBcmcpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHVzZVZhbHVlID8gdmFsdWUgOiB2b2lkIDA7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wcm9wS2V5KHgpIHtcclxuICAgIHJldHVybiB0eXBlb2YgeCA9PT0gXCJzeW1ib2xcIiA/IHggOiBcIlwiLmNvbmNhdCh4KTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NldEZ1bmN0aW9uTmFtZShmLCBuYW1lLCBwcmVmaXgpIHtcclxuICAgIGlmICh0eXBlb2YgbmFtZSA9PT0gXCJzeW1ib2xcIikgbmFtZSA9IG5hbWUuZGVzY3JpcHRpb24gPyBcIltcIi5jb25jYXQobmFtZS5kZXNjcmlwdGlvbiwgXCJdXCIpIDogXCJcIjtcclxuICAgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZiwgXCJuYW1lXCIsIHsgY29uZmlndXJhYmxlOiB0cnVlLCB2YWx1ZTogcHJlZml4ID8gXCJcIi5jb25jYXQocHJlZml4LCBcIiBcIiwgbmFtZSkgOiBuYW1lIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZyA9IE9iamVjdC5jcmVhdGUoKHR5cGVvZiBJdGVyYXRvciA9PT0gXCJmdW5jdGlvblwiID8gSXRlcmF0b3IgOiBPYmplY3QpLnByb3RvdHlwZSk7XHJcbiAgICByZXR1cm4gZy5uZXh0ID0gdmVyYigwKSwgZ1tcInRocm93XCJdID0gdmVyYigxKSwgZ1tcInJldHVyblwiXSA9IHZlcmIoMiksIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoZyAmJiAoZyA9IDAsIG9wWzBdICYmIChfID0gMCkpLCBfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19jcmVhdGVCaW5kaW5nID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcclxuICAgIGlmICghZGVzYyB8fCAoXCJnZXRcIiBpbiBkZXNjID8gIW0uX19lc01vZHVsZSA6IGRlc2Mud3JpdGFibGUgfHwgZGVzYy5jb25maWd1cmFibGUpKSB7XHJcbiAgICAgICAgZGVzYyA9IHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgZGVzYyk7XHJcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgb1trMl0gPSBtW2tdO1xyXG59KTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgbykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLCBwKSkgX19jcmVhdGVCaW5kaW5nKG8sIG0sIHApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyBcIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCIgOiBcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG4vKiogQGRlcHJlY2F0ZWQgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG4vKiogQGRlcHJlY2F0ZWQgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5KHRvLCBmcm9tLCBwYWNrKSB7XHJcbiAgICBpZiAocGFjayB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciBpID0gMCwgbCA9IGZyb20ubGVuZ3RoLCBhcjsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgIGlmIChhciB8fCAhKGkgaW4gZnJvbSkpIHtcclxuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcclxuICAgICAgICAgICAgYXJbaV0gPSBmcm9tW2ldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0by5jb25jYXQoYXIgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSkpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0gT2JqZWN0LmNyZWF0ZSgodHlwZW9mIEFzeW5jSXRlcmF0b3IgPT09IFwiZnVuY3Rpb25cIiA/IEFzeW5jSXRlcmF0b3IgOiBPYmplY3QpLnByb3RvdHlwZSksIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiwgYXdhaXRSZXR1cm4pLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiBhd2FpdFJldHVybihmKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZiwgcmVqZWN0KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlmIChnW25dKSB7IGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IGlmIChmKSBpW25dID0gZihpW25dKTsgfSB9XHJcbiAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cclxuICAgIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHJlamVjdCh2YWx1ZSkgeyByZXN1bWUoXCJ0aHJvd1wiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3Iobykge1xyXG4gICAgdmFyIGksIHA7XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIsIGZ1bmN0aW9uIChlKSB7IHRocm93IGU7IH0pLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogZmFsc2UgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XHJcbn0pIDogZnVuY3Rpb24obywgdikge1xyXG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xyXG59O1xyXG5cclxudmFyIG93bktleXMgPSBmdW5jdGlvbihvKSB7XHJcbiAgICBvd25LZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMgfHwgZnVuY3Rpb24gKG8pIHtcclxuICAgICAgICB2YXIgYXIgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBrIGluIG8pIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobywgaykpIGFyW2FyLmxlbmd0aF0gPSBrO1xyXG4gICAgICAgIHJldHVybiBhcjtcclxuICAgIH07XHJcbiAgICByZXR1cm4gb3duS2V5cyhvKTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrID0gb3duS2V5cyhtb2QpLCBpID0gMDsgaSA8IGsubGVuZ3RoOyBpKyspIGlmIChrW2ldICE9PSBcImRlZmF1bHRcIikgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrW2ldKTtcclxuICAgIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRHZXQocmVjZWl2ZXIsIHN0YXRlLCBraW5kLCBmKSB7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBnZXR0ZXJcIik7XHJcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCByZWFkIHByaXZhdGUgbWVtYmVyIGZyb20gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcclxuICAgIHJldHVybiBraW5kID09PSBcIm1cIiA/IGYgOiBraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlcikgOiBmID8gZi52YWx1ZSA6IHN0YXRlLmdldChyZWNlaXZlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHJlY2VpdmVyLCBzdGF0ZSwgdmFsdWUsIGtpbmQsIGYpIHtcclxuICAgIGlmIChraW5kID09PSBcIm1cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgbWV0aG9kIGlzIG5vdCB3cml0YWJsZVwiKTtcclxuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIHNldHRlclwiKTtcclxuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHdyaXRlIHByaXZhdGUgbWVtYmVyIHRvIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4gKGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyLCB2YWx1ZSkgOiBmID8gZi52YWx1ZSA9IHZhbHVlIDogc3RhdGUuc2V0KHJlY2VpdmVyLCB2YWx1ZSkpLCB2YWx1ZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRJbihzdGF0ZSwgcmVjZWl2ZXIpIHtcclxuICAgIGlmIChyZWNlaXZlciA9PT0gbnVsbCB8fCAodHlwZW9mIHJlY2VpdmVyICE9PSBcIm9iamVjdFwiICYmIHR5cGVvZiByZWNlaXZlciAhPT0gXCJmdW5jdGlvblwiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB1c2UgJ2luJyBvcGVyYXRvciBvbiBub24tb2JqZWN0XCIpO1xyXG4gICAgcmV0dXJuIHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgPT09IHN0YXRlIDogc3RhdGUuaGFzKHJlY2VpdmVyKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYWRkRGlzcG9zYWJsZVJlc291cmNlKGVudiwgdmFsdWUsIGFzeW5jKSB7XHJcbiAgICBpZiAodmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHZvaWQgMCkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHZhbHVlICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJPYmplY3QgZXhwZWN0ZWQuXCIpO1xyXG4gICAgICAgIHZhciBkaXNwb3NlLCBpbm5lcjtcclxuICAgICAgICBpZiAoYXN5bmMpIHtcclxuICAgICAgICAgICAgaWYgKCFTeW1ib2wuYXN5bmNEaXNwb3NlKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jRGlzcG9zZSBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICAgICAgICAgIGRpc3Bvc2UgPSB2YWx1ZVtTeW1ib2wuYXN5bmNEaXNwb3NlXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRpc3Bvc2UgPT09IHZvaWQgMCkge1xyXG4gICAgICAgICAgICBpZiAoIVN5bWJvbC5kaXNwb3NlKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmRpc3Bvc2UgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgICAgICAgICBkaXNwb3NlID0gdmFsdWVbU3ltYm9sLmRpc3Bvc2VdO1xyXG4gICAgICAgICAgICBpZiAoYXN5bmMpIGlubmVyID0gZGlzcG9zZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGVvZiBkaXNwb3NlICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJPYmplY3Qgbm90IGRpc3Bvc2FibGUuXCIpO1xyXG4gICAgICAgIGlmIChpbm5lcikgZGlzcG9zZSA9IGZ1bmN0aW9uKCkgeyB0cnkgeyBpbm5lci5jYWxsKHRoaXMpOyB9IGNhdGNoIChlKSB7IHJldHVybiBQcm9taXNlLnJlamVjdChlKTsgfSB9O1xyXG4gICAgICAgIGVudi5zdGFjay5wdXNoKHsgdmFsdWU6IHZhbHVlLCBkaXNwb3NlOiBkaXNwb3NlLCBhc3luYzogYXN5bmMgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChhc3luYykge1xyXG4gICAgICAgIGVudi5zdGFjay5wdXNoKHsgYXN5bmM6IHRydWUgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcblxyXG59XHJcblxyXG52YXIgX1N1cHByZXNzZWRFcnJvciA9IHR5cGVvZiBTdXBwcmVzc2VkRXJyb3IgPT09IFwiZnVuY3Rpb25cIiA/IFN1cHByZXNzZWRFcnJvciA6IGZ1bmN0aW9uIChlcnJvciwgc3VwcHJlc3NlZCwgbWVzc2FnZSkge1xyXG4gICAgdmFyIGUgPSBuZXcgRXJyb3IobWVzc2FnZSk7XHJcbiAgICByZXR1cm4gZS5uYW1lID0gXCJTdXBwcmVzc2VkRXJyb3JcIiwgZS5lcnJvciA9IGVycm9yLCBlLnN1cHByZXNzZWQgPSBzdXBwcmVzc2VkLCBlO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGlzcG9zZVJlc291cmNlcyhlbnYpIHtcclxuICAgIGZ1bmN0aW9uIGZhaWwoZSkge1xyXG4gICAgICAgIGVudi5lcnJvciA9IGVudi5oYXNFcnJvciA/IG5ldyBfU3VwcHJlc3NlZEVycm9yKGUsIGVudi5lcnJvciwgXCJBbiBlcnJvciB3YXMgc3VwcHJlc3NlZCBkdXJpbmcgZGlzcG9zYWwuXCIpIDogZTtcclxuICAgICAgICBlbnYuaGFzRXJyb3IgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgdmFyIHIsIHMgPSAwO1xyXG4gICAgZnVuY3Rpb24gbmV4dCgpIHtcclxuICAgICAgICB3aGlsZSAociA9IGVudi5zdGFjay5wb3AoKSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFyLmFzeW5jICYmIHMgPT09IDEpIHJldHVybiBzID0gMCwgZW52LnN0YWNrLnB1c2gociksIFByb21pc2UucmVzb2x2ZSgpLnRoZW4obmV4dCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoci5kaXNwb3NlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHIuZGlzcG9zZS5jYWxsKHIudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyLmFzeW5jKSByZXR1cm4gcyB8PSAyLCBQcm9taXNlLnJlc29sdmUocmVzdWx0KS50aGVuKG5leHQsIGZ1bmN0aW9uKGUpIHsgZmFpbChlKTsgcmV0dXJuIG5leHQoKTsgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHMgfD0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgZmFpbChlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocyA9PT0gMSkgcmV0dXJuIGVudi5oYXNFcnJvciA/IFByb21pc2UucmVqZWN0KGVudi5lcnJvcikgOiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICBpZiAoZW52Lmhhc0Vycm9yKSB0aHJvdyBlbnYuZXJyb3I7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV4dCgpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXdyaXRlUmVsYXRpdmVJbXBvcnRFeHRlbnNpb24ocGF0aCwgcHJlc2VydmVKc3gpIHtcclxuICAgIGlmICh0eXBlb2YgcGF0aCA9PT0gXCJzdHJpbmdcIiAmJiAvXlxcLlxcLj9cXC8vLnRlc3QocGF0aCkpIHtcclxuICAgICAgICByZXR1cm4gcGF0aC5yZXBsYWNlKC9cXC4odHN4KSR8KCg/OlxcLmQpPykoKD86XFwuW14uL10rPyk/KVxcLihbY21dPyl0cyQvaSwgZnVuY3Rpb24gKG0sIHRzeCwgZCwgZXh0LCBjbSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHN4ID8gcHJlc2VydmVKc3ggPyBcIi5qc3hcIiA6IFwiLmpzXCIgOiBkICYmICghZXh0IHx8ICFjbSkgPyBtIDogKGQgKyBleHQgKyBcIi5cIiArIGNtLnRvTG93ZXJDYXNlKCkgKyBcImpzXCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBhdGg7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICAgIF9fZXh0ZW5kczogX19leHRlbmRzLFxyXG4gICAgX19hc3NpZ246IF9fYXNzaWduLFxyXG4gICAgX19yZXN0OiBfX3Jlc3QsXHJcbiAgICBfX2RlY29yYXRlOiBfX2RlY29yYXRlLFxyXG4gICAgX19wYXJhbTogX19wYXJhbSxcclxuICAgIF9fZXNEZWNvcmF0ZTogX19lc0RlY29yYXRlLFxyXG4gICAgX19ydW5Jbml0aWFsaXplcnM6IF9fcnVuSW5pdGlhbGl6ZXJzLFxyXG4gICAgX19wcm9wS2V5OiBfX3Byb3BLZXksXHJcbiAgICBfX3NldEZ1bmN0aW9uTmFtZTogX19zZXRGdW5jdGlvbk5hbWUsXHJcbiAgICBfX21ldGFkYXRhOiBfX21ldGFkYXRhLFxyXG4gICAgX19hd2FpdGVyOiBfX2F3YWl0ZXIsXHJcbiAgICBfX2dlbmVyYXRvcjogX19nZW5lcmF0b3IsXHJcbiAgICBfX2NyZWF0ZUJpbmRpbmc6IF9fY3JlYXRlQmluZGluZyxcclxuICAgIF9fZXhwb3J0U3RhcjogX19leHBvcnRTdGFyLFxyXG4gICAgX192YWx1ZXM6IF9fdmFsdWVzLFxyXG4gICAgX19yZWFkOiBfX3JlYWQsXHJcbiAgICBfX3NwcmVhZDogX19zcHJlYWQsXHJcbiAgICBfX3NwcmVhZEFycmF5czogX19zcHJlYWRBcnJheXMsXHJcbiAgICBfX3NwcmVhZEFycmF5OiBfX3NwcmVhZEFycmF5LFxyXG4gICAgX19hd2FpdDogX19hd2FpdCxcclxuICAgIF9fYXN5bmNHZW5lcmF0b3I6IF9fYXN5bmNHZW5lcmF0b3IsXHJcbiAgICBfX2FzeW5jRGVsZWdhdG9yOiBfX2FzeW5jRGVsZWdhdG9yLFxyXG4gICAgX19hc3luY1ZhbHVlczogX19hc3luY1ZhbHVlcyxcclxuICAgIF9fbWFrZVRlbXBsYXRlT2JqZWN0OiBfX21ha2VUZW1wbGF0ZU9iamVjdCxcclxuICAgIF9faW1wb3J0U3RhcjogX19pbXBvcnRTdGFyLFxyXG4gICAgX19pbXBvcnREZWZhdWx0OiBfX2ltcG9ydERlZmF1bHQsXHJcbiAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0OiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0LFxyXG4gICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldDogX19jbGFzc1ByaXZhdGVGaWVsZFNldCxcclxuICAgIF9fY2xhc3NQcml2YXRlRmllbGRJbjogX19jbGFzc1ByaXZhdGVGaWVsZEluLFxyXG4gICAgX19hZGREaXNwb3NhYmxlUmVzb3VyY2U6IF9fYWRkRGlzcG9zYWJsZVJlc291cmNlLFxyXG4gICAgX19kaXNwb3NlUmVzb3VyY2VzOiBfX2Rpc3Bvc2VSZXNvdXJjZXMsXHJcbiAgICBfX3Jld3JpdGVSZWxhdGl2ZUltcG9ydEV4dGVuc2lvbjogX19yZXdyaXRlUmVsYXRpdmVJbXBvcnRFeHRlbnNpb24sXHJcbn07XHJcbiIsImV4cG9ydCB0eXBlIE1hdGNoVHlwZXMgPSAnZXhhY3QnIHwgJ2NvbnRhaW5zJyB8ICdzdGFydHN3aXRoJyB8ICdlbmRzd2l0aCcgfCAnd2hpdGVTcGFjZSc7XG5leHBvcnQgdHlwZSBTZWxlY3RvclR5cGVzID0gJ2F0dHJpYnV0ZScgfCAndGFnJyB8ICdwYXRoJztcbmludGVyZmFjZSBDU1NMaW5rIHtcbiAgICB0eXBlOiBTZWxlY3RvclR5cGVzXG4gICAgbmFtZTogc3RyaW5nXG4gICAgdmFsdWU6IHN0cmluZ1xuICAgIG1hdGNoQ2FzZVNlbnNpdGl2ZTogYm9vbGVhblxuICAgIG1hdGNoOiBNYXRjaFR5cGVzXG4gICAgdWlkOiBzdHJpbmdcbiAgICBzZWxlY3RUZXh0OiBib29sZWFuXG4gICAgc2VsZWN0QmFja2dyb3VuZDogYm9vbGVhblxuICAgIHNlbGVjdEFwcGVuZDogYm9vbGVhblxuICAgIHNlbGVjdFByZXBlbmQ6IGJvb2xlYW5cbn1cblxuY29uc3QgbWF0Y2hUeXBlczogUmVjb3JkPE1hdGNoVHlwZXMsIHN0cmluZz4gPSB7XG4gICAgJ2V4YWN0JzogXCJFeGFjdCBtYXRjaFwiLFxuICAgICdjb250YWlucyc6IFwiQ29udGFpbnMgdmFsdWVcIixcbiAgICAnd2hpdGVTcGFjZSc6IFwiVmFsdWUgd2l0aGluIHdoaXRlc3BhY2Ugc2VwYXJhdGVkIHdvcmRzXCIsXG4gICAgJ3N0YXJ0c3dpdGgnOiBcIlN0YXJ0cyB3aXRoIHRoaXMgdmFsdWVcIixcbiAgICAnZW5kc3dpdGgnOiBcIkVuZHMgd2l0aCB0aGlzIHZhbHVlXCJcbn1cblxuZXhwb3J0IGNvbnN0IG1hdGNoU2lnbjogUmVjb3JkPE1hdGNoVHlwZXMsIHN0cmluZz4gPSB7XG4gICAgJ2V4YWN0JzogXCJcIixcbiAgICAnY29udGFpbnMnOiBcIipcIixcbiAgICAnc3RhcnRzd2l0aCc6IFwiXlwiLFxuICAgICdlbmRzd2l0aCc6IFwiJFwiLFxuICAgICd3aGl0ZVNwYWNlJzogXCJ+XCJcbn1cblxuZXhwb3J0IGNvbnN0IG1hdGNoUHJldmlldzogUmVjb3JkPE1hdGNoVHlwZXMsIHN0cmluZz4gPSB7XG4gICAgJ2V4YWN0JzogXCJ3aXRoIHZhbHVlXCIsXG4gICAgJ2NvbnRhaW5zJzogXCJjb250YWluaW5nXCIsXG4gICAgJ3doaXRlU3BhY2UnOiBcImNvbnRhaW5pbmdcIixcbiAgICAnc3RhcnRzd2l0aCc6IFwic3RhcnRpbmcgd2l0aFwiLFxuICAgICdlbmRzd2l0aCc6IFwiZW5kaW5nIHdpdGhcIlxufVxuXG5leHBvcnQgY29uc3QgbWF0Y2hQcmV2aWV3UGF0aDogUmVjb3JkPE1hdGNoVHlwZXMsIHN0cmluZz4gPSB7XG4gICAgJ2V4YWN0JzogXCJpc1wiLFxuICAgICdjb250YWlucyc6IFwiY29udGFpbnNcIixcbiAgICAnd2hpdGVTcGFjZSc6IFwiY29udGFpbnNcIixcbiAgICAnc3RhcnRzd2l0aCc6IFwic3RhcnRzIHdpdGhcIixcbiAgICAnZW5kc3dpdGgnOiBcImVuZHMgd2l0aFwiXG59XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RvclR5cGU6IFJlY29yZDxTZWxlY3RvclR5cGVzLCBzdHJpbmc+ID0ge1xuICAgICdhdHRyaWJ1dGUnOiAnQXR0cmlidXRlIHZhbHVlJyxcbiAgICAndGFnJzogJ1RhZycsXG4gICAgJ3BhdGgnOiAnTm90ZSBwYXRoJ1xufVxuXG5jbGFzcyBDU1NMaW5rIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy50eXBlID0gJ2F0dHJpYnV0ZSc7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiXCI7XG4gICAgICAgIHRoaXMudmFsdWUgPSBcIlwiO1xuICAgICAgICB0aGlzLm1hdGNoQ2FzZVNlbnNpdGl2ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLm1hdGNoID0gXCJleGFjdFwiO1xuICAgICAgICBsZXQgczQgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcigoMSArIE1hdGgucmFuZG9tKCkpICogMHgxMDAwMClcbiAgICAgICAgICAgICAgICAudG9TdHJpbmcoMTYpXG4gICAgICAgICAgICAgICAgLnN1YnN0cmluZygxKTtcbiAgICAgICAgfVxuICAgICAgICAvL3JldHVybiBpZCBvZiBmb3JtYXQgJ2FhYWFhYWFhJy0nYWFhYSctJ2FhYWEnLSdhYWFhJy0nYWFhYWFhYWFhYWFhJ1xuICAgICAgICB0aGlzLnVpZCA9IHM0KCkgKyBcIi1cIiArIHM0KCk7XG4gICAgICAgIHRoaXMuc2VsZWN0VGV4dCA9IHRydWU7XG4gICAgICAgIHRoaXMuc2VsZWN0QXBwZW5kID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zZWxlY3RQcmVwZW5kID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zZWxlY3RCYWNrZ3JvdW5kID0gdHJ1ZTtcbiAgICB9XG59XG5cbmV4cG9ydCB7IG1hdGNoVHlwZXMsIENTU0xpbmsgfSIsImltcG9ydCB7IEFwcCwgZ2V0QWxsVGFncywgZ2V0TGlua3BhdGgsIExpbmtDYWNoZSwgTWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dCwgTWFya2Rvd25WaWV3LCBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiXG5pbXBvcnQgeyBTdXBlcmNoYXJnZWRMaW5rc1NldHRpbmdzIH0gZnJvbSBcInNyYy9zZXR0aW5ncy9TdXBlcmNoYXJnZWRMaW5rc1NldHRpbmdzXCJcbmltcG9ydCBTdXBlcmNoYXJnZWRMaW5rcyBmcm9tIFwiLi4vLi4vbWFpblwiO1xuXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJFeHRyYUF0dHJpYnV0ZXMobGluazogSFRNTEVsZW1lbnQpIHtcbiAgICBPYmplY3QudmFsdWVzKGxpbmsuYXR0cmlidXRlcykuZm9yRWFjaChhdHRyID0+IHtcbiAgICAgICAgaWYgKGF0dHIubmFtZS5pbmNsdWRlcyhcImRhdGEtbGlua1wiKSkge1xuICAgICAgICAgICAgbGluay5yZW1vdmVBdHRyaWJ1dGUoYXR0ci5uYW1lKVxuICAgICAgICB9XG4gICAgfSlcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gZmV0Y2hUYXJnZXRBdHRyaWJ1dGVzU3luYyhhcHA6IEFwcCwgc2V0dGluZ3M6IFN1cGVyY2hhcmdlZExpbmtzU2V0dGluZ3MsIGRlc3Q6IFRGaWxlLCBhZGREYXRhSHJlZjogYm9vbGVhbik6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4ge1xuICAgIGxldCBuZXdfcHJvcHM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7IHRhZ3M6IFwiXCIgfVxuICAgIGNvbnN0IGNhY2hlID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGRlc3QpXG4gICAgaWYgKCFjYWNoZSkgcmV0dXJuIG5ld19wcm9wcztcblxuICAgIGNvbnN0IGZyb250bWF0dGVyID0gY2FjaGUuZnJvbnRtYXR0ZXJcblxuICAgIGlmIChmcm9udG1hdHRlcikge1xuICAgICAgICBzZXR0aW5ncy50YXJnZXRBdHRyaWJ1dGVzLmZvckVhY2goYXR0cmlidXRlID0+IHtcbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhmcm9udG1hdHRlcikuaW5jbHVkZXMoYXR0cmlidXRlKSkge1xuICAgICAgICAgICAgICAgIGlmIChhdHRyaWJ1dGUgPT09ICd0YWcnIHx8IGF0dHJpYnV0ZSA9PT0gJ3RhZ3MnKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld19wcm9wc1sndGFncyddICs9IGZyb250bWF0dGVyW2F0dHJpYnV0ZV07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3X3Byb3BzW2F0dHJpYnV0ZV0gPSBmcm9udG1hdHRlclthdHRyaWJ1dGVdXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGlmIChzZXR0aW5ncy50YXJnZXRUYWdzKSB7XG4gICAgICAgIG5ld19wcm9wc1tcInRhZ3NcIl0gKz0gZ2V0QWxsVGFncyhjYWNoZSkuam9pbignICcpO1xuICAgIH1cblxuICAgIGlmIChhZGREYXRhSHJlZikge1xuICAgICAgICBuZXdfcHJvcHNbJ2RhdGEtaHJlZiddID0gZGVzdC5iYXNlbmFtZTtcbiAgICB9XG4gICAgbmV3X3Byb3BzWydwYXRoJ10gPSBkZXN0LnBhdGg7XG4gICAgLy9AdHMtaWdub3JlXG4gICAgY29uc3QgZ2V0UmVzdWx0cyA9IChhcGkpID0+IHtcbiAgICAgICAgY29uc3QgcGFnZSA9IGFwaS5wYWdlKGRlc3QucGF0aCk7XG4gICAgICAgIGlmICghcGFnZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNldHRpbmdzLnRhcmdldEF0dHJpYnV0ZXMuZm9yRWFjaCgoZmllbGQ6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBwYWdlW2ZpZWxkXTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSkgbmV3X3Byb3BzW2ZpZWxkXSA9IHZhbHVlO1xuICAgICAgICB9KVxuICAgIH07XG5cbiAgICBpZiAoc2V0dGluZ3MuZ2V0RnJvbUlubGluZUZpZWxkICYmIGFwcC5wbHVnaW5zLmVuYWJsZWRQbHVnaW5zLmhhcyhcImRhdGF2aWV3XCIpKSB7XG4gICAgICAgIGNvbnN0IGFwaSA9IGFwcC5wbHVnaW5zLnBsdWdpbnMuZGF0YXZpZXc/LmFwaTtcbiAgICAgICAgaWYgKGFwaSkge1xuICAgICAgICAgICAgZ2V0UmVzdWx0cyhhcGkpXG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhpcyBpcyBjcmFzaGluZyBmb3Igc29tZSBwZW9wbGUuIEkgdGhpbmsgaWdub3JpbmcgaXQgd2lsbCBiZSBvay4gXG4gICAgICAgIC8vIGVsc2VcbiAgICAgICAgLy8gICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgIC8vICAgICAgICAgYXBwLm1ldGFkYXRhQ2FjaGUub24oXCJkYXRhdmlldzphcGktcmVhZHlcIiwgKGFwaTogYW55KSA9PlxuICAgICAgICAvLyAgICAgICAgICAgICBnZXRSZXN1bHRzKGFwaSlcbiAgICAgICAgLy8gICAgICAgICApXG4gICAgICAgIC8vICAgICApO1xuICAgIH1cbiAgICAvLyBSZXBsYWNlIHNwYWNlcyB3aXRoIGh5cGhlbnMgaW4gdGhlIGtleXMgb2YgbmV3X3Byb3BzXG4gICAgY29uc3QgaHlwaGVuYXRlZF9wcm9wczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIG5ld19wcm9wcykge1xuICAgICAgICBjb25zdCBoeXBoZW5hdGVkS2V5ID0ga2V5LnJlcGxhY2UoLyAvZywgJy0nKTtcbiAgICAgICAgaHlwaGVuYXRlZF9wcm9wc1toeXBoZW5hdGVkS2V5XSA9IG5ld19wcm9wc1trZXldO1xuICAgIH1cbiAgICBuZXdfcHJvcHMgPSBoeXBoZW5hdGVkX3Byb3BzO1xuXG4gICAgcmV0dXJuIG5ld19wcm9wc1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcHJvY2Vzc0tleShrZXk6IHN0cmluZykge1xuICAgIC8vIFJlcGxhY2Ugc3BhY2VzIHdpdGggaHlwaGVucyAodjAuMTMuNCspXG4gICAgcmV0dXJuIGtleS5yZXBsYWNlKC8gL2csICctJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcm9jZXNzVmFsdWUoa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpIHtcbiAgICAvLyBUT0RPOiBUaGlzIGlzIGEgaGFjayBzcGVjaWZpY2FsbHkgZm9yIEVtaWxlJ3Mgc2V0dXAuIFNob3VsZCBiZSBjb21tZW50ZWQgaW4gcmVsZWFzZXMuXG4gICAgaWYgKGtleS5jb250YWlucyhcInB1Ymxpc2hlZEluXCIpICYmIHZhbHVlPy5sZW5ndGggJiYgdmFsdWUubGVuZ3RoID09PSAxICYmIHZhbHVlWzBdLnN0YXJ0c1dpdGggJiYgdmFsdWVbMF0uc3RhcnRzV2l0aChcIltbXCIpICYmIHZhbHVlWzBdLmVuZHNXaXRoKFwiXV1cIikpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlWzBdLnNsaWNlKDIsIC0yKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuXG5mdW5jdGlvbiBzZXRMaW5rTmV3UHJvcHMobGluazogSFRNTEVsZW1lbnQsIG5ld19wcm9wczogUmVjb3JkPHN0cmluZywgc3RyaW5nPikge1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBmb3IgKGNvbnN0IGEgb2YgbGluay5hdHRyaWJ1dGVzKSB7XG4gICAgICAgIGlmIChhLm5hbWUuaW5jbHVkZXMoXCJkYXRhLWxpbmtcIikgJiYgIShhLm5hbWUgaW4gbmV3X3Byb3BzKSkge1xuICAgICAgICAgICAgbGluay5yZW1vdmVBdHRyaWJ1dGUoYS5uYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBPYmplY3Qua2V5cyhuZXdfcHJvcHMpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgY29uc3QgZG9tX2tleSA9IHByb2Nlc3NLZXkoa2V5KTtcbiAgICAgICAgY29uc3QgbmFtZSA9IFwiZGF0YS1saW5rLVwiICsgZG9tX2tleTtcbiAgICAgICAgY29uc3QgY3VyVmFsdWUgPSBsaW5rLmdldEF0dHJpYnV0ZShuYW1lKTtcbiAgICAgICAgY29uc3QgbmV3VmFsdWUgPSBwcm9jZXNzVmFsdWUoa2V5LCBuZXdfcHJvcHNba2V5XSk7XG5cbiAgICAgICAgLy8gT25seSB1cGRhdGUgaWYgdmFsdWUgaXMgZGlmZmVyZW50XG4gICAgICAgIGlmICghbmV3VmFsdWUgfHwgY3VyVmFsdWUgIT0gbmV3VmFsdWUpIHtcbiAgICAgICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKG5hbWUsIG5ld1ZhbHVlKVxuICAgICAgICAgICAgaWYgKG5ld1ZhbHVlPy5zdGFydHNXaXRoICYmIChuZXdWYWx1ZS5zdGFydHNXaXRoKCdodHRwJykgfHwgbmV3VmFsdWUuc3RhcnRzV2l0aCgnZGF0YTonKSkpIHtcbiAgICAgICAgICAgICAgICBsaW5rLnN0eWxlLnNldFByb3BlcnR5KGAtLWRhdGEtbGluay0ke2RvbV9rZXl9YCwgYHVybCgke25ld1ZhbHVlfSlgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGluay5zdHlsZS5zZXRQcm9wZXJ0eShgLS1kYXRhLWxpbmstJHtkb21fa2V5fWAsIG5ld1ZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGlmICghbGluay5oYXNDbGFzcyhcImRhdGEtbGluay1pY29uXCIpKSB7XG4gICAgICAgIGxpbmsuYWRkQ2xhc3MoXCJkYXRhLWxpbmstaWNvblwiKTtcbiAgICB9XG4gICAgaWYgKCFsaW5rLmhhc0NsYXNzKFwiZGF0YS1saW5rLWljb24tYWZ0ZXJcIikpIHtcbiAgICAgICAgbGluay5hZGRDbGFzcyhcImRhdGEtbGluay1pY29uLWFmdGVyXCIpO1xuICAgIH1cbiAgICBpZiAoIWxpbmsuaGFzQ2xhc3MoXCJkYXRhLWxpbmstdGV4dFwiKSkge1xuICAgICAgICBsaW5rLmFkZENsYXNzKFwiZGF0YS1saW5rLXRleHRcIik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB1cGRhdGVMaW5rRXh0cmFBdHRyaWJ1dGVzKGFwcDogQXBwLCBzZXR0aW5nczogU3VwZXJjaGFyZ2VkTGlua3NTZXR0aW5ncywgbGluazogSFRNTEVsZW1lbnQsIGRlc3ROYW1lOiBzdHJpbmcpIHtcbiAgICBjb25zdCBsaW5rSHJlZiA9IGxpbmsuZ2V0QXR0cmlidXRlKCdocmVmJyk/LnNwbGl0KCcjJyk/LlswXTtcbiAgICBpZiAobGlua0hyZWYpIHtcbiAgICAgICAgY29uc3QgZGVzdCA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KGxpbmtIcmVmLCBkZXN0TmFtZSk7XG4gICAgICAgIGlmIChkZXN0KSB7XG4gICAgICAgICAgICBjb25zdCBuZXdfcHJvcHMgPSBmZXRjaFRhcmdldEF0dHJpYnV0ZXNTeW5jKGFwcCwgc2V0dGluZ3MsIGRlc3QsIGZhbHNlKTtcbiAgICAgICAgICAgIHNldExpbmtOZXdQcm9wcyhsaW5rLCBuZXdfcHJvcHMpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlRGl2RXh0cmFBdHRyaWJ1dGVzKGFwcDogQXBwLCBzZXR0aW5nczogU3VwZXJjaGFyZ2VkTGlua3NTZXR0aW5ncywgbGluazogSFRNTEVsZW1lbnQsIGRlc3ROYW1lOiBzdHJpbmcsIGxpbmtOYW1lPzogc3RyaW5nLCBmaWx0ZXJfY29sbGFwc2libGU6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgIGlmIChmaWx0ZXJfY29sbGFwc2libGUgJiYgbGluay5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZShcImNsYXNzXCIpLmNvbnRhaW5zKCdtb2QtY29sbGFwc2libGUnKSkgcmV0dXJuOyAvLyBCb29rbWFya3MgRm9sZGVyXG4gICAgaWYgKCFsaW5rTmFtZSkge1xuICAgICAgICBsaW5rTmFtZSA9IGxpbmsudGV4dENvbnRlbnQ7XG4gICAgfVxuICAgIGlmICghIWxpbmsucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcGF0aCcpKSB7XG4gICAgICAgIC8vIEZpbGUgQnJvd3NlclxuICAgICAgICBsaW5rTmFtZSA9IGxpbmsucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcGF0aCcpO1xuICAgIH0gZWxzZSBpZiAobGluay5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZShcImNsYXNzXCIpID09IFwic3VnZ2VzdGlvbi1jb250ZW50XCIgJiYgISFsaW5rLm5leHRFbGVtZW50U2libGluZykge1xuICAgICAgICAvLyBBdXRvIGNvbXBsZXRlXG4gICAgICAgIGxpbmtOYW1lID0gbGluay5uZXh0RWxlbWVudFNpYmxpbmcudGV4dENvbnRlbnQgKyBsaW5rTmFtZTtcbiAgICB9XG4gICAgY29uc3QgZGVzdCA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KGdldExpbmtwYXRoKGxpbmtOYW1lKSwgZGVzdE5hbWUpXG5cbiAgICBpZiAoZGVzdCkge1xuICAgICAgICBjb25zdCBuZXdfcHJvcHMgPSBmZXRjaFRhcmdldEF0dHJpYnV0ZXNTeW5jKGFwcCwgc2V0dGluZ3MsIGRlc3QsIHRydWUpO1xuICAgICAgICBzZXRMaW5rTmV3UHJvcHMobGluaywgbmV3X3Byb3BzKTtcbiAgICB9XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUVsTGlua3MoYXBwOiBBcHAsIHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3MsIGVsOiBIVE1MRWxlbWVudCwgY3R4OiBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0KSB7XG4gICAgY29uc3Qgc2V0dGluZ3MgPSBwbHVnaW4uc2V0dGluZ3M7XG4gICAgY29uc3QgbGlua3MgPSBlbC5xdWVyeVNlbGVjdG9yQWxsKCdhLmludGVybmFsLWxpbmsnKTtcbiAgICBjb25zdCBkZXN0TmFtZSA9IGN0eC5zb3VyY2VQYXRoLnJlcGxhY2UoLyguKikubWQvLCBcIiQxXCIpO1xuICAgIGxpbmtzLmZvckVhY2goKGxpbms6IEhUTUxFbGVtZW50KSA9PiB7XG4gICAgICAgIHVwZGF0ZUxpbmtFeHRyYUF0dHJpYnV0ZXMoYXBwLCBzZXR0aW5ncywgbGluaywgZGVzdE5hbWUpO1xuICAgIH0pO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVQcm9wZXJ0aWVzUGFuZShwcm9wZXJ0aWVzRWw6IEhUTUxFbGVtZW50LCBmaWxlOiBURmlsZSwgYXBwOiBBcHAsIHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3MpIHtcbiAgICBjb25zdCBmcm9udG1hdHRlciA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldENhY2hlKGZpbGUucGF0aCk/LmZyb250bWF0dGVyO1xuICAgIGlmKCEhZnJvbnRtYXR0ZXIpIHtcbiAgICAgICAgY29uc3Qgbm9kZXMgPSBwcm9wZXJ0aWVzRWwucXVlcnlTZWxlY3RvckFsbChcImRpdi5pbnRlcm5hbC1saW5rID4gLm11bHRpLXNlbGVjdC1waWxsLWNvbnRlbnRcIik7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IGVsID0gbm9kZXNbaV0gYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICBjb25zdCBsaW5rVGV4dCA9IGVsLnRleHRDb250ZW50O1xuICAgICAgICAgICAgY29uc3Qga2V5RWwgPSBlbC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmNoaWxkcmVuWzBdLmNoaWxkcmVuWzFdO1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgY29uc3Qga2V5ID0ga2V5RWwudmFsdWU7XG4gICAgICAgICAgICBjb25zdCBsaXN0T2ZMaW5rczogW3N0cmluZ10gPSBmcm9udG1hdHRlcltrZXldO1xuICAgICAgICAgICAgbGV0IGZvdW5kUyA9IG51bGw7XG4gICAgICAgICAgICBpZiAoIWxpc3RPZkxpbmtzKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHMgb2YgbGlzdE9mTGlua3MpIHtcbiAgICAgICAgICAgICAgICBpZiAocy5sZW5ndGggPiA0ICYmIHMuc3RhcnRzV2l0aChcIltbXCIpICYmIHMuZW5kc1dpdGgoXCJdXVwiKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzbGljZWRTID0gcy5zbGljZSgyLCAtMik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNwbGl0ID0gc2xpY2VkUy5zcGxpdChcInxcIik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzcGxpdC5sZW5ndGggPT0gMSAmJiBzcGxpdFswXSA9PSBsaW5rVGV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRTID0gc3BsaXRbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzcGxpdC5sZW5ndGggPT0gMiAmJiBzcGxpdFsxXSA9PSBsaW5rVGV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRTID0gc3BsaXRbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghIWZvdW5kUykge1xuICAgICAgICAgICAgICAgIHVwZGF0ZURpdkV4dHJhQXR0cmlidXRlcyhwbHVnaW4uYXBwLCBwbHVnaW4uc2V0dGluZ3MsIGVsLCBcIlwiLCBmb3VuZFMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNpbmdsZU5vZGVzID0gcHJvcGVydGllc0VsLnF1ZXJ5U2VsZWN0b3JBbGwoXCJkaXYubWV0YWRhdGEtbGluay1pbm5lclwiKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaW5nbGVOb2Rlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgY29uc3QgZWwgPSBzaW5nbGVOb2Rlc1tpXSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICAgIGNvbnN0IGxpbmtUZXh0ID0gZWwudGV4dENvbnRlbnQ7XG4gICAgICAgICAgICBjb25zdCBrZXlFbCA9IGVsLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmNoaWxkcmVuWzBdLmNoaWxkcmVuWzFdO1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgY29uc3Qga2V5ID0ga2V5RWwudmFsdWU7XG4gICAgICAgICAgICBjb25zdCBsaW5rOiBzdHJpbmcgPSBmcm9udG1hdHRlcltrZXldO1xuICAgICAgICAgICAgaWYgKCFsaW5rKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgZm91bmRTOiBzdHJpbmcgPSBudWxsO1xuICAgICAgICAgICAgaWYgKGxpbms/Lmxlbmd0aCA+IDQgJiYgbGluay5zdGFydHNXaXRoKFwiW1tcIikgJiYgbGluay5lbmRzV2l0aChcIl1dXCIpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2xpY2VkUyA9IGxpbmsuc2xpY2UoMiwgLTIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNwbGl0ID0gc2xpY2VkUy5zcGxpdChcInxcIik7XG4gICAgICAgICAgICAgICAgaWYgKHNwbGl0Lmxlbmd0aCA9PSAxICYmIHNwbGl0WzBdID09IGxpbmtUZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIGZvdW5kUyA9IHNwbGl0WzBdO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3BsaXQubGVuZ3RoID09IDIgJiYgc3BsaXRbMV0gPT0gbGlua1RleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgZm91bmRTID0gc3BsaXRbMF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCEhZm91bmRTKSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlRGl2RXh0cmFBdHRyaWJ1dGVzKHBsdWdpbi5hcHAsIHBsdWdpbi5zZXR0aW5ncywgZWwsIFwiXCIsIGZvdW5kUyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVZpc2libGVMaW5rcyhhcHA6IEFwcCwgcGx1Z2luOiBTdXBlcmNoYXJnZWRMaW5rcykge1xuICAgIGNvbnN0IHNldHRpbmdzID0gcGx1Z2luLnNldHRpbmdzO1xuICAgIGFwcC53b3Jrc3BhY2UuaXRlcmF0ZVJvb3RMZWF2ZXMoKGxlYWYpID0+IHtcbiAgICAgICAgaWYgKGxlYWYudmlldyBpbnN0YW5jZW9mIE1hcmtkb3duVmlldyAmJiBsZWFmLnZpZXcuZmlsZSkge1xuICAgICAgICAgICAgY29uc3QgZmlsZTogVEZpbGUgPSBsZWFmLnZpZXcuZmlsZTtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlZEZpbGUgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG5cbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gbGVhZi52aWV3Py5tZXRhZGF0YUVkaXRvcj8uY29udGVudEVsO1xuICAgICAgICAgICAgaWYgKCEhbWV0YWRhdGEpIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVQcm9wZXJ0aWVzUGFuZShtZXRhZGF0YSwgZmlsZSwgYXBwLCBwbHVnaW4pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL0B0cy1pZ25vcmVcbiAgICAgICAgICAgIGNvbnN0IHRhYkhlYWRlcjogSFRNTEVsZW1lbnQgPSBsZWFmLnRhYkhlYWRlcklubmVyVGl0bGVFbDtcbiAgICAgICAgICAgIGlmIChzZXR0aW5ncy5lbmFibGVUYWJIZWFkZXIpIHtcbiAgICAgICAgICAgICAgICAvLyBTdXBlcmNoYXJnZSB0YWIgaGVhZGVyc1xuICAgICAgICAgICAgICAgIHVwZGF0ZURpdkV4dHJhQXR0cmlidXRlcyhhcHAsIHNldHRpbmdzLCB0YWJIZWFkZXIsIFwiXCIsIGZpbGUucGF0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjbGVhckV4dHJhQXR0cmlidXRlcyh0YWJIZWFkZXIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY2FjaGVkRmlsZT8ubGlua3MpIHtcbiAgICAgICAgICAgICAgICBjYWNoZWRGaWxlLmxpbmtzLmZvckVhY2goKGxpbms6IExpbmtDYWNoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlTmFtZSA9IGZpbGUucGF0aC5yZXBsYWNlKC8oLiopLm1kLywgXCIkMVwiKVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZXN0ID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QobGluay5saW5rLCBmaWxlTmFtZSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld19wcm9wcyA9IGZldGNoVGFyZ2V0QXR0cmlidXRlc1N5bmMoYXBwLCBzZXR0aW5ncywgZGVzdCwgZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnRlcm5hbExpbmtzID0gbGVhZi52aWV3LmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoYGEuaW50ZXJuYWwtbGlua1tocmVmPVwiJHtsaW5rLmxpbmt9XCJdYClcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVybmFsTGlua3MuZm9yRWFjaCgoaW50ZXJuYWxMaW5rOiBIVE1MRWxlbWVudCkgPT4gc2V0TGlua05ld1Byb3BzKGludGVybmFsTGluaywgbmV3X3Byb3BzKSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KVxufVxuIiwiaW1wb3J0IFN1cGVyY2hhcmdlZExpbmtzIGZyb20gXCJtYWluXCJcbmltcG9ydCB7XG4gICAgTW9kYWwsXG4gICAgU2V0dGluZ1xufSBmcm9tIFwib2JzaWRpYW5cIlxuaW1wb3J0IHttYXRjaFR5cGVzLCBtYXRjaFByZXZpZXcsIENTU0xpbmssIG1hdGNoUHJldmlld1BhdGgsIHNlbGVjdG9yVHlwZSwgU2VsZWN0b3JUeXBlcywgTWF0Y2hUeXBlc30gZnJvbSAnLi9jc3NMaW5rJ1xuaW1wb3J0IHtTdXBlcmNoYXJnZWRMaW5rc1NldHRpbmdzfSBmcm9tIFwiLi4vc2V0dGluZ3MvU3VwZXJjaGFyZ2VkTGlua3NTZXR0aW5nc1wiO1xuaW1wb3J0IHsgcHJvY2Vzc0tleSB9IGZyb20gXCJzcmMvbGlua0F0dHJpYnV0ZXMvbGlua0F0dHJpYnV0ZXNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGRpc3BsYXlUZXh0KGxpbms6IENTU0xpbmssIHNldHRpbmdzOiBTdXBlcmNoYXJnZWRMaW5rc1NldHRpbmdzKTogc3RyaW5nIHtcbiAgICBpZiAobGluay50eXBlID09PSAndGFnJykge1xuICAgICAgICBpZiAoIWxpbmsudmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiBcIjxiPlBsZWFzZSBjaG9vc2UgYSB0YWc8L2I+XCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGA8c3BhbiBjbGFzcz1cImRhdGEtbGluay1pY29uIGRhdGEtbGluay10ZXh0IGRhdGEtbGluay1pY29uLWFmdGVyXCIgZGF0YS1saW5rLXRhZ3M9XCIke2xpbmsudmFsdWV9XCI+Tm90ZTwvc3Bhbj4gaGFzIHRhZyA8YSBjbGFzcz1cInRhZ1wiPiMke2xpbmsudmFsdWV9PC9hPmA7XG4gICAgfVxuICAgIGVsc2UgaWYgKGxpbmsudHlwZSA9PT0gJ2F0dHJpYnV0ZScpIHtcbiAgICAgICAgaWYgKHNldHRpbmdzLnRhcmdldEF0dHJpYnV0ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gYDxiPk5vIGF0dHJpYnV0ZXMgYWRkZWQgdG8gXCJUYXJnZXQgYXR0cmlidXRlc1wiLiBHbyB0byBwbHVnaW4gc2V0dGluZ3MgdG8gYWRkIHRoZW0uPC9iPmBcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWxpbmsubmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIFwiPGI+UGxlYXNlIGNob29zZSBhbiBhdHRyaWJ1dGUgbmFtZS48L2I+XCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFsaW5rLnZhbHVlKXtcbiAgICAgICAgICAgIHJldHVybiBcIjxiPlBsZWFzZSBjaG9vc2UgYW4gYXR0cmlidXRlIHZhbHVlLjwvYj5cIlxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgPHNwYW4gY2xhc3M9XCJkYXRhLWxpbmstaWNvbiBkYXRhLWxpbmstdGV4dCBkYXRhLWxpbmstaWNvbi1hZnRlclwiIGRhdGEtbGluay0ke2xpbmsubmFtZX09XCIke2xpbmsudmFsdWV9XCI+Tm90ZTwvc3Bhbj4gaGFzIGF0dHJpYnV0ZSA8Yj4ke2xpbmsubmFtZS5yZXBsYWNlKC8tL2csICcgJyl9PC9iPiAke21hdGNoUHJldmlld1tsaW5rLm1hdGNoXX0gPGI+JHtsaW5rLnZhbHVlfTwvYj4uYDtcbiAgICB9XG4gICAgaWYgKCFsaW5rLnZhbHVlKSB7XG4gICAgICAgIHJldHVybiBcIjxiPlBsZWFzZSBjaG9vc2UgYSBwYXRoLjwvYj5cIlxuICAgIH1cbiAgICByZXR1cm4gYFRoZSBwYXRoIG9mIHRoZSA8c3BhbiBjbGFzcz1cImRhdGEtbGluay1pY29uIGRhdGEtbGluay10ZXh0IGRhdGEtbGluay1pY29uLWFmdGVyXCIgZGF0YS1saW5rLXBhdGg9XCIke2xpbmsudmFsdWV9XCI+bm90ZTwvc3Bhbj4gJHttYXRjaFByZXZpZXdQYXRoW2xpbmsubWF0Y2hdfSA8Yj4ke2xpbmsudmFsdWV9PC9iPmBcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZURpc3BsYXkodGV4dEFyZWE6IEhUTUxFbGVtZW50LCBsaW5rOiBDU1NMaW5rLCBzZXR0aW5nczogU3VwZXJjaGFyZ2VkTGlua3NTZXR0aW5ncyk6IGJvb2xlYW4ge1xuICAgIGxldCB0b0Rpc3BsYXk6IHN0cmluZyA9IGRpc3BsYXlUZXh0KGxpbmssIHNldHRpbmdzKTtcbiAgICBsZXQgZGlzYWJsZWQgPSBmYWxzZTtcbiAgICBpZiAobGluay50eXBlID09PSAndGFnJykge1xuICAgICAgICBpZiAoIWxpbmsudmFsdWUpIHtcbiAgICAgICAgICAgIGRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChsaW5rLnR5cGUgPT09ICdhdHRyaWJ1dGUnKSB7XG4gICAgICAgIGlmIChzZXR0aW5ncy50YXJnZXRBdHRyaWJ1dGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFsaW5rLm5hbWUpIHtcbiAgICAgICAgICAgIGRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghbGluay52YWx1ZSl7XG4gICAgICAgICAgICBkaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmICghbGluay52YWx1ZSkge1xuICAgICAgICAgICAgZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRleHRBcmVhLmlubmVySFRNTCA9IHRvRGlzcGxheTtcbiAgICByZXR1cm4gZGlzYWJsZWQ7XG59XG5cbmNsYXNzIENTU0J1aWxkZXJNb2RhbCBleHRlbmRzIE1vZGFsIHtcblxuICAgIHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3NcbiAgICBjc3NMaW5rOiBDU1NMaW5rXG4gICAgc2F2ZUNhbGxiYWNrOiAoY3NzTGluazogQ1NTTGluaykgPT4gdm9pZDtcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3MsIHNhdmVDYWxsYmFjazogKGNzc0xpbms6IENTU0xpbmspID0+IHZvaWQsIGNzc0xpbms6IENTU0xpbms9bnVsbCkge1xuICAgICAgICBzdXBlcihwbHVnaW4uYXBwKVxuICAgICAgICB0aGlzLmNzc0xpbmsgPSBjc3NMaW5rO1xuICAgICAgICBpZiAoIWNzc0xpbmspIHtcbiAgICAgICAgICAgIHRoaXMuY3NzTGluayA9IG5ldyBDU1NMaW5rKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMuc2F2ZUNhbGxiYWNrID0gc2F2ZUNhbGxiYWNrO1xuICAgIH1cblxuXG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIHRoaXMudGl0bGVFbC5zZXRUZXh0KGBTZWxlY3Qgd2hhdCBsaW5rcyB0byBzdHlsZSFgKVxuICAgICAgICAvLyBpcyB0YWdcbiAgICAgICAgY29uc3QgbWF0Y2hBdHRyUGxhY2Vob2xkZXIgPSBcIkF0dHJpYnV0ZSB2YWx1ZSB0byBtYXRjaC5cIjtcbiAgICAgICAgY29uc3QgbWF0Y2hUYWdQbGFjZWhvbGRlciA9IFwiTm90ZSB0YWcgdG8gbWF0Y2ggKHdpdGhvdXQgIykuXCI7XG4gICAgICAgIGNvbnN0IG1hdGNoUGF0aFBsYWNlaG9sZGVyID0gXCJGaWxlIHBhdGggdG8gbWF0Y2guXCI7XG4gICAgICAgIGNvbnN0IG1hdGNoQXR0clR4dCA9IFwiQXR0cmlidXRlIHZhbHVlXCI7XG4gICAgICAgIGNvbnN0IG1hdGNoVGFnVHh0ID0gXCJUYWdcIjtcbiAgICAgICAgY29uc3QgbWF0Y2hQYXRoVHh0ID0gXCJQYXRoXCI7XG5cbiAgICAgICAgY29uc3QgY3NzTGluayA9IHRoaXMuY3NzTGluaztcbiAgICAgICAgY29uc3QgcGx1Z2luID0gdGhpcy5wbHVnaW47XG5cbiAgICAgICAgdGhpcy5jb250ZW50RWwuYWRkQ2xhc3MoXCJzdXBlcmNoYXJnZWQtbW9kYWxcIik7XG5cbiAgICAgICAgLy8gVHlwZVxuICAgICAgICBuZXcgU2V0dGluZyh0aGlzLmNvbnRlbnRFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiVHlwZSBvZiBzZWxlY3RvclwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJBdHRyaWJ1dGVzIHNlbGVjdHMgWUFNTCBhbmQgRGF0YVZpZXcgYXR0cmlidXRlc1wiICtcbiAgICAgICAgICAgICAgICBcIiwgdGFncyBjaG9vc2VzIHRoZSB0YWdzIG9mIGEgbm90ZSwgYW5kIHBhdGggY29uc2lkZXJzIHRoZSBuYW1lIG9mIHRoZSBub3RlIGluY2x1ZGluZyBpbiB3aGF0IGZvbGRlciBpdCBpcy5cIilcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkYyA9PiB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoc2VsZWN0b3JUeXBlKS5mb3JFYWNoKCh0eXBlOiBTZWxlY3RvclR5cGVzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGRjLmFkZE9wdGlvbih0eXBlLCBzZWxlY3RvclR5cGVbdHlwZV0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gdGhpcy5jc3NMaW5rLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRjLnNldFZhbHVlKHR5cGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZGMub25DaGFuZ2UoKHR5cGU6IFNlbGVjdG9yVHlwZXMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY3NzTGluay50eXBlID0gdHlwZTtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlQ29udGFpbmVyKGNzc0xpbmsudHlwZSk7XG4gICAgICAgICAgICAgICAgICAgIHNhdmVCdXR0b24uc2V0RGlzYWJsZWQodXBkYXRlRGlzcGxheShwcmV2aWV3LCB0aGlzLmNzc0xpbmssIHRoaXMucGx1Z2luLnNldHRpbmdzKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAvLyBhdHRyaWJ1dGUgbmFtZVxuICAgICAgICBjb25zdCBhdHRyTmFtZSA9IG5ldyBTZXR0aW5nKHRoaXMuY29udGVudEVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJBdHRyaWJ1dGUgbmFtZVwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJXaGF0IGF0dHJpYnV0ZSB0byB0YXJnZXQ/IE1ha2Ugc3VyZSB0byBmaXJzdCBhZGQgdGFyZ2V0IGF0dHJpYnV0ZXMgdG8gdGhlIHNldHRpbmdzIGF0IHRoZSB0b3AhXCIpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZGMgPT4ge1xuICAgICAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy50YXJnZXRBdHRyaWJ1dGVzLmZvckVhY2goKGF0dHJpYnV0ZTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRvbV9hdHRyaWJ1dGUgPSBwcm9jZXNzS2V5KGF0dHJpYnV0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGRjLmFkZE9wdGlvbihkb21fYXR0cmlidXRlLCBhdHRyaWJ1dGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZG9tX2F0dHJpYnV0ZSA9PT0gY3NzTGluay5uYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYy5zZXRWYWx1ZShkb21fYXR0cmlidXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGRjLm9uQ2hhbmdlKG5hbWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjc3NMaW5rLm5hbWUgPSBuYW1lO1xuICAgICAgICAgICAgICAgICAgICBzYXZlQnV0dG9uLnNldERpc2FibGVkKHVwZGF0ZURpc3BsYXkocHJldmlldywgY3NzTGluaywgcGx1Z2luLnNldHRpbmdzKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KVxuXG5cbiAgICAgICAgLy8gYXR0cmlidXRlIHZhbHVlXG4gICAgICAgIGNvbnN0IGF0dHJWYWx1ZSA9IG5ldyBTZXR0aW5nKHRoaXMuY29udGVudEVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJWYWx1ZSB0byBtYXRjaFwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJUT0RPXCIpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ID0+IHtcbiAgICAgICAgICAgICAgICB0LnNldFZhbHVlKGNzc0xpbmsudmFsdWUpO1xuICAgICAgICAgICAgICAgIHQub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3NzTGluay52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZUJ1dHRvbi5zZXREaXNhYmxlZCh1cGRhdGVEaXNwbGF5KHByZXZpZXcsIGNzc0xpbmssIHBsdWdpbi5zZXR0aW5ncykpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2g0Jywge3RleHQ6ICdBZHZhbmNlZCd9KTtcbiAgICAgICAgLy8gbWF0Y2hpbmcgdHlwZVxuICAgICAgICBjb25zdCBtYXRjaGluZ1R5cGUgPSBuZXcgU2V0dGluZyh0aGlzLmNvbnRlbnRFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiTWF0Y2hpbmcgdHlwZVwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJIb3cgdG8gY29tcGFyZSB0aGUgYXR0cmlidXRlIG9yIHBhdGggd2l0aCB0aGUgZ2l2ZW4gdmFsdWUuXCIpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZGMgPT4ge1xuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKG1hdGNoVHlwZXMpLmZvckVhY2goKGtleTogTWF0Y2hUeXBlcyk9PiB7XG4gICAgICAgICAgICAgICAgICAgIGRjLmFkZE9wdGlvbihrZXksIG1hdGNoVHlwZXNba2V5XSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleSA9PSBjc3NMaW5rLm1hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYy5zZXRWYWx1ZShrZXkpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIGRjLm9uQ2hhbmdlKCh2YWx1ZTogXCJleGFjdFwiIHwgXCJjb250YWluc1wiIHwgXCJzdGFydHN3aXRoXCIgfCBcImVuZHN3aXRoXCIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY3NzTGluay5tYXRjaCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBzYXZlQnV0dG9uLnNldERpc2FibGVkKHVwZGF0ZURpc3BsYXkocHJldmlldywgY3NzTGluaywgcGx1Z2luLnNldHRpbmdzKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KVxuXG5cbiAgICAgICAgLy8gY2FzZSBzZW5zaXRpdmVcbiAgICAgICAgY29uc3QgY2FzZVNlbnNpdGl2ZVRvZ2dsZXJDb250YWluZXIgPSBuZXcgU2V0dGluZyh0aGlzLmNvbnRlbnRFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiQ2FzZSBzZW5zaXRpdmUgbWF0Y2hpbmdcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiU2hvdWxkIHRoZSBtYXRjaGluZyBvZiB0aGUgdmFsdWUgYmUgY2FzZSBzZW5zaXRpdmU/XCIpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKGIgPT4ge1xuICAgICAgICAgICAgICAgIGIuc2V0VmFsdWUoY3NzTGluay5tYXRjaENhc2VTZW5zaXRpdmUpO1xuICAgICAgICAgICAgICAgIGIub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjc3NMaW5rLm1hdGNoQ2FzZVNlbnNpdGl2ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBiLnNldERpc2FibGVkKHVwZGF0ZURpc3BsYXkocHJldmlldywgY3NzTGluaywgcGx1Z2luLnNldHRpbmdzKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgIGlmICghdGhpcy5jc3NMaW5rLm5hbWUgJiYgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFyZ2V0QXR0cmlidXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgIHRoaXMuY3NzTGluay5uYW1lID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFyZ2V0QXR0cmlidXRlc1swXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHVwZGF0ZUNvbnRhaW5lciA9IGZ1bmN0aW9uKHR5cGU6IFNlbGVjdG9yVHlwZXMpIHtcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAnYXR0cmlidXRlJykge1xuICAgICAgICAgICAgICAgIGF0dHJOYW1lLnNldHRpbmdFbC5zaG93KCk7XG4gICAgICAgICAgICAgICAgYXR0clZhbHVlLm5hbWVFbC5zZXRUZXh0KG1hdGNoQXR0clR4dCk7XG4gICAgICAgICAgICAgICAgYXR0clZhbHVlLmRlc2NFbC5zZXRUZXh0KG1hdGNoQXR0clBsYWNlaG9sZGVyKTtcbiAgICAgICAgICAgICAgICBtYXRjaGluZ1R5cGUuc2V0dGluZ0VsLnNob3coKTtcbiAgICAgICAgICAgICAgICBjYXNlU2Vuc2l0aXZlVG9nZ2xlckNvbnRhaW5lci5zZXR0aW5nRWwuc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gJ3RhZycpIHtcbiAgICAgICAgICAgICAgICBhdHRyTmFtZS5zZXR0aW5nRWwuaGlkZSgpO1xuICAgICAgICAgICAgICAgIGF0dHJWYWx1ZS5uYW1lRWwuc2V0VGV4dChtYXRjaFRhZ1R4dCk7XG4gICAgICAgICAgICAgICAgYXR0clZhbHVlLmRlc2NFbC5zZXRUZXh0KG1hdGNoVGFnUGxhY2Vob2xkZXIpO1xuICAgICAgICAgICAgICAgIG1hdGNoaW5nVHlwZS5zZXR0aW5nRWwuaGlkZSgpO1xuICAgICAgICAgICAgICAgIGNhc2VTZW5zaXRpdmVUb2dnbGVyQ29udGFpbmVyLnNldHRpbmdFbC5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhdHRyTmFtZS5zZXR0aW5nRWwuaGlkZSgpO1xuICAgICAgICAgICAgICAgIGF0dHJWYWx1ZS5uYW1lRWwuc2V0VGV4dChtYXRjaFBhdGhUeHQpO1xuICAgICAgICAgICAgICAgIGF0dHJWYWx1ZS5kZXNjRWwuc2V0VGV4dChtYXRjaFBhdGhQbGFjZWhvbGRlcik7XG4gICAgICAgICAgICAgICAgbWF0Y2hpbmdUeXBlLnNldHRpbmdFbC5zaG93KCk7XG4gICAgICAgICAgICAgICAgY2FzZVNlbnNpdGl2ZVRvZ2dsZXJDb250YWluZXIuc2V0dGluZ0VsLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIG5ldyBTZXR0aW5nKHRoaXMuY29udGVudEVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJTdHlsZSBvcHRpb25zXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIldoYXQgc3R5bGluZyBvcHRpb25zIGFyZSBhY3RpdmU/IFwiICtcbiAgICAgICAgICAgICAgICBcIkRpc2FibGluZyBvcHRpb25zIHlvdSB3b24ndCB1c2UgY2FuIGltcHJvdmUgcGVyZm9ybWFuY2Ugc2xpZ2h0bHkuXCIpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHQgPT4ge1xuICAgICAgICAgICAgICAgIHQub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjc3NMaW5rLnNlbGVjdFRleHQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIHQuc2V0VmFsdWUoY3NzTGluay5zZWxlY3RUZXh0KTtcbiAgICAgICAgICAgICAgICB0LnNldFRvb2x0aXAoXCJTdHlsZSBsaW5rIHRleHRcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0ID0+IHtcbiAgICAgICAgICAgICAgICB0Lm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY3NzTGluay5zZWxlY3RQcmVwZW5kID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB0LnNldFZhbHVlKGNzc0xpbmsuc2VsZWN0UHJlcGVuZCk7XG4gICAgICAgICAgICAgICAgdC5zZXRUb29sdGlwKFwiQWRkIGNvbnRlbnQgYmVmb3JlIGxpbmtcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0ID0+IHtcbiAgICAgICAgICAgICAgICB0Lm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY3NzTGluay5zZWxlY3RBcHBlbmQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIHQuc2V0VmFsdWUoY3NzTGluay5zZWxlY3RBcHBlbmQpO1xuICAgICAgICAgICAgICAgIHQuc2V0VG9vbHRpcChcIkFkZCBjb250ZW50IGFmdGVyIGxpbmtcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0ID0+IHtcbiAgICAgICAgICAgICAgICB0Lm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY3NzTGluay5zZWxlY3RCYWNrZ3JvdW5kID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB0LnNldFZhbHVlKGNzc0xpbmsuc2VsZWN0QmFja2dyb3VuZCk7XG4gICAgICAgICAgICAgICAgdC5zZXRUb29sdGlwKFwiQWRkIG9wdGlvbmFsIGJhY2tncm91bmQgb3IgdW5kZXJsaW5lIHRvIGxpbmtcIik7XG4gICAgICAgICAgICB9KTtcblxuXG4gICAgICAgIHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdoNCcsIHt0ZXh0OiAnUmVzdWx0J30pO1xuICAgICAgICBjb25zdCBtb2RhbCA9IHRoaXM7XG4gICAgICAgIGNvbnN0IHNhdmVCdXR0b24gPSBuZXcgU2V0dGluZyh0aGlzLmNvbnRlbnRFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiUHJldmlld1wiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJcIilcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYiA9PiB7XG4gICAgICAgICAgICAgICAgYi5zZXRCdXR0b25UZXh0KFwiU2F2ZVwiKVxuICAgICAgICAgICAgICAgIGIub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG1vZGFsLnNhdmVDYWxsYmFjayhjc3NMaW5rKTtcbiAgICAgICAgICAgICAgICAgICAgbW9kYWwuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAvLyBnZW5lcmF0ZSBidXR0b25cblxuICAgICAgICBjb25zdCBwcmV2aWV3ID0gc2F2ZUJ1dHRvbi5uYW1lRWw7XG4gICAgICAgIHVwZGF0ZUNvbnRhaW5lcihjc3NMaW5rLnR5cGUpO1xuICAgICAgICBzYXZlQnV0dG9uLnNldERpc2FibGVkKHVwZGF0ZURpc3BsYXkocHJldmlldywgdGhpcy5jc3NMaW5rLCB0aGlzLnBsdWdpbi5zZXR0aW5ncykpO1xuICAgIH1cblxufVxuXG5leHBvcnQgeyBDU1NCdWlsZGVyTW9kYWwgfSIsImltcG9ydCB7Q1NTTGluaywgbWF0Y2hTaWdufSBmcm9tIFwiLi9jc3NMaW5rXCI7XG5pbXBvcnQgU3VwZXJjaGFyZ2VkTGlua3MgZnJvbSBcIi4uLy4uL21haW5cIjtcblxuXG5jb25zdCBjb2xvclNldCA9IFtbXG4gICAgJyMwMDg5QkEnLFxuICAgICcjMkM3M0QyJyxcbiAgICAnIzAwOEU5QicsXG4gICAgJyMwMDgxQ0YnLFxuICAgICcjMDA4RjdBJyxcbiAgICAnIzAwOEU5QicsXG5dLCBbXG4gICAgJyNENjVEQjEnLFxuICAgICcjMDA4MkMxJyxcbiAgICAnIzkyNzBEMycsXG4gICAgJyMwMDdGOTMnLFxuICAgICcjMDA3RUQ5JyxcbiAgICAnIzAwNzY2MCcsXG5dLCBbXG4gICAgJyNGRjk2NzEnLFxuICAgICcjQTM2QUFBJyxcbiAgICAnI0YyN0Q4OCcsXG4gICAgJyM2OTY3QTknLFxuICAgICcjRDI2RjlEJyxcbiAgICAnIzFiNjI5OScsXG5dLCBbXG4gICAgJyNGRkM3NUYnLFxuICAgICcjNEM5QTUyJyxcbiAgICAnI0MzQkI0RScsXG4gICAgJyMwMDg1NUInLFxuICAgICcjODhBQzRCJyxcbiAgICAnIzAwNkY2MScsXG5dLCBbXG4gICAgJyNGRjZGOTEnLFxuICAgICcjNkY3RjIyJyxcbiAgICAnI0UwNzI1MCcsXG4gICAgJyMyNTdBM0UnLFxuICAgICcjQUM3QzI2JyxcbiAgICAnIzAwNkY1RicsXG5dLCBbXG4gICAgJyNkOWQ4NjcnLFxuICAgICcjMkZBQjYzJyxcbiAgICAnI0I4RTA2NycsXG4gICAgJyMwMDhFNjMnLFxuICAgICcjNzhDNjY0JyxcbiAgICAnIzAwNzE2MCcsXG5dXTtcbmNvbnN0IGNvbG9yczogc3RyaW5nW10gPSBbXTtcbmZvciAoY29uc3QgaSBvZiBBcnJheSg2KS5rZXlzKCkpIHtcbiAgICBmb3IgKGNvbnN0IGogb2YgQXJyYXkoNikua2V5cygpKSB7XG4gICAgICAgIGNvbG9ycy5wdXNoKGNvbG9yU2V0W2pdW2ldKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGhhc2godWlkOiBzdHJpbmcpIHtcbiAgICBsZXQgaGFzaCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB1aWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgY2hhciA9IHVpZC5jaGFyQ29kZUF0KGkpO1xuICAgICAgICBoYXNoID0gKChoYXNoIDw8IDUpIC0gaGFzaCkgKyBjaGFyO1xuICAgICAgICBoYXNoID0gaGFzaCAmIGhhc2g7IC8vIENvbnZlcnQgdG8gMzJiaXQgaW50ZWdlclxuICAgIH1cbiAgICBoYXNoID0gTWF0aC5hYnMoaGFzaCk7XG4gICAgcmV0dXJuIGhhc2hcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGJ1aWxkQ1NTKHNlbGVjdG9yczogQ1NTTGlua1tdLCBwbHVnaW46IFN1cGVyY2hhcmdlZExpbmtzKSB7XG4gICAgY29uc3QgaW5zdHJ1Y3Rpb25zOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgXCIvKiBXQVJOSU5HOiBUaGlzIGZpbGUgd2lsbCBiZSBvdmVyd3JpdHRlbiBieSB0aGUgcGx1Z2luLlwiLFxuICAgICAgICBcIkRvIG5vdCBlZGl0IHRoaXMgZmlsZSBkaXJlY3RseSEgRmlyc3QgY29weSB0aGlzIGZpbGUgYW5kIHJlbmFtZSBpdCBpZiB5b3Ugd2FudCB0byBlZGl0IHRoaW5ncy4gKi9cIixcbiAgICAgICAgXCJcIixcbiAgICAgICAgXCI6cm9vdCB7XCJcbiAgICBdO1xuXG5cbiAgICBzZWxlY3RvcnMuZm9yRWFjaCgoc2VsZWN0b3IsIGkpID0+IHtcbiAgICAgICAgaWYgKHNlbGVjdG9yLnNlbGVjdFRleHQpIHtcbiAgICAgICAgICAgIGluc3RydWN0aW9ucy5wdXNoKGAgICAgLS0ke3NlbGVjdG9yLnVpZH0tY29sb3I6ICR7Y29sb3JzW2hhc2goc2VsZWN0b3IudWlkKSAlIDM2XX07YCk7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbnMucHVzaChgICAgIC0tJHtzZWxlY3Rvci51aWR9LXdlaWdodDogaW5pdGlhbDtgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZWN0b3Iuc2VsZWN0UHJlcGVuZCkge1xuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zLnB1c2goYCAgICAtLSR7c2VsZWN0b3IudWlkfS1iZWZvcmU6ICcnO2ApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxlY3Rvci5zZWxlY3RBcHBlbmQpIHtcbiAgICAgICAgICAgIGluc3RydWN0aW9ucy5wdXNoKGAgICAgLS0ke3NlbGVjdG9yLnVpZH0tYWZ0ZXI6ICcnO2ApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxlY3Rvci5zZWxlY3RCYWNrZ3JvdW5kKSB7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbnMucHVzaChgICAgIC0tJHtzZWxlY3Rvci51aWR9LWJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7YCk7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbnMucHVzaChgICAgIC0tJHtzZWxlY3Rvci51aWR9LWRlY29yYXRpb246IGluaXRpYWw7YCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBpbnN0cnVjdGlvbnMucHVzaChcIn1cIik7XG5cbiAgICBzZWxlY3RvcnMuZm9yRWFjaChzZWxlY3RvciA9PiB7XG4gICAgICAgIGxldCBjc3NTZWxlY3Rvcjogc3RyaW5nO1xuICAgICAgICBpZiAoc2VsZWN0b3IudHlwZSA9PT0gJ2F0dHJpYnV0ZScpIHtcbiAgICAgICAgICAgIGNzc1NlbGVjdG9yID0gYFtkYXRhLWxpbmstJHtzZWxlY3Rvci5uYW1lfSR7bWF0Y2hTaWduW3NlbGVjdG9yLm1hdGNoXX09XCIke3NlbGVjdG9yLnZhbHVlfVwiICR7c2VsZWN0b3IubWF0Y2hDYXNlU2Vuc2l0aXZlID9cIlwiIDogXCIgaVwifV1gO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNlbGVjdG9yLnR5cGUgPT09ICd0YWcnKSB7XG4gICAgICAgICAgICBjc3NTZWxlY3RvciA9IGBbZGF0YS1saW5rLXRhZ3MqPVwiJHtzZWxlY3Rvci52YWx1ZX1cIiBpXWA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjc3NTZWxlY3RvciA9IGBbZGF0YS1saW5rLXBhdGgke21hdGNoU2lnbltzZWxlY3Rvci5tYXRjaF19PVwiJHtzZWxlY3Rvci52YWx1ZX1cIiAke3NlbGVjdG9yLm1hdGNoQ2FzZVNlbnNpdGl2ZSA/XCJcIiA6IFwiaVwifV1gO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGVjdG9yLnNlbGVjdFRleHQpIHtcbiAgICAgICAgICAgIGluc3RydWN0aW9ucy5wdXNoKC4uLltcbiAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgIGBkaXZbZGF0YS1pZD1cIiR7c2VsZWN0b3IudWlkfVwiXSBkaXYuc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uLGAsXG4gICAgICAgICAgICAgICAgY3NzU2VsZWN0b3IgKyBcIiB7XCIsXG4gICAgICAgICAgICAgICAgYCAgICBjb2xvcjogdmFyKC0tJHtzZWxlY3Rvci51aWR9LWNvbG9yKSAhaW1wb3J0YW50O2AsXG4gICAgICAgICAgICAgICAgYCAgICBmb250LXdlaWdodDogdmFyKC0tJHtzZWxlY3Rvci51aWR9LXdlaWdodCk7YCxcbiAgICAgICAgICAgICAgICBcIn1cIl0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxlY3Rvci5zZWxlY3RCYWNrZ3JvdW5kKSB7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbnMucHVzaCguLi5bXCJcIixcbiAgICAgICAgICAgICAgICBgLmMtJHtzZWxlY3Rvci51aWR9LXVzZS1iYWNrZ3JvdW5kIGRpdltkYXRhLWlkPVwiJHtzZWxlY3Rvci51aWR9XCJdIGRpdi5zZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24sYCxcbiAgICAgICAgICAgICAgICBgLmMtJHtzZWxlY3Rvci51aWR9LXVzZS1iYWNrZ3JvdW5kIC5kYXRhLWxpbmstdGV4dCR7Y3NzU2VsZWN0b3J9IHtgLFxuICAgICAgICAgICAgICAgIGAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tJHtzZWxlY3Rvci51aWR9LWJhY2tncm91bmQtY29sb3IpICFpbXBvcnRhbnQ7YCxcbiAgICAgICAgICAgICAgICBgICAgIGJvcmRlci1yYWRpdXM6IDVweDtgLFxuICAgICAgICAgICAgICAgIGAgICAgcGFkZGluZy1sZWZ0OiAycHg7YCxcbiAgICAgICAgICAgICAgICBgICAgIHBhZGRpbmctcmlnaHQ6IDJweDtgLFxuICAgICAgICAgICAgICAgIGAgICAgdGV4dC1kZWNvcmF0aW9uOiB2YXIoLS0ke3NlbGVjdG9yLnVpZH0tZGVjb3JhdGlvbikgIWltcG9ydGFudDtgLFxuICAgICAgICAgICAgICAgIFwifVwiXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGVjdG9yLnNlbGVjdFByZXBlbmQpIHtcbiAgICAgICAgICAgIGluc3RydWN0aW9ucy5wdXNoKC4uLltcIlwiLFxuICAgICAgICAgICAgICAgIGBkaXZbZGF0YS1pZD1cIiR7c2VsZWN0b3IudWlkfVwiXSBkaXYuc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uOjpiZWZvcmUsYCxcbiAgICAgICAgICAgICAgICBgLmRhdGEtbGluay1pY29uJHtjc3NTZWxlY3Rvcn06OmJlZm9yZSB7YCxcbiAgICAgICAgICAgICAgICBgICAgIGNvbnRlbnQ6IHZhcigtLSR7c2VsZWN0b3IudWlkfS1iZWZvcmUpO2AsXG4gICAgICAgICAgICAgICAgXCJ9XCJdKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZWN0b3Iuc2VsZWN0QXBwZW5kKSB7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbnMucHVzaCguLi5bXCJcIixcbiAgICAgICAgICAgICAgICBgZGl2W2RhdGEtaWQ9XCIke3NlbGVjdG9yLnVpZH1cIl0gZGl2LnNldHRpbmctaXRlbS1kZXNjcmlwdGlvbjo6YWZ0ZXIsYCxcbiAgICAgICAgICAgICAgICBgLmRhdGEtbGluay1pY29uLWFmdGVyJHtjc3NTZWxlY3Rvcn06OmFmdGVyIHtgLFxuICAgICAgICAgICAgICAgIGAgICAgY29udGVudDogdmFyKC0tJHtzZWxlY3Rvci51aWR9LWFmdGVyKTtgLFxuICAgICAgICAgICAgICAgIFwifVwiXSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGluc3RydWN0aW9ucy5wdXNoKC4uLltcbiAgICAgICAgXCIvKiBAc2V0dGluZ3NcIixcbiAgICAgICAgXCJuYW1lOiBTdXBlcmNoYXJnZWQgTGlua3NcIixcbiAgICAgICAgXCJpZDogc3VwZXJjaGFyZ2VkLWxpbmtzXCIsXG4gICAgICAgIFwic2V0dGluZ3M6XCIsXG4gICAgXSk7XG5cbiAgICBzZWxlY3RvcnMuZm9yRWFjaCgoc2VsZWN0b3IsIGkpID0+IHtcbiAgICAgICAgbGV0IG5hbWUgPSBzZWxlY3Rvci5uYW1lO1xuICAgICAgICBsZXQgdmFsdWUgPSBzZWxlY3Rvci52YWx1ZTtcbiAgICAgICAgaWYgKHNlbGVjdG9yLnR5cGUgPT09ICd0YWcnKSB7XG4gICAgICAgICAgICBuYW1lID0gJ3RhZyc7XG4gICAgICAgICAgICAvLyB2YWx1ZSA9IFwiXFwjXCIgKyB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzZWxlY3Rvci50eXBlID09PSAncGF0aCcpe1xuICAgICAgICAgICAgbmFtZSA9ICdwYXRoJztcbiAgICAgICAgfVxuICAgICAgICBpbnN0cnVjdGlvbnMucHVzaCguLi5bXG4gICAgICAgICAgICBcIiAgICAtIFwiLFxuICAgICAgICAgICAgYCAgICAgICAgaWQ6ICR7c2VsZWN0b3IudWlkfWAsXG4gICAgICAgICAgICBgICAgICAgICB0aXRsZTogJHtuYW1lfSBpcyAke3ZhbHVlfWAsXG4gICAgICAgICAgICBgICAgICAgICBkZXNjcmlwdGlvbjogRXhhbXBsZSBub3RlYCxcbiAgICAgICAgICAgIFwiICAgICAgICB0eXBlOiBoZWFkaW5nXCIsXG4gICAgICAgICAgICBcIiAgICAgICAgY29sbGFwc2VkOiB0cnVlXCIsXG4gICAgICAgICAgICBcIiAgICAgICAgbGV2ZWw6IDNcIl0pO1xuICAgICAgICBpZiAoc2VsZWN0b3Iuc2VsZWN0VGV4dCkge1xuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zLnB1c2goLi4uW1xuICAgICAgICAgICAgICAgIFwiICAgIC0gXCIsXG4gICAgICAgICAgICAgICAgYCAgICAgICAgaWQ6ICR7c2VsZWN0b3IudWlkfS1jb2xvcmAsXG4gICAgICAgICAgICAgICAgYCAgICAgICAgdGl0bGU6IExpbmsgY29sb3JgLFxuICAgICAgICAgICAgICAgIFwiICAgICAgICB0eXBlOiB2YXJpYWJsZS1jb2xvclwiLFxuICAgICAgICAgICAgICAgIFwiICAgICAgICBmb3JtYXQ6IGhleFwiLFxuICAgICAgICAgICAgICAgIGAgICAgICAgIGRlZmF1bHQ6ICcke2NvbG9yc1toYXNoKHNlbGVjdG9yLnVpZCkgJSAzNl19J2AsXG4gICAgICAgICAgICAgICAgXCIgICAgLSBcIixcbiAgICAgICAgICAgICAgICBgICAgICAgICBpZDogJHtzZWxlY3Rvci51aWR9LXdlaWdodGAsXG4gICAgICAgICAgICAgICAgYCAgICAgICAgdGl0bGU6IEZvbnQgd2VpZ2h0YCxcbiAgICAgICAgICAgICAgICBcIiAgICAgICAgdHlwZTogdmFyaWFibGUtc2VsZWN0XCIsXG4gICAgICAgICAgICAgICAgYCAgICAgICAgZGVmYXVsdDogaW5pdGlhbGAsXG4gICAgICAgICAgICAgICAgYCAgICAgICAgb3B0aW9uczpgLFxuICAgICAgICAgICAgICAgIGAgICAgICAgICAgICAtIGluaXRpYWxgLFxuICAgICAgICAgICAgICAgIGAgICAgICAgICAgICAtIGxpZ2h0ZXJgLFxuICAgICAgICAgICAgICAgIGAgICAgICAgICAgICAtIG5vcm1hbGAsXG4gICAgICAgICAgICAgICAgYCAgICAgICAgICAgIC0gYm9sZGAsXG4gICAgICAgICAgICAgICAgYCAgICAgICAgICAgIC0gYm9sZGVyYCxcbiAgICAgICAgICAgICAgICBcIiAgICAtIFwiLFxuICAgICAgICAgICAgICAgIGAgICAgICAgIGlkOiAke3NlbGVjdG9yLnVpZH0tZGVjb3JhdGlvbmAsXG4gICAgICAgICAgICAgICAgYCAgICAgICAgdGl0bGU6IEZvbnQgZGVjb3JhdGlvbmAsXG4gICAgICAgICAgICAgICAgXCIgICAgICAgIHR5cGU6IHZhcmlhYmxlLXNlbGVjdFwiLFxuICAgICAgICAgICAgICAgIGAgICAgICAgIGRlZmF1bHQ6IGluaXRpYWxgLFxuICAgICAgICAgICAgICAgIGAgICAgICAgIG9wdGlvbnM6YCxcbiAgICAgICAgICAgICAgICBgICAgICAgICAgICAgLSBpbml0aWFsYCxcbiAgICAgICAgICAgICAgICBgICAgICAgICAgICAgLSB1bmRlcmxpbmVgLFxuICAgICAgICAgICAgICAgIGAgICAgICAgICAgICAtIG92ZXJsaW5lYCxcbiAgICAgICAgICAgICAgICBgICAgICAgICAgICAgLSBsaW5lLXRocm91Z2hgXSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZWN0b3Iuc2VsZWN0UHJlcGVuZCkge1xuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zLnB1c2goLi4uW1wiICAgIC0gXCIsXG4gICAgICAgICAgICBgICAgICAgICBpZDogJHtzZWxlY3Rvci51aWR9LWJlZm9yZWAsXG4gICAgICAgICAgICBgICAgICAgICB0aXRsZTogUHJlcGVuZCB0ZXh0YCxcbiAgICAgICAgICAgIGAgICAgICAgIGRlc2NyaXB0aW9uOiBBZGQgc29tZSB0ZXh0LCBzdWNoIGFzIGFuIGVtb2ppLCBiZWZvcmUgdGhlIGxpbmtzLmAsXG4gICAgICAgICAgICBcIiAgICAgICAgdHlwZTogdmFyaWFibGUtdGV4dFwiLFxuICAgICAgICAgICAgYCAgICAgICAgZGVmYXVsdDogJydgLFxuICAgICAgICAgICAgYCAgICAgICAgcXVvdGVzOiB0cnVlYF0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGVjdG9yLnNlbGVjdEFwcGVuZCkge1xuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zLnB1c2goLi4uW1wiICAgIC0gXCIsXG4gICAgICAgICAgICAgICAgYCAgICAgICAgaWQ6ICR7c2VsZWN0b3IudWlkfS1hZnRlcmAsXG4gICAgICAgICAgICAgICAgYCAgICAgICAgdGl0bGU6IEFwcGVuZCB0ZXh0YCxcbiAgICAgICAgICAgICAgICBgICAgICAgICBkZXNjcmlwdGlvbjogQWRkIHNvbWUgdGV4dCwgc3VjaCBhcyBhbiBlbW9qaSwgYWZ0ZXIgdGhlIGxpbmtzLmAsXG4gICAgICAgICAgICAgICAgXCIgICAgICAgIHR5cGU6IHZhcmlhYmxlLXRleHRcIixcbiAgICAgICAgICAgICAgICBgICAgICAgICBkZWZhdWx0OiAnJ2AsXG4gICAgICAgICAgICAgICAgYCAgICAgICAgcXVvdGVzOiB0cnVlYF0pXG4gICAgICAgIH1cbiAgICAgICAgaWYoc2VsZWN0b3Iuc2VsZWN0QmFja2dyb3VuZCkge1xuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zLnB1c2goLi4uW1wiICAgIC0gXCIsXG4gICAgICAgICAgICAgICAgYCAgICAgICAgaWQ6IGMtJHtzZWxlY3Rvci51aWR9LXVzZS1iYWNrZ3JvdW5kYCxcbiAgICAgICAgICAgICAgICBgICAgICAgICB0aXRsZTogVXNlIGJhY2tncm91bmQgY29sb3JgLFxuICAgICAgICAgICAgICAgIGAgICAgICAgIGRlc2NyaXB0aW9uOiBBZGRzIGEgYmFja2dyb3VuZCBjb2xvciB0byB0aGUgbGluay4gVGhpcyBjYW4gbG9vayBidWdneSBpbiBsaXZlIHByZXZpZXcuYCxcbiAgICAgICAgICAgICAgICBcIiAgICAgICAgdHlwZTogY2xhc3MtdG9nZ2xlXCIsXG4gICAgICAgICAgICAgICAgXCIgICAgLSBcIixcbiAgICAgICAgICAgICAgICBgICAgICAgICBpZDogJHtzZWxlY3Rvci51aWR9LWJhY2tncm91bmQtY29sb3JgLFxuICAgICAgICAgICAgICAgIGAgICAgICAgIHRpdGxlOiBCYWNrZ3JvdW5kIGNvbG9yYCxcbiAgICAgICAgICAgICAgICBcIiAgICAgICAgdHlwZTogdmFyaWFibGUtY29sb3JcIixcbiAgICAgICAgICAgICAgICBcIiAgICAgICAgZm9ybWF0OiBoZXhcIixcbiAgICAgICAgICAgICAgICBgICAgICAgICBkZWZhdWx0OiAnI2ZmZmZmZidgXSlcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGluc3RydWN0aW9ucy5wdXNoKFwiKi9cIik7XG5cbiAgICBjb25zdCB2YXVsdCA9IHBsdWdpbi5hcHAudmF1bHQ7XG4gICAgY29uc3QgY29uZmlnRGlyID0gdmF1bHQuY29uZmlnRGlyID8/IFwiLm9ic2lkaWFuXCI7XG4gICAgY29uc3QgcGF0aERpciA9IGNvbmZpZ0RpciArIFwiL3NuaXBwZXRzXCI7XG4gICAgYXdhaXQgdmF1bHQuYWRhcHRlci5ta2RpcihwYXRoRGlyKTtcbiAgICBjb25zdCBwYXRoID0gcGF0aERpciArIFwiL3N1cGVyY2hhcmdlZC1saW5rcy1nZW4uY3NzXCI7XG4gICAgaWYgKGF3YWl0IHZhdWx0LmFkYXB0ZXIuZXhpc3RzKHBhdGgpKSB7XG4gICAgICAgIGF3YWl0IHZhdWx0LmFkYXB0ZXIucmVtb3ZlKHBhdGgpO1xuICAgIH1cbiAgICBhd2FpdCBwbHVnaW4uYXBwLnZhdWx0LmNyZWF0ZShwYXRoLCBpbnN0cnVjdGlvbnMuam9pbignXFxuJykpO1xuXG4gICAgLy8gQWN0aXZhdGUgc25pcHBldFxuICAgIGlmIChwbHVnaW4uc2V0dGluZ3MuYWN0aXZhdGVTbmlwcGV0KSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgY29uc3QgY3VzdG9tQ3NzID0gcGx1Z2luLmFwcC5jdXN0b21Dc3M7XG4gICAgICAgIGN1c3RvbUNzcy5lbmFibGVkU25pcHBldHMuYWRkKCdzdXBlcmNoYXJnZWQtbGlua3MtZ2VuJyk7XG4gICAgICAgIGN1c3RvbUNzcy5yZXF1ZXN0TG9hZFNuaXBwZXRzKCk7XG4gICAgfVxuXG4gICAgLy8gRW5zdXJlIFN0eWxlIFNldHRpbmdzIHJlYWRzIGNoYW5nZXNcbiAgICBwbHVnaW4uYXBwLndvcmtzcGFjZS50cmlnZ2VyKFwicGFyc2Utc3R5bGUtc2V0dGluZ3NcIik7XG59XG4iLCJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIGRlYm91bmNlIH0gZnJvbSBcIm9ic2lkaWFuXCJcbmltcG9ydCBTdXBlcmNoYXJnZWRMaW5rcyBmcm9tIFwibWFpblwiXG5pbXBvcnQgeyBDU1NCdWlsZGVyTW9kYWwsIHVwZGF0ZURpc3BsYXkgfSBmcm9tIFwiLi4vY3NzQnVpbGRlci9jc3NCdWlsZGVyTW9kYWxcIjtcbmltcG9ydCB7IGJ1aWxkQ1NTIH0gZnJvbSBcIi4uL2Nzc0J1aWxkZXIvY3NzQnVpbGRlclwiO1xuaW1wb3J0IHt1cGRhdGVWaXNpYmxlTGlua3N9IGZyb20gXCIuLi9saW5rQXR0cmlidXRlcy9saW5rQXR0cmlidXRlc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdXBlcmNoYXJnZWRMaW5rc1NldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcblx0cGx1Z2luOiBTdXBlcmNoYXJnZWRMaW5rcztcblx0ZGVib3VuY2VkR2VuZXJhdGU6IEZ1bmN0aW9uO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFN1cGVyY2hhcmdlZExpbmtzKSB7XG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHRcdHRoaXMuZGVib3VuY2VkR2VuZXJhdGUgPSBkZWJvdW5jZSh0aGlzLl9nZW5lcmF0ZVNuaXBwZXQsIDEwMDAsIHRydWUpO1xuXHRcdC8vIEdlbmVyYXRlIENTUyBpbW1lZGlhdGVseSByYXRoZXIgdGhhbiAxIHNlY29uZCAtIGZlZWxzIGxhZ2d5XG5cdFx0dGhpcy5fZ2VuZXJhdGVTbmlwcGV0KCk7XG5cdH1cblxuXHRkaXNwbGF5KCk6IHZvaWQge1xuXHRcdGxldCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblxuXHRcdC8qIE1hbmFnaW5nIGV4dHJhIGF0dGlyYnV0ZXMgZm9yIGEuaW50ZXJuYWwtbGluayAqL1xuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ1RhcmdldCBBdHRyaWJ1dGVzIGZvciBzdHlsaW5nJylcblx0XHRcdC5zZXREZXNjKCdGcm9udG1hdHRlciBhdHRyaWJ1dGVzIHRvIHRhcmdldCwgY29tbWEgc2VwYXJhdGVkJylcblx0XHRcdC5hZGRUZXh0QXJlYSgodGV4dCkgPT4ge1xuXHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdFbnRlciBhdHRyaWJ1dGVzIGFzIHN0cmluZywgY29tbWEgc2VwYXJhdGVkJylcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGFyZ2V0QXR0cmlidXRlcy5qb2luKCcsICcpKVxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnRhcmdldEF0dHJpYnV0ZXMgPSB2YWx1ZS5zcGxpdCgnLCcpLm1hcChhdHRyID0+IGF0dHIudHJpbSgpKTtcblx0XHRcdFx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXJnZXRBdHRyaWJ1dGVzLmxlbmd0aCA9PT0gMSAmJiAhdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFyZ2V0QXR0cmlidXRlc1swXSkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXJnZXRBdHRyaWJ1dGVzID0gW107XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHR0ZXh0LmlucHV0RWwucm93cyA9IDY7XG5cdFx0XHRcdHRleHQuaW5wdXRFbC5jb2xzID0gMjU7XG5cdFx0XHR9KTtcblxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ1N0eWxpbmcnIH0pO1xuXHRcdGNvbnN0IHN0eWxlU2V0dGluZ0Rlc2NyaXB0aW9uID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KCk7XG5cdFx0c3R5bGVTZXR0aW5nRGVzY3JpcHRpb24uaW5uZXJIVE1MID0gYFxuU3R5bGluZyBjYW4gYmUgZG9uZSB1c2luZyB0aGUgU3R5bGUgU2V0dGluZ3MgcGx1Z2luLiBcbiA8b2w+XG4gPGxpPkNyZWF0ZSBzZWxlY3RvcnMgZG93biBiZWxvdy48L2xpPlxuIDxsaT5HbyB0byB0aGUgU3R5bGUgU2V0dGluZ3MgdGFiIGFuZCBzdHlsZSB5b3VyIGxpbmtzITwvbGk+XG48L29sPmBcblx0XHRjb25zdCBzZWxlY3RvckRpdiA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdigpO1xuXHRcdHRoaXMuZHJhd1NlbGVjdG9ycyhzZWxlY3RvckRpdik7XG5cblxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ1NldHRpbmdzJyB9KTtcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdFbmFibGUgaW4gRWRpdG9yJylcblx0XHRcdC5zZXREZXNjKCdJZiB0cnVlLCB0aGlzIHdpbGwgYWxzbyBzdXBlcmNoYXJnZSBpbnRlcm5hbCBsaW5rcyBpbiB0aGUgZWRpdG9yIHZpZXcgb2YgYSBub3RlLicpXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XG5cdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVFZGl0b3IpXG5cdFx0XHRcdHRvZ2dsZS5vbkNoYW5nZSh2YWx1ZSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlRWRpdG9yID0gdmFsdWVcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKVxuXHRcdFx0XHRcdHVwZGF0ZVZpc2libGVMaW5rcyh0aGlzLmFwcCwgdGhpcy5wbHVnaW4pO1xuXHRcdFx0XHR9KVxuXHRcdFx0fSlcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0VuYWJsZSBpbiB0YWIgaGVhZGVycycpXG5cdFx0XHQuc2V0RGVzYygnSWYgdHJ1ZSwgdGhpcyB3aWxsIGFsc28gc3VwZXJjaGFyZ2UgdGhlIGhlYWRlcnMgb2YgYSB0YWIuJylcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcblx0XHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVRhYkhlYWRlcilcblx0XHRcdFx0dG9nZ2xlLm9uQ2hhbmdlKHZhbHVlID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVUYWJIZWFkZXIgPSB2YWx1ZVxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpXG5cdFx0XHRcdFx0dXBkYXRlVmlzaWJsZUxpbmtzKHRoaXMuYXBwLCB0aGlzLnBsdWdpbik7XG5cdFx0XHRcdH0pXG5cdFx0XHR9KVxuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnRW5hYmxlIGluIEZpbGUgQnJvd3NlcicpXG5cdFx0XHQuc2V0RGVzYygnSWYgdHJ1ZSwgdGhpcyB3aWxsIGFsc28gc3VwZXJjaGFyZ2UgdGhlIGZpbGUgYnJvd3Nlci4nKVxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xuXHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlRmlsZUxpc3QpXG5cdFx0XHRcdHRvZ2dsZS5vbkNoYW5nZSh2YWx1ZSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlRmlsZUxpc3QgPSB2YWx1ZVxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpXG5cdFx0XHRcdH0pXG5cdFx0XHR9KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0VuYWJsZSBpbiBCYXNlcycpXG5cdFx0XHQuc2V0RGVzYygnSWYgdHJ1ZSwgdGhpcyB3aWxsIGFsc28gc3VwZXJjaGFyZ2UgT2JzaWRpYW4gQmFzZXMuJylcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcblx0XHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUJhc2VzKVxuXHRcdFx0XHR0b2dnbGUub25DaGFuZ2UodmFsdWUgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUJhc2VzID0gdmFsdWVcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnRW5hYmxlIGluIFBsdWdpbnMnKVxuXHRcdFx0LnNldERlc2MoJ0lmIHRydWUsIHRoaXMgd2lsbCBhbHNvIHN1cGVyY2hhcmdlIHBsdWdpbnMgbGlrZSB0aGUgYmFja2xpbmtzIGFuZCBmb3J3YXJkIGxpbmtzIHBhbmVscy4nKVxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xuXHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQmFja2xpbmtzKVxuXHRcdFx0XHR0b2dnbGUub25DaGFuZ2UodmFsdWUgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUJhY2tsaW5rcyA9IHZhbHVlXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKClcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdFbmFibGUgaW4gUXVpY2sgU3dpdGNoZXInKVxuXHRcdFx0LnNldERlc2MoJ0lmIHRydWUsIHRoaXMgd2lsbCBhbHNvIHN1cGVyY2hhcmdlIHRoZSBxdWljayBzd2l0Y2hlci4nKVxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xuXHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlUXVpY2tTd2l0Y2hlcilcblx0XHRcdFx0dG9nZ2xlLm9uQ2hhbmdlKHZhbHVlID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVRdWlja1N3aXRjaGVyID0gdmFsdWVcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0VuYWJsZSBpbiBMaW5rIEF1dG9jb21wbGV0ZXInKVxuXHRcdFx0LnNldERlc2MoJ0lmIHRydWUsIHRoaXMgd2lsbCBhbHNvIHN1cGVyY2hhcmdlIHRoZSBsaW5rIGF1dG9jb21wbGV0ZXIuJylcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcblx0XHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVN1Z2dlc3Rvcilcblx0XHRcdFx0dG9nZ2xlLm9uQ2hhbmdlKHZhbHVlID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVTdWdnZXN0b3IgPSB2YWx1ZVxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdBZHZhbmNlZCcgfSk7XG5cdFx0Ly8gTWFuYWdpbmcgY2hvaWNlIHdldGhlciB5b3Ugd2FudCB0byBwYXJzZSB0YWdzIGJvdGggZnJvbSBub3JtYWwgdGFncyBhbmQgaW4gdGhlIGZyb250bWF0dGVyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnUGFyc2UgYWxsIHRhZ3MgaW4gdGhlIGZpbGUnKVxuXHRcdFx0LnNldERlc2MoJ1NldHMgdGhlIGBkYXRhLWxpbmstdGFnc2AtYXR0cmlidXRlIHRvIGxvb2sgZm9yIHRhZ3MgYm90aCBpbiB0aGUgZnJvbnRtYXR0ZXIgYW5kIGluIHRoZSBmaWxlIGFzICN0YWctbmFtZScpXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XG5cdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXJnZXRUYWdzKVxuXHRcdFx0XHR0b2dnbGUub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnRhcmdldFRhZ3MgPSB2YWx1ZVxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KVxuXHRcdFx0fSlcblxuXHRcdC8vIE1hbmFnaW5nIGNob2ljZSB3ZXRoZXIgeW91IGdldCBhdHRyaWJ1dGVzIGZyb20gaW5saW5lIGZpZWxkcyBhbmQgZnJvbnRtYXR0ZXIgb3Igb25seSBmcm9udG1hdGVyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnU2VhcmNoIGZvciBhdHRyaWJ1dGUgaW4gSW5saW5lIGZpZWxkcyBsaWtlIDxmaWVsZDo6PicpXG5cdFx0XHQuc2V0RGVzYygnU2V0cyB0aGUgYGRhdGEtbGluay08ZmllbGQ+YC1hdHRyaWJ1dGUgdG8gdGhlIHZhbHVlIG9mIGlubGluZSBmaWVsZHMnKVxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xuXHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0RnJvbUlubGluZUZpZWxkKVxuXHRcdFx0XHR0b2dnbGUub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmdldEZyb21JbmxpbmVGaWVsZCA9IHZhbHVlXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKClcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblxuXHRcdC8vIEF1dG9tYXRpY2FsbHkgYWN0aXZhdGUgc25pcHBldFxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0F1dG9tYXRpY2FsbHkgYWN0aXZhdGUgc25pcHBldCcpXG5cdFx0XHQuc2V0RGVzYygnSWYgdHJ1ZSwgdGhpcyB3aWxsIGF1dG9tYXRpY2FsbHkgYWN0aXZhdGUgdGhlIGdlbmVyYXRlZCBDU1Mgc25pcHBldCBcInN1cGVyY2hhcmdlZC1saW5rcy1nZW4uY3NzXCIuICcgK1xuXHRcdFx0XHQnVHVybiB0aGlzIG9mZiBpZiB5b3UgZG9uXFwndCB3YW50IHRoaXMgdG8gaGFwcGVuLicpXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XG5cdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hY3RpdmF0ZVNuaXBwZXQpXG5cdFx0XHRcdHRvZ2dsZS5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYWN0aXZhdGVTbmlwcGV0ID0gdmFsdWVcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0LyogTWFuYWdpbmcgcHJlZGVmaW5lZCB2YWx1ZXMgZm9yIHByb3BlcnRpZXMgKi9cblx0XHQvKiBNYW5hZ2UgbWVudSBvcHRpb25zIGRpc3BsYXkqL1xuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJEaXNwbGF5IGZpZWxkIG9wdGlvbnMgaW4gY29udGV4dCBtZW51XCIpXG5cdFx0XHQuc2V0RGVzYyhcIlRoaXMgZmVhdHVyZSBoYXMgYmVlbiBtaWdyYXRlZCB0byBtZXRhZGF0YS1tZW51IHBsdWdpbiBodHRwczovL2dpdGh1Yi5jb20vbWRlbG9iZWxsZS9tZXRhZGF0YW1lbnVcIilcblx0fVxuXG5cdGdlbmVyYXRlU25pcHBldCgpIHtcblx0XHR0aGlzLmRlYm91bmNlZEdlbmVyYXRlKCk7XG5cdH1cblxuXHRhc3luYyBfZ2VuZXJhdGVTbmlwcGV0KCkge1xuXHRcdGF3YWl0IGJ1aWxkQ1NTKHRoaXMucGx1Z2luLnNldHRpbmdzLnNlbGVjdG9ycywgdGhpcy5wbHVnaW4pO1xuXHRcdC8vIG5ldyBOb3RpY2UoXCJHZW5lcmF0ZWQgc3VwZXJjaGFyZ2VkLWxpbmtzLWdlbi5jc3NcIik7XG5cdH1cblxuXHRkcmF3U2VsZWN0b3JzKGRpdjogSFRNTEVsZW1lbnQpIHtcblx0XHRkaXYuZW1wdHkoKTtcblx0XHR0aGlzLmdlbmVyYXRlU25pcHBldCgpO1xuXHRcdGNvbnN0IHNlbGVjdG9ycyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnNlbGVjdG9ycztcblx0XHRzZWxlY3RvcnMuZm9yRWFjaCgoc2VsZWN0b3IsIGkpID0+IHtcblx0XHRcdGNvbnN0IHMgPSBuZXcgU2V0dGluZyhkaXYpXG5cdFx0XHRcdC5hZGRCdXR0b24oYnV0dG9uID0+IHtcblx0XHRcdFx0XHRidXR0b24ub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCBvbGRTZWxlY3RvciA9IHNlbGVjdG9yc1tpICsgMV07XG5cdFx0XHRcdFx0XHRzZWxlY3RvcnNbaSArIDFdID0gc2VsZWN0b3I7XG5cdFx0XHRcdFx0XHRzZWxlY3RvcnNbaV0gPSBvbGRTZWxlY3Rvcjtcblx0XHRcdFx0XHRcdHRoaXMuZHJhd1NlbGVjdG9ycyhkaXYpO1xuXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0YnV0dG9uLnNldEljb24oXCJkb3duLWFycm93LXdpdGgtdGFpbFwiKTtcblx0XHRcdFx0XHRidXR0b24uc2V0VG9vbHRpcChcIk1vdmUgc2VsZWN0b3IgZG93blwiKTtcblx0XHRcdFx0XHRpZiAoaSA9PT0gc2VsZWN0b3JzLmxlbmd0aCAtIDEpIHtcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5hZGRCdXR0b24oYnV0dG9uID0+IHtcblx0XHRcdFx0XHRidXR0b24ub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCBvbGRTZWxlY3RvciA9IHNlbGVjdG9yc1tpIC0gMV07XG5cdFx0XHRcdFx0XHRzZWxlY3RvcnNbaSAtIDFdID0gc2VsZWN0b3I7XG5cdFx0XHRcdFx0XHRzZWxlY3RvcnNbaV0gPSBvbGRTZWxlY3Rvcjtcblx0XHRcdFx0XHRcdHRoaXMuZHJhd1NlbGVjdG9ycyhkaXYpO1xuXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0YnV0dG9uLnNldEljb24oXCJ1cC1hcnJvdy13aXRoLXRhaWxcIik7XG5cdFx0XHRcdFx0YnV0dG9uLnNldFRvb2x0aXAoXCJNb3ZlIHNlbGVjdG9yIHVwXCIpO1xuXHRcdFx0XHRcdGlmIChpID09PSAwKSB7XG5cdFx0XHRcdFx0XHRidXR0b24uc2V0RGlzYWJsZWQodHJ1ZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KVxuXHRcdFx0XHQuYWRkQnV0dG9uKGJ1dHRvbiA9PiB7XG5cdFx0XHRcdFx0YnV0dG9uLm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgZm9ybU1vZGFsID0gbmV3IENTU0J1aWxkZXJNb2RhbCh0aGlzLnBsdWdpbiwgKG5ld1NlbGVjdG9yKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnNlbGVjdG9yc1tpXSA9IG5ld1NlbGVjdG9yO1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0dXBkYXRlRGlzcGxheShzLm5hbWVFbCwgc2VsZWN0b3IsIHRoaXMucGx1Z2luLnNldHRpbmdzKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5nZW5lcmF0ZVNuaXBwZXQoKTtcblx0XHRcdFx0XHRcdH0sIHNlbGVjdG9yKTtcblx0XHRcdFx0XHRcdGZvcm1Nb2RhbC5vcGVuKCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0YnV0dG9uLnNldEljb24oXCJwZW5jaWxcIik7XG5cdFx0XHRcdFx0YnV0dG9uLnNldFRvb2x0aXAoXCJFZGl0IHNlbGVjdG9yXCIpXG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5hZGRCdXR0b24oYnV0dG9uID0+IHtcblx0XHRcdFx0XHRidXR0b24ub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZWxlY3RvcnMucmVtb3ZlKHNlbGVjdG9yKTtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0dGhpcy5kcmF3U2VsZWN0b3JzKGRpdik7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0YnV0dG9uLnNldEljb24oXCJjcm9zc1wiKTtcblx0XHRcdFx0XHRidXR0b24uc2V0VG9vbHRpcChcIlJlbW92ZSBzZWxlY3RvclwiKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR1cGRhdGVEaXNwbGF5KHMubmFtZUVsLCBzZWxlY3RvciwgdGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xuXHRcdH0pO1xuXG5cdFx0bmV3IFNldHRpbmcoZGl2KVxuXHRcdFx0LnNldE5hbWUoXCJOZXcgc2VsZWN0b3JcIilcblx0XHRcdC5zZXREZXNjKFwiQ3JlYXRlIGEgbmV3IHNlbGVjdG9yIHRvIHN0eWxlIHdpdGggU3R5bGUgU2V0dGluZ3MuXCIpXG5cdFx0XHQuYWRkQnV0dG9uKGJ1dHRvbiA9PiB7XG5cdFx0XHRcdGJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRjb25zdCBmb3JtTW9kYWwgPSBuZXcgQ1NTQnVpbGRlck1vZGFsKHRoaXMucGx1Z2luLCAobmV3U2VsZWN0b3IpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnNlbGVjdG9ycy5wdXNoKG5ld1NlbGVjdG9yKTtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0dGhpcy5kcmF3U2VsZWN0b3JzKGRpdik7XG5cdFx0XHRcdFx0XHQvLyBUT0RPOiBGb3JjZSByZWRyYXcgc29tZWhvdz9cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRmb3JtTW9kYWwub3BlbigpO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoXCJOZXdcIik7XG5cdFx0XHR9KTtcblx0fVxufVxuIiwiaW1wb3J0IHsgQ1NTTGluayB9IGZyb20gXCIuLi9jc3NCdWlsZGVyL2Nzc0xpbmtcIjtcblxuZXhwb3J0IGludGVyZmFjZSBTdXBlcmNoYXJnZWRMaW5rc1NldHRpbmdzIHtcblx0dGFyZ2V0QXR0cmlidXRlczogQXJyYXk8c3RyaW5nPjtcblx0dGFyZ2V0VGFnczogYm9vbGVhbjtcblx0Z2V0RnJvbUlubGluZUZpZWxkOiBib29sZWFuO1xuXHRhY3RpdmF0ZVNuaXBwZXQ6IGJvb2xlYW47XG5cdGVuYWJsZUVkaXRvcjogYm9vbGVhbjtcblx0ZW5hYmxlVGFiSGVhZGVyOiBib29sZWFuO1xuXHRlbmFibGVGaWxlTGlzdDogYm9vbGVhbjtcblx0ZW5hYmxlQmFja2xpbmtzOiBib29sZWFuO1xuXHRlbmFibGVRdWlja1N3aXRjaGVyOiBib29sZWFuO1xuXHRlbmFibGVTdWdnZXN0b3I6IGJvb2xlYW47XG5cdGVuYWJsZUJhc2VzOiBib29sZWFuO1xuXHRzZWxlY3RvcnM6IENTU0xpbmtbXTtcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFN1cGVyY2hhcmdlZExpbmtzU2V0dGluZ3MgPSB7XG5cdHRhcmdldEF0dHJpYnV0ZXM6IFtdLFxuXHR0YXJnZXRUYWdzOiB0cnVlLFxuXHRnZXRGcm9tSW5saW5lRmllbGQ6IGZhbHNlLFxuXHRlbmFibGVUYWJIZWFkZXI6IHRydWUsXG5cdGFjdGl2YXRlU25pcHBldDogdHJ1ZSxcblx0ZW5hYmxlRWRpdG9yOiB0cnVlLFxuXHRlbmFibGVGaWxlTGlzdDogdHJ1ZSxcblx0ZW5hYmxlQmFja2xpbmtzOiB0cnVlLFxuXHRlbmFibGVRdWlja1N3aXRjaGVyOiB0cnVlLFxuXHRlbmFibGVTdWdnZXN0b3I6IHRydWUsXG5cdGVuYWJsZUJhc2VzOiB0cnVlLFxuXHRzZWxlY3RvcnM6IFtdXG59IiwiaW1wb3J0IHtBcHAsIGRlYm91bmNlLCBEZWJvdW5jZXIsIGVkaXRvclZpZXdGaWVsZCwgTWFya2Rvd25WaWV3LCBURmlsZX0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQge1N1cGVyY2hhcmdlZExpbmtzU2V0dGluZ3N9IGZyb20gXCIuLi9zZXR0aW5ncy9TdXBlcmNoYXJnZWRMaW5rc1NldHRpbmdzXCI7XG5pbXBvcnQge0RlY29yYXRpb24sIERlY29yYXRpb25TZXQsIEVkaXRvclZpZXcsIFZpZXdQbHVnaW4sIFZpZXdVcGRhdGUsIFdpZGdldFR5cGV9IGZyb20gXCJAY29kZW1pcnJvci92aWV3XCI7XG5pbXBvcnQge1JhbmdlU2V0LCBSYW5nZVNldEJ1aWxkZXJ9IGZyb20gXCJAY29kZW1pcnJvci9zdGF0ZVwiO1xuaW1wb3J0IHtzeW50YXhUcmVlfSBmcm9tIFwiQGNvZGVtaXJyb3IvbGFuZ3VhZ2VcIjtcbmltcG9ydCB7dG9rZW5DbGFzc05vZGVQcm9wfSBmcm9tIFwiQGNvZGVtaXJyb3IvbGFuZ3VhZ2VcIjtcbmltcG9ydCB7ZmV0Y2hUYXJnZXRBdHRyaWJ1dGVzU3luYywgcHJvY2Vzc1ZhbHVlfSBmcm9tIFwiLi9saW5rQXR0cmlidXRlc1wiO1xuaW1wb3J0IHtEZWZhdWx0RnVuY3Rpb25zfSBmcm9tIFwib2JzaWRpYW4tZGF0YXZpZXcvbGliL2V4cHJlc3Npb24vZnVuY3Rpb25zXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBidWlsZENNVmlld1BsdWdpbihhcHA6IEFwcCwgX3NldHRpbmdzOiBTdXBlcmNoYXJnZWRMaW5rc1NldHRpbmdzKVxue1xuICAgIC8vIEltcGxlbWVudHMgdGhlIGxpdmUgcHJldmlldyBzdXBlcmNoYXJnaW5nXG4gICAgLy8gQ29kZSBzdHJ1Y3R1cmUgYmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL25vdGhpbmdpc2xvc3Qvb2JzaWRpYW4tY202LWF0dHJpYnV0ZXMvYmxvYi83NDNkNzFiMGFhNjE2NDA3MTQ5YTBiNmVhNWZmZWEyOGUyMTU0MTU4L3NyYy9tYWluLnRzXG4gICAgLy8gQ29kZSBoZWxwIGNyZWRpdHMgdG8gQE5vdGhpbmdJc0xvc3QhIFRoZXkgaGF2ZSBiZWVuIGEgZ3JlYXQgaGVscCBnZXR0aW5nIHRoaXMgdG8gd29yayBwcm9wZXJseS5cbiAgICBjbGFzcyBIZWFkZXJXaWRnZXQgZXh0ZW5kcyBXaWRnZXRUeXBlIHtcbiAgICAgICAgYXR0cmlidXRlczogUmVjb3JkPHN0cmluZywgc3RyaW5nPlxuICAgICAgICBhZnRlcjogYm9vbGVhblxuXG4gICAgICAgIGNvbnN0cnVjdG9yKGF0dHJpYnV0ZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4sIGFmdGVyOiBib29sZWFuKSB7XG4gICAgICAgICAgICBzdXBlcigpO1xuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzID0gYXR0cmlidXRlc1xuICAgICAgICAgICAgdGhpcy5hZnRlciA9IGFmdGVyXG4gICAgICAgIH1cblxuICAgICAgICB0b0RPTSgpIHtcbiAgICAgICAgICAgIGxldCBoZWFkZXJFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICAgICAgaGVhZGVyRWwuc2V0QXR0cnModGhpcy5hdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiB0aGlzLmF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBDU1MgZG9lc24ndCBhbGxvdyBpbnRlcnBvbGF0aW9uIG9mIHZhcmlhYmxlcyBmb3IgVVJMcywgc28gZG8gaXQgYmVmb3JlaGFuZCB0byBiZSBuaWNlLlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZXNba2V5XT8uc3RhcnRzV2l0aCAmJiAodGhpcy5hdHRyaWJ1dGVzW2tleV0uc3RhcnRzV2l0aCgnaHR0cCcpIHx8IHRoaXMuYXR0cmlidXRlc1trZXldLnN0YXJ0c1dpdGgoJ2RhdGE6JykpKSB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlckVsLnN0eWxlLnNldFByb3BlcnR5KGAtLSR7a2V5fWAsIGB1cmwoJHt0aGlzLmF0dHJpYnV0ZXNba2V5XX0pYCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyRWwuc3R5bGUuc2V0UHJvcGVydHkoYC0tJHtrZXl9YCwgcHJvY2Vzc1ZhbHVlKGtleSwgdGhpcy5hdHRyaWJ1dGVzW2tleV0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hZnRlcikge1xuICAgICAgICAgICAgICAgIGhlYWRlckVsLmFkZENsYXNzKCdkYXRhLWxpbmstaWNvbi1hZnRlcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyRWwuYWRkQ2xhc3MoJ2RhdGEtbGluay1pY29uJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNyZWF0ZSBhIG5haXZlIGJyZWFkIGNydW1iXG4gICAgICAgICAgICByZXR1cm4gaGVhZGVyRWw7XG4gICAgICAgIH1cblxuICAgICAgICBpZ25vcmVFdmVudCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgc2V0dGluZ3MgPSBfc2V0dGluZ3M7XG4gICAgY29uc3Qgdmlld1BsdWdpbiA9IFZpZXdQbHVnaW4uZnJvbUNsYXNzKFxuICAgICAgICBjbGFzcyB7XG4gICAgICAgICAgICBkZWNvcmF0aW9uczogRGVjb3JhdGlvblNldDtcblxuICAgICAgICAgICAgY29uc3RydWN0b3IodmlldzogRWRpdG9yVmlldykge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVjb3JhdGlvbnMgPSB0aGlzLmJ1aWxkRGVjb3JhdGlvbnModmlldyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHVwZGF0ZSh1cGRhdGU6IFZpZXdVcGRhdGUpIHtcbiAgICAgICAgICAgICAgICBpZiAodXBkYXRlLmRvY0NoYW5nZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWNvcmF0aW9ucyA9IHRoaXMuZGVjb3JhdGlvbnMubWFwKHVwZGF0ZS5jaGFuZ2VzKTtcblxuICAgICAgICAgICAgICAgICAgICB1cGRhdGUuY2hhbmdlcy5pdGVyQ2hhbmdlcygoZnJvbUEsIHRvQSwgZnJvbUIsIHRvQiwgdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIGFsbCAnbGluZSBibG9ja3MnIGJldHdlZW4gdGhlIHJhbmdlIGNoYW5nZWQuIFByZXZlbnRzIHdlaXJkIGdyYXBoaWNhbCBidWdzXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtaW5Gcm9tID0gdXBkYXRlLnZpZXcubGluZUJsb2NrQXQoZnJvbUIpLmZyb207XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXhUbyA9IHVwZGF0ZS52aWV3LmxpbmVCbG9ja0F0KHRvQikudG87XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgdGhpbmdzIHdpdGhpbiBib3VuZHNcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVjb3JhdGlvbnMgPSB0aGlzLmRlY29yYXRpb25zLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyOiAoZnJvbSwgdG8pID0+IHRvIDwgbWluRnJvbSB8fCBmcm9tID4gbWF4VG99KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIGRlY29yYXRpb25zIHdpdGhpbiBib3VuZHNcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVjb3JhdGlvbnMgPSBSYW5nZVNldC5qb2luKFt0aGlzLmRlY29yYXRpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnVpbGREZWNvcmF0aW9ucyh1cGRhdGUudmlldywgbWluRnJvbSwgbWF4VG8pXSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh1cGRhdGUudmlld3BvcnRDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVjb3JhdGlvbnMgPSB0aGlzLmJ1aWxkRGVjb3JhdGlvbnModXBkYXRlLnZpZXcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZGVzdHJveSgpIHtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnVpbGREZWNvcmF0aW9ucyh2aWV3OiBFZGl0b3JWaWV3LCB1cGRhdGVGcm9tOiBudW1iZXIgPSAtMSwgdXBkYXRlVG86IG51bWJlcj0tMSkge1xuICAgICAgICAgICAgICAgIGxldCBidWlsZGVyID0gbmV3IFJhbmdlU2V0QnVpbGRlcjxEZWNvcmF0aW9uPigpO1xuICAgICAgICAgICAgICAgIGlmICghc2V0dGluZ3MuZW5hYmxlRWRpdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBidWlsZGVyLmZpbmlzaCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBtZFZpZXcgPSB2aWV3LnN0YXRlLmZpZWxkKGVkaXRvclZpZXdGaWVsZCkgYXMgTWFya2Rvd25WaWV3O1xuICAgICAgICAgICAgICAgIGxldCBsYXN0QXR0cmlidXRlcyA9IHt9O1xuICAgICAgICAgICAgICAgIGxldCBpY29uRGVjb0FmdGVyOiBEZWNvcmF0aW9uID0gbnVsbDtcbiAgICAgICAgICAgICAgICBsZXQgaWNvbkRlY29BZnRlcldoZXJlOiBudW1iZXIgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgbGV0IG1kQWxpYXNGcm9tOiBudW1iZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIGxldCBtZEFsaWFzVG86IG51bWJlciA9IG51bGw7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQge2Zyb20sIHRvfSBvZiB2aWV3LnZpc2libGVSYW5nZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2hlbiB1cGRhdGluZywgb25seSBjaGFuZ2VzIHRoZSByYW5nZSBnaXZlbi5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHVwZGF0ZUZyb20gIT09IC0xICYmICh0byA8IHVwZGF0ZUZyb20gfHwgZnJvbSA+IHVwZGF0ZVRvKSkgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIHN5bnRheFRyZWUodmlldy5zdGF0ZSkuaXRlcmF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG8sXG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRlcjogKG5vZGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodXBkYXRlRnJvbSAhPT0gLTEgJiYgKG5vZGUudG8gPCB1cGRhdGVGcm9tIHx8IG5vZGUuZnJvbSA+IHVwZGF0ZVRvKSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuUHJvcHMgPSBub2RlLnR5cGUucHJvcCh0b2tlbkNsYXNzTm9kZVByb3ApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b2tlblByb3BzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3BzID0gbmV3IFNldCh0b2tlblByb3BzLnNwbGl0KFwiIFwiKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3F1YXJlIEJyYWNrZXRzIG9mIGxpbmtzIGJvdGggaW50ZXJuYWwgKGBbW2AsIGBdXWApIGFuZCBtZCBsaW5rIChgW2AsIGBdYClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNNREZvcm1hdHRpbmcgPSBwcm9wcy5oYXMoJ2Zvcm1hdHRpbmctbGluaycpIHx8IHByb3BzLmhhcygnZm9ybWF0dGluZy1saW5rLXN0cmluZycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNNREZvcm1hdHRpbmcpIHJldHVybjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQYXJ0cyBvZiBpbnRlcm5hbCBsaW5rc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0xpbmsgPSBwcm9wcy5oYXMoXCJobWQtaW50ZXJuYWwtbGlua1wiKTsgLy8gW1tgTm90ZWAgb3IgYHxgIG9yIGBBbGlhc2BdXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0FsaWFzID0gcHJvcHMuaGFzKFwibGluay1hbGlhc1wiKTsgLy8gW1tOb3RlfCBgQWxpYXNgXV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNQaXBlID0gcHJvcHMuaGFzKFwibGluay1hbGlhcy1waXBlXCIpOyAvLyBbW05vdGUgYHxgIEFsaWFzXV1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgJ2FsaWFzJyBvZiB0aGUgbWQgbGluayAob3IgaXRzIGJyYWNrZXRzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc01ETGluayA9IHByb3BzLmhhcygnbGluaycpOyAvLyBgW2Agb3IgYEFsaWFzYCBvciBgXWAoVVJMKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgJ2ludGVybmFsIGxpbmsnIG9mIHRoZSBtZCBsaW5rIChvciBpdHMgYnJhY2tldHMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzTURVcmwgPSBwcm9wcy5oYXMoJ3VybCcpOyAvLyBbQWxpYXNdYChgIG9yIGBVUkxgIG9yIGApYFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc01ETGluaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBjYXRjaGVzIHRoZSBhbGlhcyBvZiBtZCBsaW5rcyBpLmUuIFsgYEFsaWFzYCBdKFVSTClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlJ2xsIGFwcGx5IHRoZSBzdHlsaW5nIGluIHRoZSBuZXh0IGl0ZXJhdGlvbiB3aGVuIHdlIGFuYWx5emUgdGhlIGBVUkxgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZEFsaWFzRnJvbSA9IG5vZGUuZnJvbTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1kQWxpYXNUbyA9IG5vZGUudG87XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzUGlwZSAmJiAhaXNBbGlhcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGljb25EZWNvQWZ0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZGVyLmFkZChpY29uRGVjb0FmdGVyV2hlcmUsIGljb25EZWNvQWZ0ZXJXaGVyZSwgaWNvbkRlY29BZnRlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbkRlY29BZnRlciA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbkRlY29BZnRlcldoZXJlID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNMaW5rICYmICFpc0FsaWFzICYmICFpc1BpcGUgfHwgaXNNRFVybCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxpbmtUZXh0ID0gdmlldy5zdGF0ZS5kb2Muc2xpY2VTdHJpbmcobm9kZS5mcm9tLCBub2RlLnRvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmtUZXh0ID0gbGlua1RleHQuc3BsaXQoXCIjXCIpWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpbGUgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChsaW5rVGV4dCwgbWRWaWV3LmZpbGUuYmFzZW5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTURVcmwgJiYgIWZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChkZWNvZGVVUklDb21wb25lbnQobGlua1RleHQpKSBhcyBURmlsZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2goZSkge31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IF9hdHRyaWJ1dGVzID0gZmV0Y2hUYXJnZXRBdHRyaWJ1dGVzU3luYyhhcHAsIHNldHRpbmdzLCBmaWxlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYXR0cmlidXRlczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiBfYXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzW1wiZGF0YS1saW5rLVwiICsga2V5XSA9IF9hdHRyaWJ1dGVzW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkZWNvID0gRGVjb3JhdGlvbi5tYXJrKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M6IFwiZGF0YS1saW5rLXRleHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpY29uRGVjb0JlZm9yZSA9IERlY29yYXRpb24ud2lkZ2V0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0OiBuZXcgSGVhZGVyV2lkZ2V0KGF0dHJpYnV0ZXMsIGZhbHNlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uRGVjb0FmdGVyID0gRGVjb3JhdGlvbi53aWRnZXQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXQ6IG5ldyBIZWFkZXJXaWRnZXQoYXR0cmlidXRlcywgdHJ1ZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNNRFVybCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBcHBseSByZXRyb2FjdGl2ZWx5IHRvIHRoZSBhbGlhcyBmb3VuZCBiZWZvcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRlY28gPSBEZWNvcmF0aW9uLm1hcmsoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczogYXR0cmlidXRlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiBcImRhdGEtbGluay10ZXh0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRlci5hZGQobWRBbGlhc0Zyb20sIG1kQWxpYXNGcm9tLCBpY29uRGVjb0JlZm9yZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkZXIuYWRkKG1kQWxpYXNGcm9tLCBtZEFsaWFzVG8sIGRlY28pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWNvbkRlY29BZnRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRlci5hZGQobWRBbGlhc1RvLCBtZEFsaWFzVG8sIGljb25EZWNvQWZ0ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbkRlY29BZnRlciA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uRGVjb0FmdGVyV2hlcmUgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWRBbGlhc0Zyb20gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWRBbGlhc1RvID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkZXIuYWRkKG5vZGUuZnJvbSwgbm9kZS5mcm9tLCBpY29uRGVjb0JlZm9yZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRlci5hZGQobm9kZS5mcm9tLCBub2RlLnRvLCBkZWNvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0QXR0cmlidXRlcyA9IGF0dHJpYnV0ZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbkRlY29BZnRlcldoZXJlID0gbm9kZS50bztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpc0xpbmsgJiYgaXNBbGlhcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRlY28gPSBEZWNvcmF0aW9uLm1hcmsoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IGxhc3RBdHRyaWJ1dGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiBcImRhdGEtbGluay10ZXh0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRlci5hZGQobm9kZS5mcm9tLCBub2RlLnRvLCBkZWNvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpY29uRGVjb0FmdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRlci5hZGQobm9kZS50bywgbm9kZS50bywgaWNvbkRlY29BZnRlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbkRlY29BZnRlciA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbkRlY29BZnRlcldoZXJlID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gYnVpbGRlci5maW5pc2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgZGVjb3JhdGlvbnM6IHYgPT4gdi5kZWNvcmF0aW9uc1xuICAgICAgICB9XG4gICAgKTtcbiAgICByZXR1cm4gdmlld1BsdWdpbjtcbn1cbiIsImltcG9ydCB7UGx1Z2luLCBkZWJvdW5jZSwgVEZpbGV9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IFN1cGVyY2hhcmdlZExpbmtzU2V0dGluZ1RhYiBmcm9tIFwic3JjL3NldHRpbmdzL1N1cGVyY2hhcmdlZExpbmtzU2V0dGluZ1RhYlwiXHJcbmltcG9ydCB7XHJcblx0dXBkYXRlRWxMaW5rcyxcclxuXHR1cGRhdGVWaXNpYmxlTGlua3MsXHJcblx0Y2xlYXJFeHRyYUF0dHJpYnV0ZXMsXHJcblx0dXBkYXRlRGl2RXh0cmFBdHRyaWJ1dGVzLCB1cGRhdGVQcm9wZXJ0aWVzUGFuZSxcclxufSBmcm9tIFwic3JjL2xpbmtBdHRyaWJ1dGVzL2xpbmtBdHRyaWJ1dGVzXCJcclxuaW1wb3J0IHsgU3VwZXJjaGFyZ2VkTGlua3NTZXR0aW5ncywgREVGQVVMVF9TRVRUSU5HUyB9IGZyb20gXCJzcmMvc2V0dGluZ3MvU3VwZXJjaGFyZ2VkTGlua3NTZXR0aW5nc1wiXHJcbmltcG9ydCB7IFByZWMgfSBmcm9tIFwiQGNvZGVtaXJyb3Ivc3RhdGVcIjtcclxuaW1wb3J0IHsgYnVpbGRDTVZpZXdQbHVnaW4gfSBmcm9tIFwiLi9zcmMvbGlua0F0dHJpYnV0ZXMvbGl2ZVByZXZpZXdcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN1cGVyY2hhcmdlZExpbmtzIGV4dGVuZHMgUGx1Z2luIHtcclxuXHRzZXR0aW5nczogU3VwZXJjaGFyZ2VkTGlua3NTZXR0aW5ncztcclxuXHRzZXR0aW5nVGFiOiBTdXBlcmNoYXJnZWRMaW5rc1NldHRpbmdUYWJcclxuXHRwcml2YXRlIG9ic2VydmVyczogW011dGF0aW9uT2JzZXJ2ZXIsIHN0cmluZywgc3RyaW5nXVtdO1xyXG5cdHByaXZhdGUgbW9kYWxPYnNlcnZlcnM6IE11dGF0aW9uT2JzZXJ2ZXJbXSA9IFtdO1xyXG5cclxuXHRhc3luYyBvbmxvYWQoKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRjb25zb2xlLmxvZygnU3VwZXJjaGFyZ2VkIGxpbmtzIGxvYWRlZCcpO1xyXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHJcblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IFN1cGVyY2hhcmdlZExpbmtzU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xyXG5cdFx0dGhpcy5yZWdpc3Rlck1hcmtkb3duUG9zdFByb2Nlc3NvcigoZWwsIGN0eCkgPT4ge1xyXG5cdFx0XHR1cGRhdGVFbExpbmtzKHRoaXMuYXBwLCB0aGlzLCBlbCwgY3R4KVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Y29uc3QgcGx1Z2luID0gdGhpcztcclxuXHRcdGNvbnN0IHVwZGF0ZUxpbmtzID0gZnVuY3Rpb24oX2ZpbGU6IFRGaWxlKSB7XHJcblx0XHRcdHVwZGF0ZVZpc2libGVMaW5rcyhwbHVnaW4uYXBwLCBwbHVnaW4pO1xyXG5cdFx0XHRwbHVnaW4ub2JzZXJ2ZXJzLmZvckVhY2goKFtvYnNlcnZlciwgdHlwZSwgb3duX2NsYXNzXSkgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IGxlYXZlcyA9IHBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSh0eXBlKTtcclxuXHRcdFx0XHRsZWF2ZXMuZm9yRWFjaChsZWFmID0+IHtcclxuXHRcdFx0XHRcdHBsdWdpbi51cGRhdGVDb250YWluZXIobGVhZi52aWV3LmNvbnRhaW5lckVsLCBwbHVnaW4sIG93bl9jbGFzcyk7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gTGl2ZSBwcmV2aWV3XHJcblx0XHRjb25zdCBleHQgPSBQcmVjLmxvd2VzdChidWlsZENNVmlld1BsdWdpbih0aGlzLmFwcCwgdGhpcy5zZXR0aW5ncykpO1xyXG5cdFx0dGhpcy5yZWdpc3RlckVkaXRvckV4dGVuc2lvbihleHQpO1xyXG5cclxuXHRcdHRoaXMub2JzZXJ2ZXJzID0gW107XHJcblxyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uTGF5b3V0UmVhZHkoKCkgPT4ge1xyXG5cdFx0XHR0aGlzLmluaXRWaWV3T2JzZXJ2ZXJzKHRoaXMpO1xyXG5cdFx0XHR0aGlzLmluaXRNb2RhbE9ic2VydmVycyh0aGlzLCBkb2N1bWVudCk7XHJcblx0XHRcdHVwZGF0ZVZpc2libGVMaW5rcyh0aGlzLmFwcCwgdGhpcyk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBJbml0aWFsaXphdGlvblxyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLndvcmtzcGFjZS5vbihcIndpbmRvdy1vcGVuXCIsICh3aW5kb3csIHdpbikgPT4gdGhpcy5pbml0TW9kYWxPYnNlcnZlcnModGhpcywgd2luZG93LmdldENvbnRhaW5lcigpLmRvYykpKTtcclxuXHJcblx0XHQvLyBVcGRhdGUgd2hlblxyXG5cdFx0Ly8gRGVib3VuY2VkIHRvIHByZXZlbnQgbGFnIHdoZW4gd3JpdGluZ1xyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUub24oJ2NoYW5nZWQnLCBkZWJvdW5jZSh1cGRhdGVMaW5rcywgNTAwLCB0cnVlKSkpO1xyXG5cclxuXHRcdC8vIFVwZGF0ZSB3aGVuIGxheW91dCBjaGFuZ2VzXHJcblx0XHQvLyBAdHMtaWdub3JlXHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAud29ya3NwYWNlLm9uKFwibGF5b3V0LWNoYW5nZVwiLCBkZWJvdW5jZSh1cGRhdGVMaW5rcywgMTAsIHRydWUpKSk7XHJcblx0XHQvLyBVcGRhdGUgcGx1Z2luIHZpZXdzIHdoZW4gbGF5b3V0IGNoYW5nZXNcclxuXHRcdC8vIFRPRE86IFRoaXMgaXMgYW4gZXhwZW5zaXZlIG9wZXJhdGlvbiB0aGF0IHNlZW1zIGxpa2UgaXQgaXMgY2FsbGVkIGZhaXJseSBmcmVxdWVudGx5LiBNYXliZSB3ZSBjYW4gZG8gdGhpcyBtb3JlIGVmZmljaWVudGx5P1xyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLndvcmtzcGFjZS5vbihcImxheW91dC1jaGFuZ2VcIiwgKCkgPT4gdGhpcy5pbml0Vmlld09ic2VydmVycyh0aGlzKSkpO1xyXG5cclxuXHRcdC8vIERFQlVHOiBXaGVuIGFkZGluZyBhIG5ldyB2aWV3LCB0byBnZXQgdGhlIHByb3BlciBpZCBvZiB0aGF0IHZpZXcsIHVuY29tbWVudCB0aGlzIGFuZCByZWxvYWQgdGhlIHBsdWdpblxyXG5cdFx0Ly8gdGhpcy5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMobGVhZiA9PiB7XHJcblx0XHQvLyBcdGNvbnNvbGUubG9nKGxlYWYudmlldy5nZXRWaWV3VHlwZSgpKTtcclxuXHRcdC8vIH0pO1xyXG5cdH1cclxuXHJcblx0aW5pdFZpZXdPYnNlcnZlcnMocGx1Z2luOiBTdXBlcmNoYXJnZWRMaW5rcykge1xyXG5cdFx0Ly8gUmVzZXQgb2JzZXJ2ZXJzXHJcblx0XHRwbHVnaW4ub2JzZXJ2ZXJzLmZvckVhY2goKFtvYnNlcnZlciwgdHlwZV0pID0+IHtcclxuXHRcdFx0b2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xyXG5cdFx0fSk7XHJcblx0XHRwbHVnaW4ub2JzZXJ2ZXJzID0gW107XHJcblxyXG5cdFx0Ly8gUmVnaXN0ZXIgbmV3IG9ic2VydmVycyBmb3IgcGFydGljdWxhciBmaWxlIHBhbmVzXHJcblx0XHRwbHVnaW4ucmVnaXN0ZXJWaWV3VHlwZSgnYmFja2xpbmsnLCBwbHVnaW4sIFwiLnRyZWUtaXRlbS1pbm5lclwiLCB0cnVlKTtcclxuXHRcdHBsdWdpbi5yZWdpc3RlclZpZXdUeXBlKCdvdXRnb2luZy1saW5rJywgcGx1Z2luLCBcIi50cmVlLWl0ZW0taW5uZXJcIiwgdHJ1ZSk7XHJcblx0XHRwbHVnaW4ucmVnaXN0ZXJWaWV3VHlwZSgnc2VhcmNoJywgcGx1Z2luLCBcIi50cmVlLWl0ZW0taW5uZXJcIik7XHJcblx0XHRpZiAocGx1Z2luLmFwcD8ucGx1Z2lucz8ucGx1Z2lucz8uYnJlYWRjcnVtYnMpIHtcclxuXHRcdFx0Ly8gY29uc29sZS5sb2coJ1N1cGVyY2hhcmdlZCBsaW5rczogRW5hYmxpbmcgYnJlYWRjcnVtYnMgc3VwcG9ydCcpO1xyXG5cdFx0XHRwbHVnaW4ucmVnaXN0ZXJWaWV3VHlwZSgnYmMtbWF0cml4LXZpZXcnLCBwbHVnaW4sICdzcGFuLmludGVybmFsLWxpbmsnKTtcclxuXHRcdFx0cGx1Z2luLnJlZ2lzdGVyVmlld1R5cGUoJ0JDLWR1Y2tzJywgcGx1Z2luLCAnLmludGVybmFsLWxpbmsnKTtcclxuXHRcdFx0cGx1Z2luLnJlZ2lzdGVyVmlld1R5cGUoJ2JjLXRyZWUtdmlldycsIHBsdWdpbiwgJ3NwYW4uaW50ZXJuYWwtbGluaycpO1xyXG5cdFx0XHQvLyBCcmVhZGNydW1icyBjb2RlYmxvY2sgc3VwcG9ydCBhcyBzdWdnZXN0ZWQgYnkgaHR0cHM6Ly9naXRodWIuY29tL21kZWxvYmVsbGUvb2JzaWRpYW5fc3VwZXJjaGFyZ2VkX2xpbmtzL2lzc3Vlcy8yNDgjaXNzdWVjb21tZW50LTMyMzE3MDYwNjNcclxuXHRcdFx0cGx1Z2luLnJlZ2lzdGVyVmlld1R5cGUoJ21hcmtkb3duJywgcGx1Z2luLCAnLkJDLXBhZ2Utdmlld3Mgc3Bhbi5pbnRlcm5hbC1saW5rLCAuQkMtY29kZWJsb2NrLXRyZWUgc3Bhbi5pbnRlcm5hbC1saW5rLCAubm9kZXMgYS5pbnRlcm5hbC1saW5rJyk7XHJcblx0XHR9XHJcblx0XHRwbHVnaW4ucmVnaXN0ZXJWaWV3VHlwZSgnZ3JhcGgtYW5hbHlzaXMnLCBwbHVnaW4sICcuaW50ZXJuYWwtbGluaycpO1xyXG5cdFx0cGx1Z2luLnJlZ2lzdGVyVmlld1R5cGUoJ3N0YXJyZWQnLCBwbHVnaW4sICcubmF2LWZpbGUtdGl0bGUtY29udGVudCcpO1xyXG5cdFx0cGx1Z2luLnJlZ2lzdGVyVmlld1R5cGUoJ2ZpbGUtZXhwbG9yZXInLCBwbHVnaW4sICcubmF2LWZpbGUtdGl0bGUtY29udGVudCcpO1xyXG5cclxuXHRcdGlmIChwbHVnaW4uYXBwPy5wbHVnaW5zPy5wbHVnaW5zPy5bJ2ZvbGRlci1ub3RlcyddKSB7XHJcblx0XHRcdC8vIGNvbnNvbGUubG9nKCdTdXBlcmNoYXJnZWQgbGlua3M6IEVuYWJsaW5nIGZvbGRlciBub3RlcyBzdXBwb3J0Jyk7XHJcblx0XHRcdHBsdWdpbi5yZWdpc3RlclZpZXdUeXBlKCdmaWxlLWV4cGxvcmVyJywgcGx1Z2luLCAnLmhhcy1mb2xkZXItbm90ZSAudHJlZS1pdGVtLWlubmVyJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0cGx1Z2luLnJlZ2lzdGVyVmlld1R5cGUoJ3JlY2VudC1maWxlcycsIHBsdWdpbiwgJy5uYXYtZmlsZS10aXRsZS1jb250ZW50Jyk7XHJcblx0XHRwbHVnaW4ucmVnaXN0ZXJWaWV3VHlwZSgnYm9va21hcmtzJywgcGx1Z2luLCAnLnRyZWUtaXRlbS1pbm5lcicsIGZhbHNlLCB0cnVlKTtcclxuXHRcdC8vIEB0cy1pZ25vcmVcclxuXHRcdGlmIChwbHVnaW4uYXBwPy5pbnRlcm5hbFBsdWdpbnM/LnBsdWdpbnM/LmJhc2VzPy5lbmFibGVkICYmIHBsdWdpbi5zZXR0aW5ncy5lbmFibGVCYXNlcykge1xyXG5cdFx0XHQvLyBjb25zb2xlLmxvZygnU3VwZXJjaGFyZ2VkIGxpbmtzOiBFbmFibGluZyBiYXNlcyBzdXBwb3J0Jyk7XHJcblx0XHRcdHBsdWdpbi5yZWdpc3RlclZpZXdUeXBlKCdiYXNlcycsIHBsdWdpbiwgJy5pbnRlcm5hbC1saW5rJyk7XHJcblx0XHRcdC8vIEZvciBlbWJlZGRlZCBiYXNlc1xyXG5cdFx0XHRwbHVnaW4ucmVnaXN0ZXJWaWV3VHlwZSgnbWFya2Rvd24nLCBwbHVnaW4sICdkaXYuYmFzZXMtdGFibGUtY2VsbCAgLmludGVybmFsLWxpbmsnKTtcclxuXHRcdH1cclxuXHRcdGlmIChwbHVnaW4uYXBwPy5wbHVnaW5zPy5wbHVnaW5zPy5bJ3NpbWlsYXItbm90ZXMnXSkge1xyXG5cdFx0XHRwbHVnaW4ucmVnaXN0ZXJWaWV3VHlwZSgnbWFya2Rvd24nLCBwbHVnaW4sICcuc2ltaWxhci1ub3Rlcy1wYW5lIC50cmVlLWl0ZW0taW5uZXInLCB0cnVlKVxyXG5cdFx0fVxyXG5cdFx0Ly8gSWYgYmFja2xpbmtzIGluIGVkaXRvciBpcyBvblxyXG5cdFx0Ly8gQHRzLWlnbm9yZVxyXG5cdFx0aWYgKHBsdWdpbi5hcHA/LmludGVybmFsUGx1Z2lucz8ucGx1Z2lucz8uYmFja2xpbms/LmVuYWJsZWQgJiYgcGx1Z2luLmFwcD8uaW50ZXJuYWxQbHVnaW5zPy5wbHVnaW5zPy5iYWNrbGluaz8uaW5zdGFuY2U/Lm9wdGlvbnM/LmJhY2tsaW5rSW5Eb2N1bWVudCkge1xyXG5cdFx0XHQvLyBjb25zb2xlLmxvZyhcIlN1cGVyY2hhcmdlZCBsaW5rczogRW5hYmxpbmcgYmFja2xpbmtzIGluIGRvY3VtZW50IHN1cHBvcnRcIik7XHJcblx0XHRcdHBsdWdpbi5yZWdpc3RlclZpZXdUeXBlKCdtYXJrZG93bicsIHBsdWdpbiwgJy5lbWJlZGRlZC1iYWNrbGlua3MgLnRyZWUtaXRlbS1pbm5lcicsIHRydWUpO1xyXG5cdFx0fVxyXG5cdFx0Y29uc3QgcHJvcGVydHlMZWF2ZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFwiZmlsZS1wcm9wZXJ0aWVzXCIpO1xyXG5cdFx0IGZvciAobGV0IGkgPSAwOyBpIDwgcHJvcGVydHlMZWF2ZXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0IGNvbnN0IGNvbnRhaW5lciA9IHByb3BlcnR5TGVhdmVzW2ldLnZpZXcuY29udGFpbmVyRWw7XHJcblx0XHRcdCBsZXQgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigocmVjb3JkcywgXykgPT57XHJcblx0XHRcdFx0IGNvbnN0IGZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG5cdFx0XHRcdCBpZiAoISFmaWxlKSB7XHJcblx0XHRcdFx0XHQgdXBkYXRlUHJvcGVydGllc1BhbmUoY29udGFpbmVyLCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpLCB0aGlzLmFwcCwgcGx1Z2luKTtcclxuXHRcdFx0XHQgfVxyXG5cdFx0XHQgfSk7XHJcblx0XHRcdCBvYnNlcnZlci5vYnNlcnZlKGNvbnRhaW5lciwge3N1YnRyZWU6IHRydWUsIGNoaWxkTGlzdDogdHJ1ZSwgYXR0cmlidXRlczogZmFsc2V9KTtcclxuXHRcdFx0IHBsdWdpbi5vYnNlcnZlcnMucHVzaChbb2JzZXJ2ZXIsIFwiZmlsZS1wcm9wZXJ0aWVzXCIgKyBpLCBcIlwiXSk7XHJcblx0XHRcdCAvLyBUT0RPOiBObyBwcm9wZXIgdW5sb2FkaW5nIVxyXG5cdFx0IH1cclxuXHRcdHBsdWdpbi5yZWdpc3RlclZpZXdUeXBlKCdmaWxlLXByb3BlcnRpZXMnLCBwbHVnaW4sICdkaXYuaW50ZXJuYWwtbGluayA+IC5tdWx0aS1zZWxlY3QtcGlsbC1jb250ZW50Jyk7XHJcblx0fVxyXG5cclxuXHRpbml0TW9kYWxPYnNlcnZlcnMocGx1Z2luOiBTdXBlcmNoYXJnZWRMaW5rcywgZG9jOiBEb2N1bWVudCkge1xyXG5cdFx0Y29uc3QgY29uZmlnID0ge1xyXG5cdFx0XHRzdWJ0cmVlOiBmYWxzZSxcclxuXHRcdFx0Y2hpbGRMaXN0OiB0cnVlLFxyXG5cdFx0XHRhdHRyaWJ1dGVzOiBmYWxzZVxyXG5cdFx0fTtcclxuXHJcblx0XHR0aGlzLm1vZGFsT2JzZXJ2ZXJzLnB1c2gobmV3IE11dGF0aW9uT2JzZXJ2ZXIocmVjb3JkcyA9PiB7XHJcblx0XHRcdHJlY29yZHMuZm9yRWFjaCgobXV0YXRpb24pID0+IHtcclxuXHRcdFx0XHRpZiAobXV0YXRpb24udHlwZSA9PT0gJ2NoaWxkTGlzdCcpIHtcclxuXHRcdFx0XHRcdG11dGF0aW9uLmFkZGVkTm9kZXMuZm9yRWFjaChuID0+IHtcclxuXHRcdFx0XHRcdFx0aWYgKCdjbGFzc05hbWUnIGluIG4gJiZcclxuXHRcdFx0XHRcdFx0XHQvLyBAdHMtaWdub3JlXHJcblx0XHRcdFx0XHRcdFx0KG4uY2xhc3NOYW1lLmluY2x1ZGVzKCdtb2RhbC1jb250YWluZXInKSAmJiBwbHVnaW4uc2V0dGluZ3MuZW5hYmxlUXVpY2tTd2l0Y2hlclxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gQHRzLWlnbm9yZVxyXG5cdFx0XHRcdFx0XHRcdFx0fHwgbi5jbGFzc05hbWUuaW5jbHVkZXMoJ3N1Z2dlc3Rpb24tY29udGFpbmVyJykgJiYgcGx1Z2luLnNldHRpbmdzLmVuYWJsZVN1Z2dlc3RvcikpIHtcclxuXHRcdFx0XHRcdFx0XHRsZXQgc2VsZWN0b3IgPSBcIi5zdWdnZXN0aW9uLXRpdGxlLCAuc3VnZ2VzdGlvbi1ub3RlLCAuYW5vdGhlci1xdWljay1zd2l0Y2hlcl9faXRlbV9fdGl0bGUsIC5vbW5pc2VhcmNoLXJlc3VsdF9fdGl0bGUgPiBzcGFuXCI7XHJcblx0XHRcdFx0XHRcdFx0Ly8gQHRzLWlnbm9yZVxyXG5cdFx0XHRcdFx0XHRcdGlmIChuLmNsYXNzTmFtZS5pbmNsdWRlcygnc3VnZ2VzdGlvbi1jb250YWluZXInKSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0c2VsZWN0b3IgPSBcIi5zdWdnZXN0aW9uLXRpdGxlLCAuc3VnZ2VzdGlvbi1ub3RlXCI7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdHBsdWdpbi51cGRhdGVDb250YWluZXIobiBhcyBIVE1MRWxlbWVudCwgcGx1Z2luLCBzZWxlY3Rvcik7XHJcblx0XHRcdFx0XHRcdFx0cGx1Z2luLl93YXRjaENvbnRhaW5lcihudWxsLCBuIGFzIEhUTUxFbGVtZW50LCBwbHVnaW4sIHNlbGVjdG9yKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH0pKTtcclxuXHRcdHRoaXMubW9kYWxPYnNlcnZlcnMubGFzdCgpLm9ic2VydmUoZG9jLmJvZHksIGNvbmZpZyk7XHJcblx0fVxyXG5cclxuXHRyZWdpc3RlclZpZXdUeXBlKHZpZXdUeXBlTmFtZTogc3RyaW5nLCBwbHVnaW46IFN1cGVyY2hhcmdlZExpbmtzLCBzZWxlY3Rvcjogc3RyaW5nLCB1cGRhdGVEeW5hbWljID0gZmFsc2UsIGZpbHRlcl9jb2xsYXBzaWJsZTogYm9vbGVhbiA9IGZhbHNlKSB7XHJcblx0XHRjb25zdCBsZWF2ZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKHZpZXdUeXBlTmFtZSk7XHJcblx0XHQvLyBpZiAobGVhdmVzLmxlbmd0aCA+IDEpIHtcclxuXHRcdCBmb3IgKGxldCBpID0gMDsgaSA8IGxlYXZlcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRjb25zdCBjb250YWluZXIgPSBsZWF2ZXNbaV0udmlldy5jb250YWluZXJFbDtcclxuXHRcdFx0aWYgKHVwZGF0ZUR5bmFtaWMpIHtcclxuXHRcdFx0XHRwbHVnaW4uX3dhdGNoQ29udGFpbmVyRHluYW1pYyh2aWV3VHlwZU5hbWUgKyBpLCBjb250YWluZXIsIHBsdWdpbiwgc2VsZWN0b3IpXHJcblx0XHRcdH1cclxuXHRcdFx0IGVsc2Uge1xyXG5cdFx0XHRcdHBsdWdpbi5fd2F0Y2hDb250YWluZXIodmlld1R5cGVOYW1lICsgaSwgY29udGFpbmVyLCBwbHVnaW4sIHNlbGVjdG9yLCBmaWx0ZXJfY29sbGFwc2libGUpO1xyXG5cdFx0XHR9XHJcblx0XHQgfVxyXG5cdFx0Ly8gfVxyXG5cdFx0Ly8gZWxzZSBpZiAobGVhdmVzLmxlbmd0aCA8IDEpIHJldHVybjtcclxuXHRcdC8vIGVsc2Uge1xyXG5cdFx0Ly8gXHRjb25zdCBjb250YWluZXIgPSBsZWF2ZXNbMF0udmlldy5jb250YWluZXJFbDtcclxuXHRcdC8vIFx0dGhpcy51cGRhdGVDb250YWluZXIoY29udGFpbmVyLCBwbHVnaW4sIHNlbGVjdG9yKTtcclxuXHRcdC8vIFx0aWYgKHVwZGF0ZUR5bmFtaWMpIHtcclxuXHRcdC8vIFx0XHRwbHVnaW4uX3dhdGNoQ29udGFpbmVyRHluYW1pYyh2aWV3VHlwZU5hbWUsIGNvbnRhaW5lciwgcGx1Z2luLCBzZWxlY3RvcilcclxuXHRcdC8vIFx0fVxyXG5cdFx0Ly8gXHRlbHNlIHtcclxuXHRcdC8vIFx0XHRwbHVnaW4uX3dhdGNoQ29udGFpbmVyKHZpZXdUeXBlTmFtZSwgY29udGFpbmVyLCBwbHVnaW4sIHNlbGVjdG9yKTtcclxuXHRcdC8vIFx0fVxyXG5cdFx0Ly8gfVxyXG5cdH1cclxuXHJcblx0dXBkYXRlQ29udGFpbmVyKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3MsIHNlbGVjdG9yOiBzdHJpbmcsIGZpbHRlcl9jb2xsYXBzaWJsZTogYm9vbGVhbiA9IGZhbHNlKSB7XHJcblx0XHRpZiAoIXBsdWdpbi5zZXR0aW5ncy5lbmFibGVCYWNrbGlua3MgJiYgY29udGFpbmVyLmdldEF0dHJpYnV0ZShcImRhdGEtdHlwZVwiKSAhPT0gXCJmaWxlLWV4cGxvcmVyXCIpIHJldHVybjtcclxuXHRcdGlmICghcGx1Z2luLnNldHRpbmdzLmVuYWJsZUZpbGVMaXN0ICYmIGNvbnRhaW5lci5nZXRBdHRyaWJ1dGUoXCJkYXRhLXR5cGVcIikgPT09IFwiZmlsZS1leHBsb3JlclwiKSByZXR1cm47XHJcblx0XHRjb25zdCBub2RlcyA9IGNvbnRhaW5lci5maW5kQWxsKHNlbGVjdG9yKTtcclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyArK2kpIHtcclxuXHRcdFx0Y29uc3QgZWwgPSBub2Rlc1tpXSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0dXBkYXRlRGl2RXh0cmFBdHRyaWJ1dGVzKHBsdWdpbi5hcHAsIHBsdWdpbi5zZXR0aW5ncywgZWwsIFwiXCIsIHVuZGVmaW5lZCwgZmlsdGVyX2NvbGxhcHNpYmxlKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHJlbW92ZUZyb21Db250YWluZXIoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgc2VsZWN0b3I6IHN0cmluZykge1xyXG5cdFx0Y29uc3Qgbm9kZXMgPSBjb250YWluZXIuZmluZEFsbChzZWxlY3Rvcik7XHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgKytpKSB7XHJcblx0XHRcdGNvbnN0IGVsID0gbm9kZXNbaV0gYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdGNsZWFyRXh0cmFBdHRyaWJ1dGVzKGVsKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdF93YXRjaENvbnRhaW5lcih2aWV3VHlwZTogc3RyaW5nLCBjb250YWluZXI6IEhUTUxFbGVtZW50LCBwbHVnaW46IFN1cGVyY2hhcmdlZExpbmtzLCBzZWxlY3Rvcjogc3RyaW5nLCBmaWx0ZXJfY29sbGFwc2libGU6IGJvb2xlYW4gPSBmYWxzZSkge1xyXG5cdFx0bGV0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKHJlY29yZHMsIF8pID0+IHtcclxuXHRcdFx0cGx1Z2luLnVwZGF0ZUNvbnRhaW5lcihjb250YWluZXIsIHBsdWdpbiwgc2VsZWN0b3IsIGZpbHRlcl9jb2xsYXBzaWJsZSk7XHJcblx0XHR9KTtcclxuXHRcdG9ic2VydmVyLm9ic2VydmUoY29udGFpbmVyLCB7IHN1YnRyZWU6IHRydWUsIGNoaWxkTGlzdDogdHJ1ZSwgYXR0cmlidXRlczogZmFsc2UgfSk7XHJcblx0XHRpZiAodmlld1R5cGUpIHtcclxuXHRcdFx0cGx1Z2luLm9ic2VydmVycy5wdXNoKFtvYnNlcnZlciwgdmlld1R5cGUsIHNlbGVjdG9yXSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRfd2F0Y2hDb250YWluZXJEeW5hbWljKHZpZXdUeXBlOiBzdHJpbmcsIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3MsIHNlbGVjdG9yOiBzdHJpbmcsIHBhcmVudF9jbGFzcyA9ICd0cmVlLWl0ZW0nKSB7XHJcblx0XHQvLyBVc2VkIGZvciBlZmZpY2llbnQgdXBkYXRpbmcgb2YgdGhlIGJhY2tsaW5rcyBwYW5lbFxyXG5cdFx0Ly8gT25seSBsb29wcyB0aHJvdWdoIG5ld2x5IGFkZGVkIERPTSBub2RlcyBpbnN0ZWFkIG9mIGNoYW5naW5nIGFsbCBvZiB0aGVtXHJcblx0XHRpZiAoIXBsdWdpbi5zZXR0aW5ncy5lbmFibGVCYWNrbGlua3MpIHJldHVybjtcclxuXHRcdGxldCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChyZWNvcmRzLCBfKSA9PiB7XHJcblx0XHRcdHJlY29yZHMuZm9yRWFjaCgobXV0YXRpb24pID0+IHtcclxuXHRcdFx0XHRpZiAobXV0YXRpb24udHlwZSA9PT0gJ2NoaWxkTGlzdCcpIHtcclxuXHRcdFx0XHRcdG11dGF0aW9uLmFkZGVkTm9kZXMuZm9yRWFjaCgobikgPT4ge1xyXG5cdFx0XHRcdFx0XHRpZiAoJ2NsYXNzTmFtZScgaW4gbikge1xyXG5cdFx0XHRcdFx0XHRcdC8vIEB0cy1pZ25vcmVcclxuXHRcdFx0XHRcdFx0XHRpZiAobi5jbGFzc05hbWUuaW5jbHVkZXMgJiYgdHlwZW9mIG4uY2xhc3NOYW1lLmluY2x1ZGVzID09PSAnZnVuY3Rpb24nICYmIG4uY2xhc3NOYW1lLmluY2x1ZGVzKHBhcmVudF9jbGFzcykpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGZpbGVEaXZzID0gKG4gYXMgSFRNTEVsZW1lbnQpLmZpbmRBbGwoc2VsZWN0b3IpO1xyXG5cdFx0XHRcdFx0XHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBmaWxlRGl2cy5sZW5ndGg7ICsraSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBsaW5rID0gZmlsZURpdnNbaV0gYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHVwZGF0ZURpdkV4dHJhQXR0cmlidXRlcyhwbHVnaW4uYXBwLCBwbHVnaW4uc2V0dGluZ3MsIGxpbmssIFwiXCIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cdFx0b2JzZXJ2ZXIub2JzZXJ2ZShjb250YWluZXIsIHsgc3VidHJlZTogdHJ1ZSwgY2hpbGRMaXN0OiB0cnVlLCBhdHRyaWJ1dGVzOiBmYWxzZSB9KTtcclxuXHRcdHBsdWdpbi5vYnNlcnZlcnMucHVzaChbb2JzZXJ2ZXIsIHZpZXdUeXBlLCBzZWxlY3Rvcl0pO1xyXG5cdH1cclxuXHJcblxyXG5cdG9udW5sb2FkKCkge1xyXG5cdFx0dGhpcy5vYnNlcnZlcnMuZm9yRWFjaCgoW29ic2VydmVyLCB0eXBlLCBvd25fY2xhc3NdKSA9PiB7XHJcblx0XHRcdG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcclxuXHRcdFx0Y29uc3QgbGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSh0eXBlKTtcclxuXHRcdFx0bGVhdmVzLmZvckVhY2gobGVhZiA9PiB7XHJcblx0XHRcdFx0dGhpcy5yZW1vdmVGcm9tQ29udGFpbmVyKGxlYWYudmlldy5jb250YWluZXJFbCwgb3duX2NsYXNzKTtcclxuXHRcdFx0fSlcclxuXHRcdH0pO1xyXG5cdFx0Zm9yIChjb25zdCBvYnNlcnZlciBvZiB0aGlzLm1vZGFsT2JzZXJ2ZXJzKSB7XHJcblx0XHRcdG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcclxuXHRcdH1cclxuXHRcdGNvbnNvbGUubG9nKCdTdXBlcmNoYXJnZWQgbGlua3MgdW5sb2FkZWQnKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcclxuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xyXG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcclxuXHR9XHJcbn1cclxuXHJcbiJdLCJuYW1lcyI6WyJnZXRBbGxUYWdzIiwiZ2V0TGlua3BhdGgiLCJNYXJrZG93blZpZXciLCJNb2RhbCIsIlNldHRpbmciLCJQbHVnaW5TZXR0aW5nVGFiIiwiZGVib3VuY2UiLCJXaWRnZXRUeXBlIiwiVmlld1BsdWdpbiIsIlJhbmdlU2V0IiwidmlldyIsIlJhbmdlU2V0QnVpbGRlciIsImVkaXRvclZpZXdGaWVsZCIsInN5bnRheFRyZWUiLCJ0b2tlbkNsYXNzTm9kZVByb3AiLCJEZWNvcmF0aW9uIiwiUGx1Z2luIiwiUHJlYyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQW9HQTtBQUNPLFNBQVMsU0FBUyxDQUFDLE9BQU8sRUFBRSxVQUFVLEVBQUUsQ0FBQyxFQUFFLFNBQVMsRUFBRTtBQUM3RCxJQUFJLFNBQVMsS0FBSyxDQUFDLEtBQUssRUFBRSxFQUFFLE9BQU8sS0FBSyxZQUFZLENBQUMsR0FBRyxLQUFLLEdBQUcsSUFBSSxDQUFDLENBQUMsVUFBVSxPQUFPLEVBQUUsRUFBRSxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRTtBQUNoSCxJQUFJLE9BQU8sS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFH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
